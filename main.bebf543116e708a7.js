"use strict";(self.webpackChunkplanningPoker=self.webpackChunkplanningPoker||[]).push([[179],{2011:(gt,Ie,k)=>{k.d(Ie,{Dh:()=>ce,GT:()=>ne,cc:()=>we,hO:()=>Be,on:()=>j,pX:()=>te,xv:()=>ae});var c=k(4650),K=k(9260),P=k(2122);gt=k.hmd(gt);const ee=["ngOnDestroy"],te=(Ce,Ee,Ne,ve={})=>new Proxy(Ce,{get:(_e,Te)=>Ne.runOutsideAngular(()=>{var Fe;if(Ce[Te])return!(null===(Fe=ve?.spy)||void 0===Fe)&&Fe.get&&ve.spy.get(Te,Ce[Te]),Ce[Te];if(ee.indexOf(Te)>-1)return()=>{};const Pe=Ee.toPromise().then(U=>{const pe=U&&U[Te];return"function"==typeof pe?pe.bind(U):pe&&pe.then?pe.then(Ve=>Ne.run(()=>Ve)):Ne.run(()=>pe)});return new Proxy(()=>{},{get:(U,pe)=>Pe[pe],apply:(U,pe,Ve)=>Pe.then(qe=>{var ht;const tt=qe&&qe(...Ve);return!(null===(ht=ve?.spy)||void 0===ht)&&ht.apply&&ve.spy.apply(Te,Ve,tt),tt})})})}),ne=(Ce,Ee)=>{Ee.forEach(Ne=>{Object.getOwnPropertyNames(Ne.prototype||Ne).forEach(ve=>{Object.defineProperty(Ce.prototype,ve,Object.getOwnPropertyDescriptor(Ne.prototype||Ne,ve))})})};class de{constructor(Ee){return Ee}}const ce=new c.OlP("angularfire2.app.options"),ae=new c.OlP("angularfire2.app.name");function j(Ce,Ee,Ne){const _e="object"==typeof Ne&&Ne||{};_e.name=_e.name||"string"==typeof Ne&&Ne||"[DEFAULT]";const Fe=K.Z.apps.filter(Pe=>Pe&&Pe.name===_e.name)[0]||Ee.runOutsideAngular(()=>K.Z.initializeApp(Ce,_e));try{JSON.stringify(Ce)!==JSON.stringify(Fe.options)&&$("error",`${Fe.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(Fe)}const $=(Ce,...Ee)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ce](...Ee)},q={provide:de,useFactory:j,deps:[ce,c.R0b,[new c.FiY,ae]]};let Be=(()=>{class Ce{constructor(Ne){K.Z.registerVersion("angularfire",P.q4.full,"core"),K.Z.registerVersion("angularfire",P.q4.full,"app-compat"),K.Z.registerVersion("angular",c.q4F.full,Ne.toString())}static initializeApp(Ne,ve){return{ngModule:Ce,providers:[{provide:ce,useValue:Ne},{provide:ae,useValue:ve}]}}}return Ce.\u0275fac=function(Ne){return new(Ne||Ce)(c.LFG(c.Lbi))},Ce.\u0275mod=c.oAB({type:Ce}),Ce.\u0275inj=c.cJS({providers:[q]}),Ce})();function we(Ce,Ee,Ne,ve,_e){const[,Te,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Ce)||[];if(Te)return function ze(Ce,Ee){try{return Ce.toString()===Ee.toString()}catch{return Ce===Ee}}(_e,Fe)||(he("error",`${Ee} was already initialized on the ${Ne} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:Fe})),Te;{const Pe=ve();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Pe,_e]),Pe}}const st=!!gt.hot,he=(Ce,...Ee)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ce](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(gt,Ie,k)=>{k.d(Ie,{q4:()=>oi,iC:()=>ft,fc:()=>us,HU:()=>Zo,vb:()=>pr,JM:()=>os,u3:()=>Jt});var c=k(4650),K=k(259),P=k(5861),ee=k(9681),te=k(2090),ne=k(4859),de=k(1877),ce=k(8766);const ae="@firebase/installations",j="0.6.4",$=1e4,q=`w:${j}`,Be="FIS_v2",we="https://firebaseinstallations.googleapis.com/v1",ze=36e5,Ee=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(b){return b instanceof te.ZR&&b.code.includes("request-failed")}function ve({projectId:b}){return`${we}/projects/${b}/installations`}function _e(b){return{token:b.token,requestStatus:2,expiresIn:qe(b.expiresIn),creationTime:Date.now()}}function Te(b,D){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,P.Z)(function*(b,D){const F=(yield D.json()).error;return Ee.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Pe({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function pe(b){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function qe(b){return Number(b.replace("s","000"))}function se(){return(se=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const F=ve(b),Z=Pe(b),J=D.getImmediate({optional:!0});if(J){const lt=yield J.getHeartbeatsHeader();lt&&Z.append("x-firebase-client",lt)}const Ye={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Be,appId:b.appId,sdkVersion:q})},ut=yield pe(()=>fetch(F,Ye));if(ut.ok){const lt=yield ut.json();return{fid:lt.fid||x,registrationStatus:2,refreshToken:lt.refreshToken,authToken:_e(lt.authToken)}}throw yield Te("Create Installation",ut)})).apply(this,arguments)}function le(b){return new Promise(D=>{setTimeout(D,b)})}const Me=/^[cdef][\w-]{21}$/,ke="";function je(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function Je(b){return function ge(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Me.test(x)?x:ke}catch{return ke}}function Ke(b){return`${b.appName}!${b.appId}`}const rn=new Map;function Ct(b,D){const x=Ke(b);Dt(x,D),function Yn(b,D){const x=function bn(){return!hn&&"BroadcastChannel"in self&&(hn=new BroadcastChannel("[Firebase] FID Change"),hn.onmessage=b=>{Dt(b.data.key,b.data.fid)}),hn}();x&&x.postMessage({key:b,fid:D}),function Mn(){0===rn.size&&hn&&(hn.close(),hn=null)}()}(x,D)}function Dt(b,D){const x=rn.get(b);if(x)for(const F of x)F(D)}let hn=null;const pi="firebase-installations-database",qs=1,gi="firebase-installations-store";let Kr=null;function ws(){return Kr||(Kr=(0,ce.X3)(pi,qs,{upgrade:(b,D)=>{0===D&&b.createObjectStore(gi)}})),Kr}function Dn(b,D){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,P.Z)(function*(b,D){const x=Ke(b),Z=(yield ws()).transaction(gi,"readwrite"),J=Z.objectStore(gi),Se=yield J.get(x);return yield J.put(D,x),yield Z.done,(!Se||Se.fid!==D.fid)&&Ct(b,D.fid),D})).apply(this,arguments)}function mt(b){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(b){const D=Ke(b),F=(yield ws()).transaction(gi,"readwrite");yield F.objectStore(gi).delete(D),yield F.done})).apply(this,arguments)}function Si(b,D){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,P.Z)(function*(b,D){const x=Ke(b),Z=(yield ws()).transaction(gi,"readwrite"),J=Z.objectStore(gi),Se=yield J.get(x),Ye=D(Se);return void 0===Ye?yield J.delete(x):yield J.put(Ye,x),yield Z.done,Ye&&(!Se||Se.fid!==Ye.fid)&&Ct(b,Ye.fid),Ye})).apply(this,arguments)}function Sr(b){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,P.Z)(function*(b){let D;const x=yield Si(b.appConfig,F=>{const Z=function kt(b){return Ar(b||{fid:je(),registrationStatus:0})}(F),J=function yt(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function Tt(b,D){return Ws.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:wn(b)}:{installationEntry:D}}(b,Z);return D=J.registrationPromise,J.installationEntry});return x.fid===ke?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}}),Zs.apply(this,arguments)}function Ws(){return Ws=(0,P.Z)(function*(b,D){try{const x=yield function tt(b,D){return se.apply(this,arguments)}(b,D);return Dn(b.appConfig,x)}catch(x){throw Ne(x)&&409===x.customData.serverCode?yield mt(b.appConfig):yield Dn(b.appConfig,{fid:D.fid,registrationStatus:0}),x}}),Ws.apply(this,arguments)}function wn(b){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,P.Z)(function*(b){let D=yield Br(b.appConfig);for(;1===D.registrationStatus;)yield le(100),D=yield Br(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Sr(b);return F||x}return D})).apply(this,arguments)}function Br(b){return Si(b,D=>{if(!D)throw Ee.create("installation-not-found");return Ar(D)})}function Ar(b){return function ma(b){return 1===b.registrationStatus&&b.registrationTime+$<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function es(){return(es=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const F=function Kt(b,{fid:D}){return`${ve(b)}/${D}/authTokens:generate`}(b,x),Z=function U(b,{refreshToken:D}){const x=Pe(b);return x.append("Authorization",function ht(b){return`${Be} ${b}`}(D)),x}(b,x),J=D.getImmediate({optional:!0});if(J){const lt=yield J.getHeartbeatsHeader();lt&&Z.append("x-firebase-client",lt)}const Ye={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:q,appId:b.appId}})},ut=yield pe(()=>fetch(F,Ye));if(ut.ok)return _e(yield ut.json());throw yield Te("Generate Auth Token",ut)})).apply(this,arguments)}function jr(b){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,P.Z)(function*(b,D=!1){let x;const F=yield Si(b.appConfig,J=>{if(!Ut(J))throw Ee.create("not-registered");const Se=J.authToken;if(!D&&function xr(b){return 2===b.requestStatus&&!function B(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+ze}(b)}(Se))return J;if(1===Se.requestStatus)return x=function $e(b,D){return ye.apply(this,arguments)}(b,D),J;{if(!navigator.onLine)throw Ee.create("app-offline");const Ye=function L(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}(J);return x=function It(b,D){return Rt.apply(this,arguments)}(b,Ye),Ye}});return x?yield x:F.authToken}),Fi.apply(this,arguments)}function ye(){return(ye=(0,P.Z)(function*(b,D){let x=yield rt(b.appConfig);for(;1===x.authToken.requestStatus;)yield le(100),x=yield rt(b.appConfig);const F=x.authToken;return 0===F.requestStatus?jr(b,D):F})).apply(this,arguments)}function rt(b){return Si(b,D=>{if(!Ut(D))throw Ee.create("not-registered");return function G(b){return 1===b.requestStatus&&b.requestTime+$<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Rt(){return Rt=(0,P.Z)(function*(b,D){try{const x=yield function an(b,D){return es.apply(this,arguments)}(b,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Dn(b.appConfig,F),x}catch(x){if(!Ne(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Dn(b.appConfig,F)}else yield mt(b.appConfig);throw x}}),Rt.apply(this,arguments)}function Ut(b){return void 0!==b&&2===b.registrationStatus}function Q(){return(Q=(0,P.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:F}=yield Sr(D);return F?F.catch(console.error):jr(D).catch(console.error),x.fid})).apply(this,arguments)}function Ze(){return Ze=(0,P.Z)(function*(b,D=!1){const x=b;return yield function cn(b){return On.apply(this,arguments)}(x),(yield jr(x,D)).token}),Ze.apply(this,arguments)}function On(){return(On=(0,P.Z)(function*(b){const{registrationPromise:D}=yield Sr(b);D&&(yield D)})).apply(this,arguments)}function pu(b){return Ee.create("missing-app-config-values",{valueName:b})}const gu="installations",Vn=b=>{const D=b.getProvider("app").getImmediate(),x=function Rc(b){if(!b||!b.options)throw pu("App Configuration");if(!b.name)throw pu("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw pu(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ee._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Oc=b=>{const D=b.getProvider("app").getImmediate(),x=(0,ee._getProvider)(D,gu).getImmediate();return{getId:()=>function fe(b){return Q.apply(this,arguments)}(x),getToken:Z=>function et(b){return Ze.apply(this,arguments)}(x,Z)}};(function Pc(){(0,ee._registerComponent)(new ne.wA(gu,Vn,"PUBLIC")),(0,ee._registerComponent)(new ne.wA("installations-internal",Oc,"PRIVATE"))})(),(0,ee.registerVersion)(ae,j),(0,ee.registerVersion)(ae,j,"esm2017");const Yt="@firebase/remote-config",Mr=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class So{constructor(D,x,F,Z){this.client=D,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var x=this;return(0,P.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Z;D.eTag=Z&&Z.eTag;const J=yield x.client.fetch(D),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(Se),J})()}}function Js(b=navigator){return b.languages&&b.languages[0]||b.language}class Jr{constructor(D,x,F,Z,J,Se){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=J,this.appId=Se}fetch(D){var x=this;return(0,P.Z)(function*(){const[F,Z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ut={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:x.appId,language_code:Js()},lt={method:"POST",headers:Ye,body:JSON.stringify(ut)},zt=fetch(Se,lt),At=new Promise((Gn,Cr)=>{D.signal.addEventListener(()=>{const Ot=new Error("The operation was aborted.");Ot.name="AbortError",Cr(Ot)})});let ln;try{yield Promise.race([zt,At]),ln=yield zt}catch(Gn){let Cr="fetch-client-network";throw"AbortError"===Gn?.name&&(Cr="fetch-timeout"),Mr.create(Cr,{originalErrorMessage:Gn?.message})}let gr=ln.status;const Fa=ln.headers.get("ETag")||void 0;let ue,wr;if(200===ln.status){let Gn;try{Gn=yield ln.json()}catch(Cr){throw Mr.create("fetch-client-parse",{originalErrorMessage:Cr?.message})}ue=Gn.entries,wr=Gn.state}if("INSTANCE_STATE_UNSPECIFIED"===wr?gr=500:"NO_CHANGE"===wr?gr=304:("NO_TEMPLATE"===wr||"EMPTY_CONFIG"===wr)&&(ue={}),304!==gr&&200!==gr)throw Mr.create("fetch-status",{httpStatus:gr});return{status:gr,eTag:Fa,config:ue}})()}}class qt{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,P.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,P.Z)(function*(){yield function _i(b,D){return new Promise((x,F)=>{const Z=Math.max(D-Date.now(),0),J=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(J),F(Mr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const J=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),J}catch(J){if(!function kc(b){if(!(b instanceof te.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(J))throw J;const Se={throttleEndTimeMillis:Date.now()+(0,te.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Se),Z.attemptFetch(D,Se)}})()}}class _u{constructor(D,x,F,Z,J){this.app=D,this._client=x,this._storageCache=F,this._storage=Z,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xs(b,D){const x=b.target.error||void 0;return Mr.create(D,{originalErrorMessage:x&&x?.message})}const Xr="app_namespace_store";class ei{constructor(D,x,F,Z=function cg(){return new Promise((b,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{D(Xs(F,"storage-open"))},x.onsuccess=F=>{b(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Xr,{keyPath:"compositeKey"})}}catch(x){D(Mr.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,J)=>{const Ye=F.transaction([Xr],"readonly").objectStore(Xr),ut=x.createCompositeKey(D);try{const lt=Ye.get(ut);lt.onerror=zt=>{J(Xs(zt,"storage-get"))},lt.onsuccess=zt=>{const At=zt.target.result;Z(At?At.value:void 0)}}catch(lt){J(Mr.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(D,x){var F=this;return(0,P.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((J,Se)=>{const ut=Z.transaction([Xr],"readwrite").objectStore(Xr),lt=F.createCompositeKey(D);try{const zt=ut.put({compositeKey:lt,value:x});zt.onerror=At=>{Se(Xs(At,"storage-set"))},zt.onsuccess=()=>{J()}}catch(zt){Se(Mr.create("storage-set",{originalErrorMessage:zt?.message}))}})})()}delete(D){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,J)=>{const Ye=F.transaction([Xr],"readwrite").objectStore(Xr),ut=x.createCompositeKey(D);try{const lt=Ye.delete(ut);lt.onerror=zt=>{J(Xs(zt,"storage-delete"))},lt.onsuccess=()=>{Z()}}catch(lt){J(Mr.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ti{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),J=yield x;J&&(D.lastFetchStatus=J);const Se=yield F;Se&&(D.lastSuccessfulFetchTimestampMillis=Se);const Ye=yield Z;Ye&&(D.activeConfig=Ye)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Rr(){return ad.apply(this,arguments)}function ad(){return(ad=(0,P.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}!function ns(){(0,ee._registerComponent)(new ne.wA("remote-config",function b(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mr.create("registration-window");if(!(0,te.hl)())throw Mr.create("indexed-db-unavailable");const{projectId:J,apiKey:Se,appId:Ye}=F.options;if(!J)throw Mr.create("registration-project-id");if(!Se)throw Mr.create("registration-api-key");if(!Ye)throw Mr.create("registration-app-id");const ut=new ei(Ye,F.name,x=x||"firebase"),lt=new ti(ut),zt=new de.Yd(Yt);zt.logLevel=de.in.ERROR;const At=new Jr(Z,ee.SDK_VERSION,x,J,Se,Ye),ln=new qt(At,ut),gr=new So(ln,ut,lt,zt),Fa=new _u(F,gr,lt,ut,zt);return function Ys(b){const D=(0,te.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Fa),Fa},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(Yt,"0.4.4"),(0,ee.registerVersion)(Yt,"0.4.4","esm2017")}();const ud="/firebase-messaging-sw.js",rs="/firebase-cloud-messaging-push-scope",eo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",va="https://fcmregistrations.googleapis.com/v1",Fc="google.c.a.c_id",tf="google.c.a.c_l",nf="google.c.a.ts",lg="google.c.a.e";var to=(()=>{return(b=to||(to={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",to;var b})();function Ui(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dg(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let J=0;J<F.length;++J)Z[J]=F.charCodeAt(J);return Z}const Lc="fcm_token_details_db",Vc=5,yi="fcm_token_object_Store";function vu(){return vu=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(Lc))return null;let D=null;return(yield(0,ce.X3)(Lc,Vc,{upgrade:(F=(0,P.Z)(function*(Z,J,Se,Ye){var ut;if(J<2||!Z.objectStoreNames.contains(yi))return;const lt=Ye.objectStore(yi),zt=yield lt.index("fcmSenderId").get(b);if(yield lt.clear(),zt)if(2===J){const At=zt;if(!At.auth||!At.p256dh||!At.endpoint)return;D={token:At.fcmToken,createTime:null!==(ut=At.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Ui(At.vapidKey)}}}else if(3===J){const At=zt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ui(At.auth),p256dh:Ui(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ui(At.vapidKey)}}}else if(4===J){const At=zt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ui(At.auth),p256dh:Ui(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ui(At.vapidKey)}}}}),function(J,Se,Ye,ut){return F.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Lc),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),function rf(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var F}),vu.apply(this,arguments)}const wu="firebase-messaging-database",hg=1,ni="firebase-messaging-store";let cd=null;function no(){return cd||(cd=(0,ce.X3)(wu,hg,{upgrade:(b,D)=>{0===D&&b.createObjectStore(ni)}})),cd}function wa(b){return Mo.apply(this,arguments)}function Mo(){return Mo=(0,P.Z)(function*(b){const D=bs(b),F=yield(yield no()).transaction(ni).objectStore(ni).get(D);if(F)return F;{const Z=yield function Uc(b){return vu.apply(this,arguments)}(b.appConfig.senderId);if(Z)return yield Ro(b,Z),Z}}),Mo.apply(this,arguments)}function Ro(b,D){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,P.Z)(function*(b,D){const x=bs(b),Z=(yield no()).transaction(ni,"readwrite");return yield Z.objectStore(ni).put(D,x),yield Z.done,D})).apply(this,arguments)}function Cu(){return(Cu=(0,P.Z)(function*(b){const D=bs(b),F=(yield no()).transaction(ni,"readwrite");yield F.objectStore(ni).delete(D),yield F.done})).apply(this,arguments)}function bs({appConfig:b}){return b.appId}const nn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Eu(b,D){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,P.Z)(function*(b,D){const x=yield jc(b),F=Xn(D),Z={method:"POST",headers:x,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(Ia(b.appConfig),Z)).json()}catch(Se){throw nn.create("token-subscribe-failed",{errorInfo:Se?.toString()})}if(J.error)throw nn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw nn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function Iu(){return(Iu=(0,P.Z)(function*(b,D){const x=yield jc(b),F=Xn(D.subscriptionOptions),Z={method:"PATCH",headers:x,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(`${Ia(b.appConfig)}/${D.token}`,Z)).json()}catch(Se){throw nn.create("token-update-failed",{errorInfo:Se?.toString()})}if(J.error)throw nn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw nn.create("token-update-no-token");return J.token})).apply(this,arguments)}function Bi(b,D){return Or.apply(this,arguments)}function Or(){return(Or=(0,P.Z)(function*(b,D){const F={method:"DELETE",headers:yield jc(b)};try{const J=yield(yield fetch(`${Ia(b.appConfig)}/${D}`,F)).json();if(J.error)throw nn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(Z){throw nn.create("token-unsubscribe-failed",{errorInfo:Z?.toString()})}})).apply(this,arguments)}function Ia({projectId:b}){return`${va}/projects/${b}/registrations`}function jc(b){return ji.apply(this,arguments)}function ji(){return(ji=(0,P.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Xn({p256dh:b,auth:D,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:D,p256dh:b}};return F!==eo&&(Z.web.applicationPubKey=F),Z}const $c=6048e5;function ba(){return ba=(0,P.Z)(function*(b){const D=yield function hd(b,D){return Da.apply(this,arguments)}(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:Ui(D.getKey("auth")),p256dh:Ui(D.getKey("p256dh"))},F=yield wa(b.firebaseDependencies);if(F){if(function sf(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}(F.subscriptionOptions,x))return Date.now()>=F.createTime+$c?function Hc(b,D){return St.apply(this,arguments)}(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Bi(b.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return dd(b.firebaseDependencies,x)}return dd(b.firebaseDependencies,x)}),ba.apply(this,arguments)}function Po(){return Po=(0,P.Z)(function*(b){const D=yield wa(b.firebaseDependencies);D&&(yield Bi(b.firebaseDependencies,D.token),yield function Bc(b){return Cu.apply(this,arguments)}(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),Po.apply(this,arguments)}function St(){return St=(0,P.Z)(function*(b,D){try{const x=yield function Pn(b,D){return Iu.apply(this,arguments)}(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Ro(b.firebaseDependencies,F),x}catch(x){throw yield function is(b){return Po.apply(this,arguments)}(b),x}}),St.apply(this,arguments)}function dd(b,D){return bu.apply(this,arguments)}function bu(){return(bu=(0,P.Z)(function*(b,D){const F={token:yield Eu(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Ro(b,F),F.token})).apply(this,arguments)}function Da(){return(Da=(0,P.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dg(D)})})).apply(this,arguments)}function Du(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function af(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const F=D.notification.body;F&&(b.notification.body=F);const Z=D.notification.image;Z&&(b.notification.image=Z);const J=D.notification.icon;J&&(b.notification.icon=J)}(D,b),function Sn(b,D){D.data&&(b.data=D.data)}(D,b),function be(b,D){var x,F,Z,J,Se;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Ye=null!==(Z=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(J=D.notification)||void 0===J?void 0:J.click_action;Ye&&(b.fcmOptions.link=Ye);const ut=null===(Se=D.fcmOptions)||void 0===Se?void 0:Se.analytics_label;ut&&(b.fcmOptions.analyticsLabel=ut)}(D,b),D}function Tu(b,D){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function or(b){return nn.create("missing-app-config-values",{valueName:b})}Tu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Tu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zc{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function uf(b){if(!b||!b.options)throw or("App Configuration Object");if(!b.name)throw or("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of D)if(!x[F])throw or(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ko(b){return ri.apply(this,arguments)}function ri(){return(ri=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(ud,{scope:rs}),b.swRegistration.update().catch(()=>{})}catch(D){throw nn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function No(){return(No=(0,P.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield ko(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw nn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function Su(){return(Su=(0,P.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=eo)})).apply(this,arguments)}function Un(){return Un=(0,P.Z)(function*(b,D){if(!navigator)throw nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw nn.create("permission-blocked");return yield function pd(b,D){return Su.apply(this,arguments)}(b,D?.vapidKey),yield function fd(b,D){return No.apply(this,arguments)}(b,D?.serviceWorkerRegistration),function Oo(b){return ba.apply(this,arguments)}(b)}),Un.apply(this,arguments)}function Ta(){return(Ta=(0,P.Z)(function*(b,D,x){const F=function Sa(b){switch(b){case to.NOTIFICATION_CLICKED:return"notification_open";case to.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Fc],message_name:x[tf],message_time:x[nf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Au(){return Au=(0,P.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===to.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Du(x)):b.onMessageHandler.next(Du(x)));const F=x.data;(function Qt(b){return"object"==typeof b&&!!b&&Fc in b})(F)&&"1"===F[lg]&&(yield function ii(b,D,x){return Ta.apply(this,arguments)}(b,x.messageType,F))}),Au.apply(this,arguments)}const gd="@firebase/messaging",qc=b=>{const D=new zc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function vi(b,D){return Au.apply(this,arguments)}(D,x)),D},xu=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function Gc(b,D){return Un.apply(this,arguments)}(D,F)}};function Zc(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,P.Z)(function*(){try{yield(0,te.eu)()}catch{return!1}return typeof window<"u"&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ro(){(0,ee._registerComponent)(new ne.wA("messaging",qc,"PUBLIC")),(0,ee._registerComponent)(new ne.wA("messaging-internal",xu,"PRIVATE")),(0,ee.registerVersion)(gd,"0.12.4"),(0,ee.registerVersion)(gd,"0.12.4","esm2017")}();const yd="analytics",mg="firebase_id",Hr="origin",Aa=6e4,Cn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ds="https://www.googletagmanager.com/gtag/js",er=new de.Yd("@firebase/analytics"),si=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function yg(b){if(!b.startsWith(Ds)){const D=si.create("invalid-gtag-resource",{gtagURL:b});return er.warn(D.message),""}return b}function vg(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Ts(){return(Ts=(0,P.Z)(function*(b,D,x,F,Z,J){const Se=F[Z];try{if(Se)yield D[Se];else{const ut=(yield vg(x)).find(lt=>lt.measurementId===Z);ut&&(yield D[ut.appId])}}catch(Ye){er.error(Ye)}b("config",Z,J)})).apply(this,arguments)}function wi(){return(wi=(0,P.Z)(function*(b,D,x,F,Z){try{let J=[];if(Z&&Z.send_to){let Se=Z.send_to;Array.isArray(Se)||(Se=[Se]);const Ye=yield vg(x);for(const ut of Se){const lt=Ye.find(At=>At.measurementId===ut),zt=lt&&D[lt.appId];if(!zt){J=[];break}J.push(zt)}}0===J.length&&(J=Object.values(D)),yield Promise.all(J),b("event",F,Z||{})}catch(J){er.error(J)}})).apply(this,arguments)}const wd=30,Ci=new class Cg{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Xc(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function $i(){return($i=(0,P.Z)(function*(b){var D;const{appId:x,apiKey:F}=b,Z={method:"GET",headers:Xc(F)},J=Cn.replace("{app-id}",x),Se=yield fetch(J,Z);if(200!==Se.status&&304!==Se.status){let Ye="";try{const ut=yield Se.json();null!==(D=ut.error)&&void 0!==D&&D.message&&(Ye=ut.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Ye})}return Se.json()})).apply(this,arguments)}function En(){return(En=(0,P.Z)(function*(b,D=Ci,x){const{appId:F,apiKey:Z,measurementId:J}=b.options;if(!F)throw si.create("no-app-id");if(!Z){if(J)return{measurementId:J,appId:F};throw si.create("no-api-key")}const Se=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new df;return setTimeout((0,P.Z)(function*(){Ye.abort()}),void 0!==x?x:Aa),Ss({appId:F,apiKey:Z,measurementId:J},Se,Ye,D)})).apply(this,arguments)}function Ss(b,D,x){return so.apply(this,arguments)}function so(){return so=(0,P.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},F,Z=Ci){var J;const{appId:Se,measurementId:Ye}=b;try{yield function el(b,D){return new Promise((x,F)=>{const Z=Math.max(D-Date.now(),0),J=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(J),F(si.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(F,D)}catch(ut){if(Ye)return er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${ut?.message}]`),{appId:Se,measurementId:Ye};throw ut}try{const ut=yield function lf(b){return $i.apply(this,arguments)}(b);return Z.deleteThrottleMetadata(Se),ut}catch(ut){const lt=ut;if(!function Vo(b){if(!(b instanceof te.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(lt)){if(Z.deleteThrottleMetadata(Se),Ye)return er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:Se,measurementId:Ye};throw ut}const zt=503===Number(null===(J=lt?.customData)||void 0===J?void 0:J.httpStatus)?(0,te.$s)(x,Z.intervalMillis,wd):(0,te.$s)(x,Z.intervalMillis),At={throttleEndTimeMillis:Date.now()+zt,backoffCount:x+1};return Z.setThrottleMetadata(Se,At),er.debug(`Calling attemptFetch again in ${zt} millis`),Ss(b,At,F,Z)}}),so.apply(this,arguments)}class df{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Uo,Ou;function Bo(){return(Bo=(0,P.Z)(function*(b,D,x,F,Z){if(Z&&Z.global)b("event",x,F);else{const J=yield D;b("event",x,Object.assign(Object.assign({},F),{send_to:J}))}})).apply(this,arguments)}function Oa(){return(Oa=(0,P.Z)(function*(){if(!(0,te.hl)())return er.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(b){return er.warn(si.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function ss(){return ss=(0,P.Z)(function*(b,D,x,F,Z,J,Se){var Ye;const ut=function Lo(b){return En.apply(this,arguments)}(b);ut.then(gr=>{x[gr.measurementId]=gr.appId,b.options.measurementId&&gr.measurementId!==b.options.measurementId&&er.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${gr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gr=>er.error(gr)),D.push(ut);const lt=function hf(){return Oa.apply(this,arguments)}().then(gr=>{if(gr)return F.getId()}),[zt,At]=yield Promise.all([ut,lt]);(function wg(b){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(Ds)&&x.src.includes(b))return x;return null})(J)||function Qc(b,D){const x=function Yc(b,D){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(b,D)),x}("firebase-js-sdk-policy",{createScriptURL:yg}),F=document.createElement("script"),Z=`${Ds}?l=${b}&id=${D}`;F.src=x?x?.createScriptURL(Z):Z,F.async=!0,document.head.appendChild(F)}(J,zt.measurementId),Ou&&(Z("consent","default",Ou),function Ms(b){Ou=b}(void 0)),Z("js",new Date);const ln=null!==(Ye=Se?.config)&&void 0!==Ye?Ye:{};return ln[Hr]="firebase",ln.update=!0,null!=At&&(ln[mg]=At),Z("config",zt.measurementId,ln),Uo&&(Z("set",Uo),function Ho(b){Uo=b}(void 0)),zt.measurementId}),ss.apply(this,arguments)}class Cd{constructor(D){this.app=D}_delete(){return delete Ai[this.app.options.appId],Promise.resolve()}}let Ai={},Pu=[];const ao={};let ku,Pr,uo="dataLayer",Ed="gtag",nl=!1;function bd(b,D,x){!function zo(){const b=[];if((0,te.ru)()&&b.push("This is a browser extension environment."),(0,te.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=si.create("invalid-analytics-context",{errorInfo:D});er.warn(x.message)}}();const F=b.options.appId;if(!F)throw si.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw si.create("no-api-key");er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ai[F])throw si.create("already-exists",{id:F});if(!nl){!function Fo(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(uo);const{wrappedGtag:J,gtagCore:Se}=function vd(b,D,x,F,Z){let J=function(...Se){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(J=window[Z]),window[Z]=function xa(b,D,x,F){function J(){return J=(0,P.Z)(function*(Se,Ye,ut){try{"event"===Se?yield function Ru(b,D,x,F,Z){return wi.apply(this,arguments)}(b,D,x,Ye,ut):"config"===Se?yield function io(b,D,x,F,Z,J){return Ts.apply(this,arguments)}(b,D,x,F,Ye,ut):"consent"===Se?b("consent","update",ut):b("set",Ye)}catch(lt){er.error(lt)}}),J.apply(this,arguments)}return function Z(Se,Ye,ut){return J.apply(this,arguments)}}(J,b,D,x),{gtagCore:J,wrappedGtag:window[Z]}}(Ai,Pu,ao,uo,Ed);Pr=J,ku=Se,nl=!0}return Ai[F]=function ff(b,D,x,F,Z,J,Se){return ss.apply(this,arguments)}(b,Pu,ao,D,ku,uo,x),new Cd(b)}function Rs(){return co.apply(this,arguments)}function co(){return(co=(0,P.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}const gf="@firebase/analytics";!function mf(){(0,ee._registerComponent)(new ne.wA(yd,(D,{options:x})=>bd(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ee._registerComponent)(new ne.wA("analytics-internal",function b(D){try{const x=D.getProvider(yd).getImmediate();return{logEvent:(F,Z,J)=>function Os(b,D,x,F){b=(0,te.m9)(b),function Ma(b,D,x,F,Z){return Bo.apply(this,arguments)}(Pr,Ai[b.app.options.appId],D,x,F).catch(Z=>er.error(Z))}(x,F,Z,J)}}catch(x){throw si.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ee.registerVersion)(gf,"0.9.5"),(0,ee.registerVersion)(gf,"0.9.5","esm2017")}();var _f=k(4408),yf=k(7565);const qo=new class Ig extends yf.v{}(class Q_ extends _f.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):(D.flush(this),0)}});var wf=k(4986),tr=k(9751),Fu=k(8505),xi=k(5363),lo=k(9468);const oi=new c.GfV("7.5.0"),Ps="__angularfire_symbol__analyticsIsSupportedValue",rl="__angularfire_symbol__analyticsIsSupported",Na="__angularfire_symbol__remoteConfigIsSupportedValue",ks="__angularfire_symbol__remoteConfigIsSupported",il="__angularfire_symbol__messagingIsSupportedValue",Cf="__angularfire_symbol__messagingIsSupported";function os(b,D,x){if(D){if(1===D.length)return D[0];const J=D.filter(Se=>Se.app===x);if(1===J.length)return J[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[rl]||(globalThis[rl]=Rs().then(b=>globalThis[Ps]=b).catch(()=>globalThis[Ps]=!1)),globalThis[Cf]||(globalThis[Cf]=Zc().then(b=>globalThis[il]=b).catch(()=>globalThis[il]=!1)),globalThis[ks]||(globalThis[ks]=Rr().then(b=>globalThis[Na]=b).catch(()=>globalThis[Na]=!1));const pr=(b,D)=>{const x=D?[D]:(0,K.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(b).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function yn(){}class Ii{constructor(D,x=qo){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const Z=this.zone;return this.delegate.schedule(function(Se){Z.runGuarded(()=>{D.apply(this,[Se])})},x,F)}}class bi{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yn,{},yn,yn)),x.pipe((0,Fu.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zo=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ii(Zone.current)),this.insideAngular=x.run(()=>new Ii(Zone.current,wf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(c.LFG(c.R0b))},b.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Hi(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function as(b){return Hi().ngZone.run(()=>b())}function us(b){return b.pipe((0,xi.Q)(Hi().outsideAngular))}function ft(b){return Hi(),function ho(b){return function(x){return(x=x.lift(new bi(b.ngZone))).pipe((0,lo.R)(b.outsideAngular),(0,xi.Q)(b.insideAngular))}}(Hi())(b)}const Di=(b,D)=>function(){const F=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),as(()=>b.apply(void 0,F))},Jt=(b,D)=>function(){let x;const F=arguments;for(let J=0;J<arguments.length;J++)"function"==typeof F[J]&&(D&&(x||(x=as(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yn,{},yn,yn)))),F[J]=Di(F[J],x));const Z=function Vu(b){return Hi().ngZone.runOutsideAngular(()=>b())}(()=>b.apply(this,F));if(!D){if(Z instanceof tr.y){const J=Hi();return Z.pipe((0,lo.R)(J.outsideAngular),(0,xi.Q)(J.insideAngular))}return as(()=>Z)}return Z instanceof tr.y?Z.pipe(ft):Z instanceof Promise?as(()=>new Promise((J,Se)=>Z.then(Ye=>as(()=>J(Ye)),Ye=>as(()=>Se(Ye))))):"function"==typeof Z&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),Z.apply(this,arguments)}:as(()=>Z)}},2090:(gt,Ie,k)=>{k.d(Ie,{$s:()=>It,BH:()=>Te,G6:()=>Me,L:()=>ae,LL:()=>Ct,Pz:()=>_e,Sg:()=>Fe,UG:()=>pe,US:()=>ne,ZB:()=>q,ZR:()=>rn,aH:()=>ve,b$:()=>ht,eu:()=>je,hl:()=>ke,jU:()=>Ve,m9:()=>xr,ne:()=>kt,pd:()=>Sr,r3:()=>gi,ru:()=>qe,tV:()=>j,uI:()=>U,vZ:()=>Yr,w1:()=>se,xO:()=>Si,xb:()=>ws,z$:()=>Pe,zI:()=>Je,zd:()=>Rn});const ee=function(B){const L=[];let G=0;for(let fe=0;fe<B.length;fe++){let Q=B.charCodeAt(fe);Q<128?L[G++]=Q:Q<2048?(L[G++]=Q>>6|192,L[G++]=63&Q|128):55296==(64512&Q)&&fe+1<B.length&&56320==(64512&B.charCodeAt(fe+1))?(Q=65536+((1023&Q)<<10)+(1023&B.charCodeAt(++fe)),L[G++]=Q>>18|240,L[G++]=Q>>12&63|128,L[G++]=Q>>6&63|128,L[G++]=63&Q|128):(L[G++]=Q>>12|224,L[G++]=Q>>6&63|128,L[G++]=63&Q|128)}return L},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,fe=[];for(let Q=0;Q<B.length;Q+=3){const et=B[Q],Ze=Q+1<B.length,cn=Ze?B[Q+1]:0,On=Q+2<B.length,Ln=On?B[Q+2]:0;let $r=(15&cn)<<2|Ln>>6,Li=63&Ln;On||(Li=64,Ze||($r=64)),fe.push(G[et>>2],G[(3&et)<<4|cn>>4],G[$r],G[Li])}return fe.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(ee(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let G=0,fe=0;for(;G<B.length;){const Q=B[G++];if(Q<128)L[fe++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const et=B[G++];L[fe++]=String.fromCharCode((31&Q)<<6|63&et)}else if(Q>239&&Q<365){const On=((7&Q)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;L[fe++]=String.fromCharCode(55296+(On>>10)),L[fe++]=String.fromCharCode(56320+(1023&On))}else{const et=B[G++],Ze=B[G++];L[fe++]=String.fromCharCode((15&Q)<<12|(63&et)<<6|63&Ze)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,fe=[];for(let Q=0;Q<B.length;){const et=G[B.charAt(Q++)],cn=Q<B.length?G[B.charAt(Q)]:0;++Q;const Ln=Q<B.length?G[B.charAt(Q)]:64;++Q;const Nt=Q<B.length?G[B.charAt(Q)]:64;if(++Q,null==et||null==cn||null==Ln||null==Nt)throw new de;fe.push(et<<2|cn>>4),64!==Ln&&(fe.push(cn<<4&240|Ln>>2),64!==Nt&&fe.push(Ln<<6&192|Nt))}return fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ae=function(B){return function(B){const L=ee(B);return ne.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return ne.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!Be(G)||(B[G]=q(B[G],L[G]));return B}function Be(B){return"__proto__"!==B}const Ce=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&j(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},ve=()=>{var B;return null===(B=Ce())||void 0===B?void 0:B.config},_e=B=>{var L;return null===(L=Ce())||void 0===L?void 0:L[`_${B}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,fe)=>{G?this.reject(G):this.resolve(fe),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,fe))}}}function Fe(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const fe=L||"demo-project",Q=B.iat||0,et=B.sub||B.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${fe}`,aud:fe,iat:Q,exp:Q+3600,auth_time:Q,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ze)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function U(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function pe(){var B;const L=null===(B=Ce())||void 0===B?void 0:B.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ve(){return"object"==typeof self&&self.self===self}function qe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function se(){const B=Pe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Me(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise((B,L)=>{try{let G=!0;const fe="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(fe);Q.onsuccess=()=>{Q.result.close(),G||self.indexedDB.deleteDatabase(fe),B(!0)},Q.onupgradeneeded=()=>{G=!1},Q.onerror=()=>{var et;L((null===(et=Q.error)||void 0===et?void 0:et.message)||"")}}catch(G){L(G)}})}function Je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rn extends Error{constructor(L,G,fe){super(G),this.code=L,this.customData=fe,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}}class Ct{constructor(L,G,fe){this.service=L,this.serviceName=G,this.errors=fe}create(L,...G){const fe=G[0]||{},Q=`${this.service}/${L}`,et=this.errors[L],Ze=et?function en(B,L){return B.replace(Xe,(G,fe)=>{const Q=L[fe];return null!=Q?String(Q):`<${fe}?>`})}(et,fe):"Error";return new rn(Q,`${this.serviceName}: ${Ze} (${Q}).`,fe)}}const Xe=/\{\$([^}]+)}/g;function gi(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function ws(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Yr(B,L){if(B===L)return!0;const G=Object.keys(B),fe=Object.keys(L);for(const Q of G){if(!fe.includes(Q))return!1;const et=B[Q],Ze=L[Q];if(mt(et)&&mt(Ze)){if(!Yr(et,Ze))return!1}else if(et!==Ze)return!1}for(const Q of fe)if(!G.includes(Q))return!1;return!0}function mt(B){return null!==B&&"object"==typeof B}function Si(B){const L=[];for(const[G,fe]of Object.entries(B))Array.isArray(fe)?fe.forEach(Q=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(fe));return L.length?"&"+L.join("&"):""}function Rn(B){const L={};return B.replace(/^\?/,"").split("&").forEach(fe=>{if(fe){const[Q,et]=fe.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(et)}}),L}function Sr(B){const L=B.indexOf("?");if(!L)return"";const G=B.indexOf("#",L);return B.substring(L,G>0?G:void 0)}function kt(B,L){const G=new yt(B,L);return G.subscribe.bind(G)}class yt{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(fe=>{this.error(fe)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,fe){let Q;if(void 0===L&&void 0===G&&void 0===fe)throw new Error("Missing Observer.");Q=function Ws(B,L){if("object"!=typeof B||null===B)return!1;for(const G of L)if(G in B&&"function"==typeof B[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:fe},void 0===Q.next&&(Q.next=wn),void 0===Q.error&&(Q.error=wn),void 0===Q.complete&&(Q.complete=wn);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),et}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(fe){typeof console<"u"&&console.error&&console.error(fe)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}const Fi=1e3,$e=2,ye=144e5,rt=.5;function It(B,L=Fi,G=$e){const fe=L*Math.pow(G,B),Q=Math.round(rt*fe*(Math.random()-.5)*2);return Math.min(ye,fe+Q)}function xr(B){return B&&B._delegate?B._delegate:B}},5468:(gt,Ie,k)=>{var c=k(4650);let K=null;function P(){return K}class te{}const ne=new c.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ce(){return(0,c.LFG)(j)}()},providedIn:"platform"}),n})();const ae=new c.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){$()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){$()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function q(){return new j((0,c.LFG)(ne))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let st=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Ce)},providedIn:"root"}),n})();const he=new c.OlP("appBaseHref");let Ce=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+ze(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+ze(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de),c.LFG(he,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ee=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+ze(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+ze(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de),c.LFG(he,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Fe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(we(Te(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function _e(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=ze,n.joinWithSlash=Be,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(c.LFG(st))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ve(){return new Ne((0,c.LFG)(st))}()},providedIn:"root"}),n})();function Te(n){return n.replace(/\/index.html$/,"")}const Ks=/\s+/,mi=[];let He=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this.initialClasses=mi,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ks):mi}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ks):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ks).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Vi{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Vi(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Ys(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Ys(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ys(n,e){n.context.$implicit=e.item}let dr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new _a,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){jt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){jt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class _a{constructor(){this.$implicit=null,this.ngIf=null}}function jt(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function qt(n,e){return new c.vHH(2100,!1)}class ts{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Nc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const _u=new Nc,Xs=new ts;let Xr=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return _u;if((0,c.F4k)(t))return Xs;throw qt()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Is=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw qt();return t.toLowerCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"lowercase",type:n,pure:!0,standalone:!0}),n})(),Lc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const yi="server";function wu(n){return n===yi}let no=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new wa((0,c.LFG)(ne),window)}),n})();class wa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ro(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Mo(this.window.history)||Mo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Mo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Fo extends te{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class io extends Fo{static makeCurrent(){!function ee(n){K||(K=n)}(new io)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ru(){return Ts=Ts||document.querySelector("base"),Ts?Ts.getAttribute("href"):null}();return null==t?null:function xa(n){wi=wi||document.createElement("a"),wi.setAttribute("href",n);const e=wi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ts=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function mu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let wi,Ts=null;const vd=new c.OlP("TRANSITION_ID"),wd=[{provide:c.ip1,useFactory:function wg(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[vd,ne,c.zs3],multi:!0}];let Cg=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ci=new c.OlP("EventManagerPlugins");let Xc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ci),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class lf{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let $i=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const s=this.usageCount;let u=s.get(t)??0;return u+=r,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Lo=(()=>{class n extends $i{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const s=this.doc.createElement("style");s.textContent=r,t.appendChild(s);const u=this.styleRef.get(r);u?u.push(s):this.styleRef.set(r,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const En={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ss=/%COMP%/g,Ma=new c.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function jo(n,e){return e.flat(100).map(t=>t.replace(Ss,n))}function oo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let As=(()=>{class n{constructor(t,r,s,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Ei(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,r);return s instanceof Ho?s.applyToHost(t):s instanceof Ms&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const d=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestory;switch(r.encapsulation){case c.ifc.Emulated:u=new Ho(d,m,r,this.appId,v);break;case c.ifc.ShadowDom:return new Ou(d,m,t,r);default:u=new Ms(d,m,r,v)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xc),c.LFG(Lo),c.LFG(c.AFp),c.LFG(Ma))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ei{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(En[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=En[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=En[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,oo(r)):this.eventManager.addEventListener(e,t,oo(r))}}function xs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ou extends Ei{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=jo(s.id,s.styles);for(const d of u){const m=document.createElement("style");m.textContent=d,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ms extends Ei{constructor(e,t,r,s,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=jo(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ho extends Ms{constructor(e,t,r,s,u){const d=s+"-"+r.id;super(e,t,r,u,d),this.contentAttr=function Bo(n){return"_ngcontent-%COMP%".replace(Ss,n)}(d),this.hostAttr=function tl(n){return"_nghost-%COMP%".replace(Ss,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let hf=(()=>{class n extends lf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Oa=["alt","control","meta","shift"],ff={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ss={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Cd=(()=>{class n extends lf{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),Oa.forEach(E=>{const T=r.indexOf(E);T>-1&&(r.splice(T,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=d,v}static matchEventFullKeyCode(t,r){let s=ff[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Oa.forEach(d=>{d!==s&&(0,ss[d])(t)&&(u+=d+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const zo=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function ku(){io.makeCurrent()},multi:!0},{provide:ne,useFactory:function nl(){return(0,c.RDi)(document),document},deps:[]}]),bd=new c.OlP(""),Dd=[{provide:c.rWj,useClass:class Jc{addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const m=function(v){d=d||v,u--,0==u&&r(d)};s.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Nu=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Pr(){return new c.qLn},deps:[]},{provide:Ci,useClass:hf,multi:!0,deps:[ne,c.R0b,c.Lbi]},{provide:Ci,useClass:Cd,multi:!0,deps:[ne]},{provide:As,useClass:As,deps:[Xc,Lo,c.AFp,Ma]},{provide:c.FYo,useExisting:As},{provide:$i,useExisting:Lo},{provide:Lo,useClass:Lo,deps:[ne]},{provide:Xc,useClass:Xc,deps:[Ci,c.R0b]},{provide:class Bc{},useClass:Cg,deps:[]},[]];let Rs=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:vd,useExisting:c.AFp},wd]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bd,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Nu,...Dd],imports:[Lc,c.hGG]}),n})(),Go=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Td(){return new Go((0,c.LFG)(ne))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var un=k(8505);const os=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var pr=k(4482),yn=k(5403);function Ii(n,e){return(0,pr.e)((t,r)=>{let s=0;t.subscribe((0,yn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var bi=k(515);function Zo(n){return n<=0?()=>bi.E:(0,pr.e)((e,t)=>{let r=0;e.subscribe((0,yn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Hi(n){return(0,pr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Vu(n=as){return(0,pr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function as(){return new os}var us=k(4671);function ai(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((s,u)=>n(s,u,r)):us.y,Zo(1),t?Hi(e):Vu(()=>new os))}var ft=k(4004),ho=k(4986),Di=k(9751),Jt=k(8996),b=k(7669);function D(...n){const e=(0,b.yG)(n);return(0,Jt.D)(n,e)}var x=k(2122),F=k(8189);function J(...n){return function Z(){return(0,F.J)(1)}()((0,Jt.D)(n,(0,b.yG)(n)))}function Se(...n){const e=(0,b.yG)(n);return(0,pr.e)((t,r)=>{(e?J(n,t,e):J(n,t)).subscribe(r)})}function Ye(){return(0,pr.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function lt(n,e){return(0,pr.e)(function ut(n,e,t,r,s){return(u,d)=>{let m=t,v=e,E=0;u.subscribe((0,yn.x)(d,T=>{const O=E++;v=m?n(v,T,O):(m=!0,T),r&&d.next(v)},s&&(()=>{m&&d.next(v),d.complete()})))}}(n,e,arguments.length>=2,!0))}function At(n,e){return n===e}var ct,ln=k(2011),Fa=(k(9800),k(3942)),ue=k(5861),wr=k(9681),Gn=k(4859),Cr=k(1877),Ot=k(2090),Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wo={},Dg=Dg||{},Pt=Sd||self;function Ad(){}function Uu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ol(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ko="closure_uid_"+(1e9*Math.random()>>>0),ww=0;function Cw(n,e,t){return n.call.apply(n.bind,arguments)}function Ew(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function ui(n,e,t){return(ui=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cw:Ew).apply(null,arguments)}function Ef(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[s].apply(r,d)}}function fo(){this.s=this.s,this.o=this.o}fo.prototype.s=!1,fo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function vw(n){Object.prototype.hasOwnProperty.call(n,Ko)&&n[Ko]||(n[Ko]=++ww)}(this)},fo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const al=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function xd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bf(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Uu(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let d=0;d<u;d++)n[s+d]=r[d]}else n.push(r)}}function An(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}An.prototype.h=function(){this.defaultPrevented=!0};var J_=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",Ad,e),Pt.removeEventListener("test",Ad,e)}catch{}return n}();function Md(n){return/^[\s\xa0]*$/.test(n)}var Df=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Rd(n,e){return n<e?-1:n>e?1:0}function Bu(){var n=Pt.navigator;return n&&(n=n.userAgent)?n:""}function Ns(n){return-1!=Bu().indexOf(n)}function Tf(n){return Tf[" "](n),n}Tf[" "]=Ad;var Er,n,Tg=Ns("Opera"),Yo=Ns("Trident")||Ns("MSIE"),Sg=Ns("Edge"),Nr=Sg||Yo,Od=Ns("Gecko")&&!(-1!=Bu().toLowerCase().indexOf("webkit")&&!Ns("Edge"))&&!(Ns("Trident")||Ns("MSIE"))&&!Ns("Edge"),Pd=-1!=Bu().toLowerCase().indexOf("webkit")&&!Ns("Edge");function kd(){var n=Pt.document;return n?n.documentMode:void 0}e:{var po="",ul=(n=Bu(),Od?/rv:([^\);]+)(\)|;)/.exec(n):Sg?/Edge\/([\d\.]+)/.exec(n):Yo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Pd?/WebKit\/(\S+)/.exec(n):Tg?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ul&&(po=ul?ul[1]:""),Yo){var La=kd();if(null!=La&&La>parseFloat(po)){Er=String(La);break e}}Er=po}var Ag={};var X_=Pt.document&&Yo&&(kd()||parseInt(Er,10))||void 0;function ju(n,e){if(An.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Od){e:{try{Tf(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ey[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ju.X.h.call(this)}}kr(ju,An);var ey={2:"touch",3:"pen",4:"mouse"};ju.prototype.h=function(){ju.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $u="closure_listenable_"+(1e6*Math.random()|0),Rf=0;function xg(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++Rf,this.ba=this.ea=!1}function Fs(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Va(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mg(n){const e={};for(const t in n)e[t]=n[t];return e}const Nd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fd(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Nd.length;u++)t=Nd[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qo(n){this.src=n,this.g={},this.h=0}function Ld(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=al(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Fs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Jo(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}Qo.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Jo(n,e,r,s);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new xg(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var Ua="closure_lm_"+(1e6*Math.random()|0),Vd={};function Rg(n,e,t,r,s){if(r&&r.once)return Og(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Rg(n,e[u],t,r,s);return null}return t=Ud(t),n&&n[$u]?n.N(e,t,ol(r)?!!r.capture:!!r,s):Hu(n,e,t,!1,r,s)}function Hu(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=ol(s)?!!s.capture:!!s,m=zu(n);if(m||(n[Ua]=m=new Qo(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function ty(){const e=Ng;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)J_||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(kg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Og(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Og(n,e[u],t,r,s);return null}return t=Ud(t),n&&n[$u]?n.O(e,t,ol(r)?!!r.capture:!!r,s):Hu(n,e,t,!0,r,s)}function Pg(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Pg(n,e[u],t,r,s);else r=ol(r)?!!r.capture:!!r,t=Ud(t),n&&n[$u]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Jo(u=n.g[e],t,r,s))&&(Fs(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=zu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Jo(e,t,r,s)),(t=-1<n?e[n]:null)&&Of(t))}function Of(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[$u])Ld(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(kg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zu(e))?(Ld(t,n),0==t.h&&(t.src=null,e[Ua]=null)):Fs(n)}}}function kg(n){return n in Vd?Vd[n]:Vd[n]="on"+n}function Ng(n,e){if(n.ba)n=!0;else{e=new ju(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Of(n),n=t.call(r,e)}return n}function zu(n){return(n=n[Ua])instanceof Qo?n:null}var cl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ud(n){return"function"==typeof n?n:(n[cl]||(n[cl]=function(e){return n.handleEvent(e)}),n[cl])}function qn(){fo.call(this),this.i=new Qo(this),this.P=this,this.I=null}function mr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new An(e,n);else if(e instanceof An)e.target=e.target||n;else{var s=e;Fd(e=new An(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=Bd(d,r,!0,e)&&s}if(s=Bd(d=e.g=n,r,!0,e)&&s,s=Bd(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Bd(d=e.g=t[u],r,!1,e)&&s}function Bd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,v=d.ha||d.src;d.ea&&Ld(n.i,d),s=!1!==m.call(v,r)&&s}}return s&&!r.defaultPrevented}kr(qn,fo),qn.prototype[$u]=!0,qn.prototype.removeEventListener=function(n,e,t,r){Pg(this,n,e,t,r)},qn.prototype.M=function(){if(qn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Fs(t[r]);delete n.g[e],n.h--}}this.I=null},qn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},qn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var jd=Pt.JSON.stringify;function ll(){var n=ja;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gu,Pf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Fg,n=>n.reset());class Fg{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lg(n){Pt.setTimeout(()=>{throw n},0)}function ny(n,e){Gu||function ry(){var n=Pt.Promise.resolve(void 0);Gu=function(){n.then(Vg)}}(),$d||(Gu(),$d=!0),ja.add(n,e)}var $d=!1,ja=new class Ba{constructor(){this.h=this.g=null}add(e,t){const r=Pf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Vg(){for(var n;n=ll();){try{n.h.call(n.g)}catch(t){Lg(t)}var e=Pf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}$d=!1}function $a(n,e){qn.call(this),this.h=n||1,this.g=e||Pt,this.j=ui(this.lb,this),this.l=Date.now()}function Hd(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function qu(n,e,t){if("function"==typeof n)t&&(n=ui(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ui(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function dl(n){n.g=qu(()=>{n.g=null,n.i&&(n.i=!1,dl(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kr($a,qn),(ct=$a.prototype).ca=!1,ct.R=null,ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),mr(this,"tick"),this.ca&&(Hd(this),this.start()))}},ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){$a.X.M.call(this),Hd(this),delete this.g};class Ug extends fo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dl(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xo(n){fo.call(this),this.h=n,this.g={}}kr(Xo,fo);var Zu=[];function Wu(n,e,t,r){Array.isArray(t)||(t&&(Zu[0]=t.toString()),t=Zu);for(var s=0;s<t.length;s++){var u=Rg(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ha(n){Va(n.g,function(e,t){this.g.hasOwnProperty(t)&&Of(e)},n),n.g={}}function zd(){this.g=!0}function Ir(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kf(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return jd(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Xo.prototype.M=function(){Xo.X.M.call(this),Ha(this)},Xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zd.prototype.Aa=function(){this.g=!1},zd.prototype.info=function(){};var ea={},za=null;function ta(){return za=za||new qn}function Ga(n){An.call(this,ea.Pa,n)}function Ku(n){const e=ta();mr(e,new Ga(e))}function Bg(n,e){An.call(this,ea.STAT_EVENT,n),this.stat=e}function nr(n){const e=ta();mr(e,new Bg(e,n))}function Nf(n,e){An.call(this,ea.Qa,n),this.size=e}function qa(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}ea.Pa="serverreachability",kr(Ga,An),ea.STAT_EVENT="statevent",kr(Bg,An),ea.Qa="timingevent",kr(Nf,An);var qd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ff={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Za(){}function fl(){}Za.prototype.h=null;var Wa,na={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zd(){An.call(this,"d")}function zi(){An.call(this,"c")}function pl(){}function Yu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Xo(this),this.O=Lf,this.T=new $a(n=Nr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new jg}function jg(){this.i=null,this.g="",this.h=!1}kr(Zd,An),kr(zi,An),kr(pl,Za),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},Wa=new pl;var Lf=45e3,Ls={},ra={};function Vf(n,e,t){n.K=1,n.v=Kd(go(e)),n.s=t,n.P=!0,sy(n,null)}function sy(n,e){n.F=Date.now(),w(n),n.A=go(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Dw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new jg,n.g=jw(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Ug(ui(n.La,n,n.g),n.N)),Wu(n.S,n.g,"readystatechange",n.ib),e=n.H?Mg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ku(),function Gd(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),v=0;v<m.length;v++){var E=m[v].split("=");if(1<E.length){var T=E[0];E=E[1];var O=T.split("_");d=2<=O.length&&"type"==O[1]?d+(T+"=")+E+"&":d+(T+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function _(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function f(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=p(n,t),s==ra){4==e&&(n.o=4,nr(14),r=!1),Ir(n.j,n.m,null,"[Incomplete Response]");break}if(s==Ls){n.o=4,nr(15),Ir(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ir(n.j,n.m,s,null),Ue(n,s)}_(n)&&s!=ra&&s!=Ls&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,nr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),gy(e),e.K=!0,nr(11))):(Ir(n.j,n.m,t,"[Invalid Chunked Response]"),oe(n),z(n))}function p(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ra:(t=Number(e.substring(t,r)),isNaN(t)?Ls:(r+=1)+t>e.length?ra:(e=e.substr(r,t),n.C=r+t,e))}function w(n){n.V=Date.now()+n.O,S(n,n.O)}function S(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qa(ui(n.gb,n),e)}function R(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function z(n){0==n.l.G||n.I||wl(n.l,n)}function oe(n){R(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Hd(n.T),Ha(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ue(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Gg(t.h,n)))if(!n.J&&Gg(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Xg(t),Qg(t)}Uw(t),nr(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=qa(ui(t.cb,t),6e3));if(1>=xw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Cl(t,11)}else if((n.J||t.g==n)&&Xg(t),!Md(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let E=s[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const T=E[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const O=E[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const V=E[5];null!=V&&"number"==typeof V&&0<V&&(t.J=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const ie=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.h;u.g||-1==ie.indexOf("spdy")&&-1==ie.indexOf("quic")&&-1==ie.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Mw(u,u.h),u.h=null))}if(r.D){const Ae=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(r.za=Ae,fn(r.F,r.D,Ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=Bw(r,r.H?r.ka:null,r.V),d.J){gb(r.h,d);var m=d,v=r.J;v&&m.setTimeout(v),m.B&&(R(m),w(m)),r.g=d}else py(r);0<t.i.length&&Jg(t)}else"stop"!=E[0]&&"close"!=E[0]||Cl(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Cl(t,7):Qu(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}Ku()}catch{}}function dt(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Uu(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function pt(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Uu(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function nt(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Uu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ct=Yu.prototype).setTimeout=function(n){this.O=n},ct.ib=function(n){n=n.target;const e=this.L;e&&3==Mi(n)?e.l():this.La(n)},ct.La=function(n){try{if(n==this.g)e:{const T=Mi(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||Nr||this.g&&(this.h.h||this.g.fa()||ly(this.g)))){this.I||4!=T||7==e||Ku(),R(this);var t=this.g.aa();this.Y=t;t:if(_(this)){var r=ly(this.g);n="";var s=r.length,u=4==Mi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){oe(this),z(this);var d="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function iy(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Md(m)){var E=m;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,nr(12),oe(this),z(this);break e}Ir(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ue(this,t)}this.P?(f(this,T,d),Nr&&this.i&&3==T&&(Wu(this.S,this.T,"tick",this.hb),this.T.start())):(Ir(this.j,this.m,d,null),Ue(this,d)),4==T&&oe(this),this.i&&!this.I&&(4==T?wl(this.l,this):(this.i=!1,w(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,nr(12)):(this.o=0,nr(13)),oe(this),z(this)}}}catch{}},ct.hb=function(){if(this.g){var n=Mi(this.g),e=this.g.fa();this.C<e.length&&(R(this),f(this,n,e),this.i&&4!=n&&w(this))}},ct.cancel=function(){this.I=!0,oe(this)},ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function hl(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ku(),nr(17)),oe(this),this.o=2,z(this)):S(this,this.V-n)};var rr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cs(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof cs){this.h=void 0!==e?e:n.h,gl(this,n.j),this.s=n.s,this.g=n.g,Wd(this,n.m),this.l=n.l,e=n.i;var t=new Bf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ml(this,t),this.o=n.o}else n&&(t=String(n).match(rr))?(this.h=!!e,gl(this,t[1]||"",!0),this.s=_l(t[2]||""),this.g=_l(t[3]||"",!0),Wd(this,t[4]),this.l=_l(t[5]||"",!0),ml(this,t[6]||"",!0),this.o=_l(t[7]||"")):(this.h=!!e,this.i=new Bf(null,this.h))}function go(n){return new cs(n)}function gl(n,e,t){n.j=t?_l(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ml(n,e,t){e instanceof Bf?(n.i=e,function ay(n,e){e&&!n.j&&(sa(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(bw(this,r),Dw(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ia(e,Iw)),n.i=new Bf(e,n.h))}function fn(n,e,t){n.i.set(e,t)}function Kd(n){return fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _l(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ia(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,$g),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function $g(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ia(e,Hg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ia(e,Hg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ia(t,"/"==t.charAt(0)?oy:Uf,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ia(t,zg)),n.join("")};var Hg=/[#\/\?@]/g,Uf=/[#\?:]/g,oy=/[#\?]/g,Iw=/[#\?@]/g,zg=/#/g;function Bf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function sa(n){n.g||(n.g=new Map,n.h=0,n.i&&function Gi(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bw(n,e){sa(n),e=Yd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function _r(n,e){return sa(n),e=Yd(n,e),n.g.has(e)}function Dw(n,e,t){bw(n,e),0<t.length&&(n.i=null,n.g.set(Yd(n,e),xd(t)),n.h+=t.length)}function Yd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Sw(n){this.l=n||pb,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ga&&Pt.g.Ga()&&Pt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=Bf.prototype).add=function(n,e){sa(this),this.i=null,n=Yd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){sa(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ct.oa=function(){sa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ct.W=function(n){sa(this);let e=[];if("string"==typeof n)_r(this,n)&&(e=e.concat(this.g.get(Yd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ct.set=function(n,e){return sa(this),this.i=null,_r(this,n=Yd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var s=u;""!==d[r]&&(s+="="+encodeURIComponent(String(d[r]))),n.push(s)}}return this.i=n.join("&")};var pb=10;function Aw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xw(n){return n.h?1:n.g?n.g.size:0}function Gg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mw(n,e){n.g?n.g.add(e):n.h=e}function gb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Qd(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return xd(n.i)}function jf(){}function Rw(){this.g=new jf}function Ow(n,e,t){const r=t||"";try{dt(n,function(s,u){let d=s;ol(s)&&(d=jd(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function uy(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function $f(n){this.l=n.ac||null,this.j=n.jb||!1}function Hf(n,e){qn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=qg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sw.prototype.cancel=function(){if(this.i=Qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jf.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},jf.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},kr($f,Za),$f.prototype.g=function(){return new Hf(this.l,this.j)},$f.prototype.i=function(n){return function(){return n}}({}),kr(Hf,qn);var qg=0;function Zg(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Wg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yl(n)}function yl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=Hf.prototype).open=function(n,e){if(this.readyState!=qg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yl(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wg(this)),this.readyState=qg},ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yl(this)),this.g&&(this.readyState=3,yl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zg(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wg(this):yl(this),3==this.readyState&&Zg(this)}},ct.Va=function(n){this.g&&(this.response=this.responseText=n,Wg(this))},ct.Ua=function(n){this.g&&(this.response=n,Wg(this))},ct.ga=function(){this.g&&Wg(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Hf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mb=Pt.JSON.parse;function Zn(n){qn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cy,this.K=this.L=!1}kr(Zn,qn);var cy="",kw=/^https?$/i,vl=["POST","PUT"];function Kg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zf(n),Jd(n)}function zf(n){n.D||(n.D=!0,mr(n,"complete"),mr(n,"error"))}function Nw(n){if(n.h&&typeof Dg<"u"&&(!n.C[1]||4!=Mi(n)||2!=n.aa()))if(n.v&&4==Mi(n))qu(n.Ha,0,n);else if(mr(n,"readystatechange"),4==Mi(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(rr)[1]||null;if(!s&&Pt.self&&Pt.self.location){var u=Pt.self.location.protocol;s=u.substr(0,u.length-1)}r=!kw.test(s?s.toLowerCase():"")}t=r}if(t)mr(n,"complete"),mr(n,"success");else{n.m=6;try{var d=2<Mi(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",zf(n)}}finally{Jd(n)}}}function Jd(n,e){if(n.g){Gf(n);const t=n.g,r=n.C[0]?Ad:null;n.g=null,n.C=null,e||mr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Gf(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function Mi(n){return n.g?n.g.readyState:0}function ly(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case cy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Yg(n){let e="";return Va(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function dy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Yg(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fn(n,e,t))}function qf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hy(n){this.Ca=0,this.i=[],this.j=new zd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=qf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=qf("baseRetryDelayMs",5e3,n),this.bb=qf("retryDelaySeedMs",1e4,n),this.$a=qf("forwardChannelMaxRetries",2,n),this.ta=qf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Sw(n&&n.concurrentRequestLimit),this.Fa=new Rw,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Qu(n){if(Fw(n),3==n.G){var e=n.U++,t=go(n.F);fn(t,"SID",n.I),fn(t,"RID",e),fn(t,"TYPE","terminate"),Xd(n,t),(e=new Yu(n,n.j,e,void 0)).K=2,e.v=Kd(go(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=jw(e.l,null),e.g.da(e.v)),e.F=Date.now(),w(e)}my(n)}function Qg(n){n.g&&(gy(n),n.g.cancel(),n.g=null)}function Fw(n){Qg(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),Xg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function Jg(n){Aw(n.h)||n.m||(n.m=!0,ny(n.Ja,n),n.C=0)}function Lw(n,e){var t;t=e?e.m:n.U++;const r=go(n.F);fn(r,"SID",n.I),fn(r,"RID",t),fn(r,"AID",n.T),Xd(n,r),n.o&&n.s&&dy(r,n.o,n.s),t=new Yu(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Vw(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Mw(n.h,t),Vf(t,r,e)}function Xd(n,e){n.ia&&Va(n.ia,function(t,r){fn(e,r,t)}),n.l&&dt({},function(t,r){fn(e,r,t)})}function Vw(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ui(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let E=s[v].h;const T=s[v].g;if(E-=u,0>E)u=Math.max(0,s[v].h-100),m=!1;else try{Ow(T,d,"req"+E+"_")}catch{r&&r(T)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function py(n){n.g||n.u||(n.Z=1,ny(n.Ia,n),n.A=0)}function Uw(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=qa(ui(n.Ia,n),th(n,n.A)),n.A++,0))}function gy(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function eh(n){n.g=new Yu(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=go(n.sa);fn(e,"RID","rpc"),fn(e,"SID",n.I),fn(e,"CI",n.L?"0":"1"),fn(e,"AID",n.T),fn(e,"TYPE","xmlhttp"),Xd(n,e),n.o&&n.s&&dy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Kd(go(e)),t.s=null,t.P=!0,sy(t,n)}function Xg(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function wl(n,e){var t=null;if(n.g==e){Xg(n),gy(n),n.g=null;var r=2}else{if(!Gg(n.h,e))return;t=e.D,gb(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;mr(r=ta(),new Nf(r,t)),Jg(n)}else py(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function fy(n,e){return!(xw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=qa(ui(n.Ja,n,e),th(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uw(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Cl(n,5);break;case 4:Cl(n,10);break;case 3:Cl(n,6);break;default:Cl(n,2)}}function th(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Cl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ui(n.kb,n);t||(t=new cs("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||gl(t,"https"),Kd(t)),function Pw(n,e){const t=new zd;if(Pt.Image){const r=new Image;r.onload=Ef(uy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ef(uy,t,r,"TestLoadImage: error",!1,e),r.onabort=Ef(uy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ef(uy,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else nr(2);n.G=0,n.l&&n.l.va(e),my(n),Fw(n)}function my(n){if(n.G=0,n.la=[],n.l){const e=Qd(n.h);(0!=e.length||0!=n.i.length)&&(bf(n.la,e),bf(n.la,n.i),n.h.i.length=0,xd(n.i),n.i.length=0),n.l.ua()}}function Bw(n,e,t){var r=t instanceof cs?go(t):new cs(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Wd(r,r.m);else{var s=Pt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new cs(null,void 0);r&&gl(u,r),e&&(u.g=e),s&&Wd(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&fn(r,t,e),fn(r,"VER",n.ma),Xd(n,r),r}function jw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zn(t&&n.Da&&!n.ra?new $f({jb:!0}):n.ra)).Ka(n.H),e}function $w(){}function Zf(){if(Yo&&!(10<=Number(X_)))throw Error("Environmental error: no available transport.")}function qi(n,e){qn.call(this),this.g=new hy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Md(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Md(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new nh(this)}function em(n){Zd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tm(){zi.call(this),this.status=1}function nh(n){this.g=n}(ct=Zn.prototype).Ka=function(n){this.L=n},ct.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wa.g(),this.C=function Fr(n){return n.h||(n.h=n.i())}(this.u?this.u:Wa),this.g.onreadystatechange=ui(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Kg(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Pt.FormData&&n instanceof Pt.FormData,!(0<=al(vl,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gf(this),0<this.B&&((this.K=function _b(n){return Yo&&function Af(){return function Sf(n){var e=Ag;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Df(String(Er)).split("."),t=Df("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Rd(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Rd(0==s[2].length,0==u[2].length)||Rd(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ui(this.qa,this)):this.A=qu(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Kg(this,u)}},ct.qa=function(){typeof Dg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mr(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mr(this,"complete"),mr(this,"abort"),Jd(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jd(this,!0)),Zn.X.M.call(this)},ct.Ha=function(){this.s||(this.F||this.v||this.l?Nw(this):this.fb())},ct.fb=function(){Nw(this)},ct.aa=function(){try{return 2<Mi(this)?this.g.status:-1}catch{return-1}},ct.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),mb(e)}},ct.Ea=function(){return this.m},ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=hy.prototype).ma=8,ct.G=1,ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Yu(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Mg(u),Fd(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Vw(this,s,e),fn(t=go(this.F),"RID",n),fn(t,"CVER",22),this.D&&fn(t,"X-HTTP-Session-Id",this.D),Xd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Yg(u)))+"&"+e:this.o&&dy(t,this.o,u)),Mw(this.h,s),this.Ya&&fn(t,"TYPE","init"),this.O?(fn(t,"$req",e),fn(t,"SID","null"),s.Z=!0,Vf(s,t,null)):Vf(s,t,e),this.G=2}}else 3==this.G&&(n?Lw(this,n):0==this.i.length||Aw(this.h)||Lw(this))},ct.Ia=function(){if(this.u=null,eh(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=qa(ui(this.eb,this),n)}},ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,nr(10),Qg(this),eh(this))},ct.cb=function(){null!=this.v&&(this.v=null,Qg(this),Uw(this),nr(19))},ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),nr(2)):(this.j.info("Failed to ping google.com"),nr(1))},(ct=$w.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Ra=function(){},Zf.prototype.g=function(n,e){return new qi(n,e)},kr(qi,qn),qi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;nr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Bw(n,null,n.V),Jg(n)},qi.prototype.close=function(){Qu(this.g)},qi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=jd(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Jg(e)},qi.prototype.M=function(){this.g.l=null,delete this.j,Qu(this.g),delete this.g,qi.X.M.call(this)},kr(em,Zd),kr(tm,zi),kr(nh,$w),nh.prototype.xa=function(){mr(this.g,"a")},nh.prototype.wa=function(n){mr(this.g,new em(n))},nh.prototype.va=function(n){mr(this.g,new tm)},nh.prototype.ua=function(){mr(this.g,"b")},Zf.prototype.createWebChannel=Zf.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,qd.NO_ERROR=0,qd.TIMEOUT=8,qd.HTTP_ERROR=6,Ff.COMPLETE="complete",fl.EventType=na,na.OPEN="a",na.CLOSE="b",na.ERROR="c",na.MESSAGE="d",qn.prototype.listen=qn.prototype.N,Zn.prototype.listenOnce=Zn.prototype.O,Zn.prototype.getLastError=Zn.prototype.Oa,Zn.prototype.getLastErrorCode=Zn.prototype.Ea,Zn.prototype.getStatus=Zn.prototype.aa,Zn.prototype.getResponseJson=Zn.prototype.Sa,Zn.prototype.getResponseText=Zn.prototype.fa,Zn.prototype.send=Zn.prototype.da,Zn.prototype.setWithCredentials=Zn.prototype.Ka;var _y=Wo.createWebChannelTransport=function(){return new Zf},Wf=Wo.getStatEventTarget=function(){return ta()},yy=Wo.ErrorCode=qd,yb=Wo.EventType=Ff,vb=Wo.Event=ea,Hw=Wo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},wb=Wo.FetchXmlHttpFactory=$f,nm=Wo.WebChannel=fl,Cb=Wo.XhrIo=Zn;const El="@firebase/firestore";class kn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");let rh="9.19.0";const Ju=new Cr.Yd("@firebase/firestore");function zw(){return Ju.logLevel}function Oe(n,...e){if(Ju.logLevel<=Cr.in.DEBUG){const t=e.map(rm);Ju.debug(`Firestore (${rh}): ${n}`,...t)}}function br(n,...e){if(Ju.logLevel<=Cr.in.ERROR){const t=e.map(rm);Ju.error(`Firestore (${rh}): ${n}`,...t)}}function mo(n,...e){if(Ju.logLevel<=Cr.in.WARN){const t=e.map(rm);Ju.warn(`Firestore (${rh}): ${n}`,...t)}}function rm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${rh}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function _t(n,e){n||it()}function Qe(n,e){return n}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ib{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kn.UNAUTHENTICATED))}shutdown(){}}class bb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Db{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let d=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Dr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const E=d;e.enqueueRetryable((0,ue.Z)(function*(){yield E.promise,yield u(r.currentUser)}))},v=E=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(E=>v(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Dr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t("string"==typeof r.accessToken),new Gw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(null===e||"string"==typeof e),new kn(e)}}class qw{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Tb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sb{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.T;return this.T=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t("string"==typeof t.token),this.T=t.token,new Zw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ww(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vy{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Ww(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function ih(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Kw(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Bn(0,0))}static max(){return new vt(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sh{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===sh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends sh{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const Ab=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends sh{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return Ab.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new De(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new De(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new De(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===m?(d=!d,s++):"."!==m||d?(r+=m,s++):(u(),s++)}if(u(),d)throw new De(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(sn.fromString(e))}static fromName(e){return new Ge(sn.fromString(e).popFirst(5))}static empty(){return new Ge(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new sn(e.slice()))}}class Kf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Ka(n){return n.fields.find(e=>2===e.kind)}function Il(n){return n.fields.filter(e=>2!==e.kind)}Kf.UNKNOWN_ID=-1;class oh{constructor(e,t){this.fieldPath=e,this.kind=t}}class im{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new im(0,ls.min())}}function Mb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=vt.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new ls(s,Ge.empty(),e)}function Rb(n){return new ls(n.readTime,n.key,-1)}class ls{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ls(vt.min(),Ge.empty(),-1)}static max(){return new ls(vt.max(),Ge.empty(),-1)}}function sm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const Ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ds(n){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,ue.Z)(function*(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==Ob)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Cy.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let s=0,u=0,d=!1;e.forEach(m=>{++s,m.next(()=>{++u,d&&u===s&&t()},v=>r(v))}),d=!0,u===s&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(s=>s?re.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,s)=>{const u=e.length,d=new Array(u);let m=0;for(let v=0;v<u;v++){const E=v;t(e[E]).next(T=>{d[E]=T,++m,m===u&&r(d)},T=>s(T))}})}static doWhile(e,t){return new re((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class bl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Dr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Yf(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const s=om(r.target.error);this.R.reject(new Yf(e,s))}}static open(e,t,r,s){try{return new bl(t,e.transaction(s,r))}catch(u){throw new Yf(t,u)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pb(t)}}class _o{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===_o.S((0,Ot.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Dl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ot.hl)())return!1;if(_o.C())return!0;const e=(0,Ot.z$)(),t=_o.S(e),r=0<t&&t<10,s=_o.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ue.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new Yf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;s("VersionError"===m.name?new De(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new De(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Yf(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.V.M(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ue.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const v=bl.open(u.db,e,d?"readonly":"readwrite",r),E=s(v).next(T=>(v.P(),T)).catch(T=>(v.abort(T),re.reject(T))).toPromise();return E.catch(()=>{}),yield v.v,E}catch(v){const E=v,T="FirebaseError"!==E.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",T),u.close(),!T)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qw{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Dl(this.L.delete())}}class Yf extends De{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xu(n){return"IndexedDbTransactionError"===n.name}class Pb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Dl(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Dl(this.store.add(e))}get(e){return Dl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Dl(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Dl(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(d,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new re((u,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}J(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}X(e){const t=this.cursor({});return new re((r,s)=>{t.onerror=u=>{const d=om(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}W(e,t){const r=[];return new re((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void s();const v=new Qw(m),E=t(m.primaryKey,m.value,v);if(E instanceof re){const T=E.catch(O=>(v.done(),re.reject(O)));r.push(T)}v.isDone?s():null===v.K?m.continue():m.continue(v.K)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Dl(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=om(r.target.error);t(s)}})}let Jw=!1;function om(n){const e=_o.S((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jw||(Jw=!0,setTimeout(()=>{throw r},0)),r}}return n}class kb{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Xu(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ds(r)}yield t.et(6e4)}))}}class Xw{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return re.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Oe("IndexBackiller",`Processing collection: ${d}`),this.it(e,d,s).next(m=>{s-=m,r.add(d)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.rt(s,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const d=Rb(u);sm(d,r)>0&&(r=d)}),new ls(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Tl(n){return null==n}function am(n){return 0===n&&1/n==-1/0}function um(n){return"number"==typeof n&&Number.isInteger(n)&&!am(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sl(e)),e=aA(n.get(t),e);return Sl(e)}function aA(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Sl(n){return n+"\x01\x01"}function yo(n){const e=n.length;if(_t(e>=2),2===e)return _t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&it(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let v;0===s.length?v=m:(s+=m,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:it()}u=d+2}return new sn(r)}const eC=["userId","batchId"];function Qf(n,e){return[n,Ri(e)]}function tC(n,e,t){return[n,Ri(e),t]}const Nb={},cm=["prefixPath","collectionGroup","readTime","documentId"],ah=["prefixPath","collectionGroup","documentId"],Ey=["collectionGroup","readTime","prefixPath","documentId"],Jf=["canonicalId","targetId"],Iy=["targetId","path"],lm=["path","targetId"],nC=["collectionId","parent"],by=["indexId","uid"],Dy=["uid","sequenceNumber"],Ty=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rC=["indexId","uid","orderedDocumentKey"],Sy=["userId","collectionPath","documentId"],Fb=["userId","collectionPath","largestBatchId"],Lb=["userId","collectionGroup","largestBatchId"],Ay=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vb=[...Ay,"documentOverlays"],xy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],My=xy,Ub=[...My,"indexConfiguration","indexState","indexEntries"];class Ry extends Yw{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function pn(n,e){const t=Qe(n);return _o.O(t.at,e)}function iC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Al(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Wn{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xf(this.root,e,this.comparator,!0)}}class Xf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??ci.RED,this.left=s??ci.EMPTY,this.right=u??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new ci(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return ci.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,s){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sC(this.data.getIterator())}getIteratorFrom(e){return new sC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class sC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xl(n){return n.hasNext()?n.getNext():void 0}class Wi{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new Wi([])}unionWith(e){let t=new In(yr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jb("Invalid base64 string: "+s):s}}(e);return new Lr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const $b=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ec(n){if(_t(!!n),"string"==typeof n){let e=0;const t=$b.exec(n);if(_t(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ml(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function Vs(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dm(n){const e=n.mapValue.fields.__previous_value__;return Vs(e)?dm(e):e}function ep(n){const e=ec(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class Hb{constructor(e,t,r,s,u,d,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class Ya{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ya("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ya&&e.projectId===this.projectId&&e.database===this.database}}const tc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hm={nullValue:"NULL_VALUE"};function Rl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vs(n)?4:pm(n)?9007199254740991:10:it()}function Us(n,e){if(n===e)return!0;const t=Rl(n);if(t!==Rl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ep(n).isEqual(ep(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ec(r.timestampValue),d=ec(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ml(n.bytesValue).isEqual(Ml(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ar(r.geoPointValue.latitude)===ar(s.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ar(r.integerValue)===ar(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=ar(r.doubleValue),d=ar(s.doubleValue);return u===d?am(u)===am(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ih(n.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(iC(u)!==iC(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Us(u[m],d[m])))return!1;return!0}(n,e);default:return it()}var s}function tp(n,e){return void 0!==(n.values||[]).find(t=>Us(t,e))}function nc(n,e){if(n===e)return 0;const t=Rl(n),r=Rl(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=ar(s.integerValue||s.doubleValue),m=ar(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return np(n.timestampValue,e.timestampValue);case 4:return np(ep(n),ep(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=Ml(s),m=Ml(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),m=u.split("/");for(let v=0;v<d.length&&v<m.length;v++){const E=Lt(d[v],m[v]);if(0!==E)return E}return Lt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Lt(ar(s.latitude),ar(u.latitude));return 0!==d?d:Lt(ar(s.longitude),ar(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],m=u.values||[];for(let v=0;v<d.length&&v<m.length;++v){const E=nc(d[v],m[v]);if(E)return E}return Lt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===tc.mapValue&&u===tc.mapValue)return 0;if(s===tc.mapValue)return 1;if(u===tc.mapValue)return-1;const d=s.fields||{},m=Object.keys(d),v=u.fields||{},E=Object.keys(v);m.sort(),E.sort();for(let T=0;T<m.length&&T<E.length;++T){const O=Lt(m[T],E[T]);if(0!==O)return O;const V=nc(d[m[T]],v[E[T]]);if(0!==V)return V}return Lt(m.length,E.length)}(n.mapValue,e.mapValue);default:throw it()}}function np(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=ec(n),r=ec(e),s=Lt(t.seconds,r.seconds);return 0!==s?s:Lt(t.nanos,r.nanos)}function Qa(n){return uh(n)}function uh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ec(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ml(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=uh(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of s)d?d=!1:u+=",",u+=`${m}:${uh(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function ch(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rp(n){return!!n&&"integerValue"in n}function fm(n){return!!n&&"arrayValue"in n}function Py(n){return!!n&&"nullValue"in n}function ky(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ip(n){return!!n&&"mapValue"in n}function lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Al(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ja(n){return"nullValue"in n?hm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ch(Ya.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function gm(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ch(Ya.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tc:it()}function sp(n,e){const t=nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function dh(n,e){const t=nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ip(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=yr.emptyPath(),r={},s=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=m.popLast()}d?r[m.lastSegment()]=lh(d):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ip(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Al(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new zr(lh(this.value))}}function Ny(n){const e=[];return Al(n.fields,(t,r)=>{const s=new yr([t]);if(ip(r)){const u=Ny(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new Wi(e)}class Nn{constructor(e,t,r,s,u,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Nn(e,0,vt.min(),vt.min(),vt.min(),zr.empty(),0)}static newFoundDocument(e,t,r,s){return new Nn(e,1,t,vt.min(),r,s,0)}static newNoDocument(e,t){return new Nn(e,2,t,vt.min(),vt.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,vt.min(),vt.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rc{constructor(e,t){this.position=e,this.inclusive=t}}function oC(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):nc(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function hh(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Us(n.position[t],e.position[t]))return!1;return!0}class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function uA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class aC{}class tn extends aC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new zb(e,t,r):"array-contains"===t?new Zb(e,r):"in"===t?new dC(e,r):"not-in"===t?new Wb(e,r):"array-contains-any"===t?new hC(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Gb(e,r):new qb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nc(t,this.value)):null!==t&&Rl(this.value)===Rl(t)&&this.matchesComparison(nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vn extends aC{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new vn(e,t)}matches(e){return ph(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ph(n){return"and"===n.op}function Fy(n){return"or"===n.op}function Ly(n){return uC(n)&&ph(n)}function uC(n){for(const e of n.filters)if(e instanceof vn)return!1;return!0}function mm(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Qa(n.value);if(Ly(n))return n.filters.map(e=>mm(e)).join(",");{const e=n.filters.map(t=>mm(t)).join(",");return`${n.op}(${e})`}}function _m(n,e){return n instanceof tn?(t=n,(r=e)instanceof tn&&t.op===r.op&&t.field.isEqual(r.field)&&Us(t.value,r.value)):n instanceof vn?function(t,r){return r instanceof vn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,d)=>s&&_m(u,r.filters[d]),!0)}(n,e):void it();var t,r}function cC(n,e){const t=n.filters.concat(e);return vn.create(t,n.op)}function ym(n){return n instanceof tn?`${(e=n).field.canonicalString()} ${e.op} ${Qa(e.value)}`:n instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(ym).join(" ,")+"}"}(n):"Filter";var e}class zb extends tn{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class Gb extends tn{constructor(e,t){super(e,"in",t),this.keys=lC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qb extends tn{constructor(e,t){super(e,"not-in",t),this.keys=lC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class Zb extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fm(t)&&tp(t.arrayValue,this.value)}}class dC extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tp(this.value.arrayValue,t)}}class Wb extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tp(this.value.arrayValue,t)}}class hC extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tp(this.value.arrayValue,r))}}class fC{constructor(e,t=null,r=[],s=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=m,this.ft=null}}function Vy(n,e=null,t=[],r=[],s=null,u=null,d=null){return new fC(n,e,t,r,s,u,d)}function gh(n){const e=Qe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Tl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qa(r)).join(",")),e.ft=t}return e.ft}function mh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_m(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hh(n.startAt,e.startAt)&&hh(n.endAt,e.endAt)}function Uy(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ol(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function pC(n,e,t){let r=hm,s=!0;for(const u of Ol(n,e)){let d=hm,m=!0;switch(u.op){case"<":case"<=":d=Ja(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=hm}sp({value:r,inclusive:s},{value:d,inclusive:m})<0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];sp({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function gC(n,e,t){let r=tc,s=!0;for(const u of Ol(n,e)){let d=tc,m=!0;switch(u.op){case">=":case">":d=gm(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=tc}dh({value:r,inclusive:s},{value:d,inclusive:m})>0&&(r=d,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];dh({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class vo{constructor(e,t=null,r=[],s=[],u=null,d="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=v,this.dt=null,this.wt=null}}function mC(n,e,t,r,s,u,d,m){return new vo(n,e,t,r,s,u,d,m)}function Oi(n){return new vo(n)}function _h(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Gr(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function oa(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function yh(n){return null!==n.collectionGroup}function qr(n){const e=Qe(n);if(null===e.dt){e.dt=[];const t=oa(e),r=Gr(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new fh(t)),e.dt.push(new fh(yr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new fh(yr.keyField(),u))}}}return e.dt}function li(n){const e=Qe(n);if(!e.wt)if("F"===e.limitType)e.wt=Vy(e.path,e.collectionGroup,qr(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of qr(e))t.push(new fh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new rc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new rc(e.startAt.position,e.startAt.inclusive):null;e.wt=Vy(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function ic(n,e){e.getFirstInequalityField(),oa(n);const t=n.filters.concat([e]);return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xa(n,e,t){return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function aa(n,e){return mh(li(n),li(e))&&n.limitType===e.limitType}function Pl(n){return`${gh(li(n))}|lt:${n.limitType}`}function sc(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>ym(r)).join(", ")}]`),Tl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qa(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qa(r)).join(",")),`Target(${t})`}(li(n))}; limitType=${n.limitType})`}function ua(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of qr(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const m=oC(s,u,d);return s.inclusive?m<=0:m<0}(t.startAt,qr(t),r)||t.endAt&&!function(s,u,d){const m=oC(s,u,d);return s.inclusive?m>=0:m>0}(t.endAt,qr(t),r)));var t,r}function kl(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nl(n){return(e,t)=>{let r=!1;for(const s of qr(n)){const u=vh(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function vh(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,d){const m=u.data.field(s),v=d.data.field(s);return null!==m&&null!==v?nc(m,v):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Al(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Bb(this.inner)}size(){return this.innerSize}}const _C=new Wn(Ge.comparator);function Pi(){return _C}const By=new Wn(Ge.comparator);function wh(...n){let e=By;for(const t of n)e=e.insert(t.key,t);return e}function jy(n){let e=By;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wo(){return Ch()}function $y(){return Ch()}function Ch(){return new eu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Kb=new Wn(Ge.comparator),Yb=new In(Ge.comparator);function Ht(...n){let e=Yb;for(const t of n)e=e.add(t);return e}const Qb=new In(Lt);function vm(){return Qb}function wm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:am(e)?"-0":e}}function Cm(n){return{integerValue:""+n}}function yC(n,e){return um(e)?Cm(e):wm(n,e)}class Fl{constructor(){this._=void 0}}function Em(n,e,t){return n instanceof oc?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof tu?zy(n,e):n instanceof ac?Im(n,e):function(r,s){const u=vC(r,s),d=Gy(u)+Gy(r._t);return rp(u)&&rp(r._t)?Cm(d):wm(r.serializer,d)}(n,e)}function Hy(n,e,t){return n instanceof tu?zy(n,e):n instanceof ac?Im(n,e):t}function vC(n,e){return n instanceof Ll?rp(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class oc extends Fl{}class tu extends Fl{constructor(e){super(),this.elements=e}}function zy(n,e){const t=bm(e);for(const r of n.elements)t.some(s=>Us(s,r))||t.push(r);return{arrayValue:{values:t}}}class ac extends Fl{constructor(e){super(),this.elements=e}}function Im(n,e){let t=bm(e);for(const r of n.elements)t=t.filter(s=>!Us(s,r));return{arrayValue:{values:t}}}class Ll extends Fl{constructor(e,t){super(),this.serializer=e,this._t=t}}function Gy(n){return ar(n.integerValue||n.doubleValue)}function bm(n){return fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Eh{constructor(e,t){this.field=e,this.transform=t}}class wC{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function op(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ap{}function CC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ul(n.key,jn.none()):new Vl(n.key,n.data,jn.none());{const t=n.data,r=zr.empty();let s=new In(yr.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new ca(n.key,r,new Wi(s.toArray()),jn.none())}}function Xb(n,e,t){n instanceof Vl?function(r,s,u){const d=r.value.clone(),m=Zy(r.fieldTransforms,s,u.transformResults);d.setAll(m),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ca?function(r,s,u){if(!op(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=Zy(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(qy(r)),m.setAll(d),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function up(n,e,t,r){return n instanceof Vl?function(s,u,d,m){if(!op(s.precondition,u))return d;const v=s.value.clone(),E=Wy(s.fieldTransforms,m,u);return v.setAll(E),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof ca?function(s,u,d,m){if(!op(s.precondition,u))return d;const v=Wy(s.fieldTransforms,m,u),E=u.data;return E.setAll(qy(s)),E.setAll(v),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(T=>T.field))}(n,e,t,r):(d=t,op(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function EC(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=vC(r.transform,s||null);null!=u&&(null===t&&(t=zr.empty()),t.set(r.field,u))}return t||null}function Dm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ih(t,r,(s,u)=>function Jb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof tu&&r instanceof tu||t instanceof ac&&r instanceof ac?ih(t.elements,r.elements,Us):t instanceof Ll&&r instanceof Ll?Us(t._t,r._t):t instanceof oc&&r instanceof oc);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Vl extends ap{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ca extends ap{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function qy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zy(n,e,t){const r=new Map;_t(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,m=e.data.field(u.field);r.set(u.field,Hy(d,m,t[s]))}return r}function Wy(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,Em(u,d,e))}return r}class Ul extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tm extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sm{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Xb(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=up(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=up(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$y();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(s.key)?null:m;const v=CC(d,m);null!==v&&r.set(s.key,v),d.isValidDocument()||d.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&ih(this.mutations,e.mutations,(t,r)=>Dm(t,r))&&ih(this.baseMutations,e.baseMutations,(t,r)=>Dm(t,r))}}class Ih{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){_t(e.mutations.length===r.length);let s=Kb;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new Ih(e,t,r,s)}}class la{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bl{constructor(e){this.count=e}}var ur,on;function Am(n){switch(n){default:return it();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function tD(n){if(void 0===n)return br("GRPC error has no .code"),X.UNKNOWN;switch(n){case ur.OK:return X.OK;case ur.CANCELLED:return X.CANCELLED;case ur.UNKNOWN:return X.UNKNOWN;case ur.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case ur.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case ur.INTERNAL:return X.INTERNAL;case ur.UNAVAILABLE:return X.UNAVAILABLE;case ur.UNAUTHENTICATED:return X.UNAUTHENTICATED;case ur.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case ur.NOT_FOUND:return X.NOT_FOUND;case ur.ALREADY_EXISTS:return X.ALREADY_EXISTS;case ur.PERMISSION_DENIED:return X.PERMISSION_DENIED;case ur.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case ur.ABORTED:return X.ABORTED;case ur.OUT_OF_RANGE:return X.OUT_OF_RANGE;case ur.UNIMPLEMENTED:return X.UNIMPLEMENTED;case ur.DATA_LOSS:return X.DATA_LOSS;default:return it()}}(on=ur||(ur={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class IC{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xm}static getOrCreateInstance(){return null===xm&&(xm=new IC),xm}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let xm=null;class cp{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new cp(vt.min(),s,vm(),Pi(),Ht())}}class bh{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bh(r,t,Ht(),Ht(),Ht())}}class Mm{constructor(e,t,r,s){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=s}}class Tr{constructor(e,t){this.targetId=e,this.Et=t}}class Qy{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class bC{constructor(){this.At=0,this.Rt=DC(),this.vt=Lr.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Ht(),t=Ht(),r=Ht();return this.Rt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:it()}}),new bh(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=DC()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class nD{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Pi(),this.qt=Jy(),this.Ut=new In(Lt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,s)=>{this.Wt(s)&&t(s)})}Jt(e){var t;const r=e.targetId,s=e.Et.count,u=this.Yt(r);if(u){const d=u.target;if(Uy(d))if(0===s){const m=new Ge(d.path);this.Qt(r,m,Nn.newNoDocument(m,vt.min()))}else _t(1===s);else{const m=this.Zt(r);m!==s&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=IC.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:m,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((u,d)=>{const m=this.Yt(d);if(m){if(u.current&&Uy(m.target)){const v=new Ge(m.target.path);null!==this.Lt.get(v)||this.te(d,v)||this.Qt(d,v,Nn.newNoDocument(v,e))}u.St&&(t.set(d,u.Ct()),u.xt())}});let r=Ht();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(v=>{const E=this.Yt(v);return!E||2===E.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,d)=>d.setReadTime(e));const s=new cp(e,t,this.Ut,this.Lt,r);return this.Lt=Pi(),this.qt=Jy(),this.Ut=new In(Lt),s}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const s=this.jt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new bC,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new In(Lt),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new bC),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function Jy(){return new Wn(Ge.comparator)}function DC(){return new Wn(Ge.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},SC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dh={and:"AND",or:"OR"};class rD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Th(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xy(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iD(n,e){return Th(n,e.toTimestamp())}function cr(n){return _t(!!n),vt.fromTimestamp(function(e){const t=ec(e);return new Bn(t.seconds,t.nanos)}(n))}function AC(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ev(n){const e=sn.fromString(n);return _t(dp(e)),e}function jl(n,e){return AC(n.databaseId,e.path)}function Vr(n,e){const t=ev(e);if(t.get(1)!==n.databaseId.projectId)throw new De(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(Bs(t))}function tv(n,e){return AC(n.databaseId,e)}function xC(n){const e=ev(n);return 4===e.length?sn.emptyPath():Bs(e)}function Ki(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bs(n){return _t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function js(n,e,t){return{name:jl(n,e),fields:t.value.mapValue.fields}}function nv(n,e,t){const r=Vr(n,e.name),s=cr(e.updateTime),u=e.createTime?cr(e.createTime):vt.min(),d=new zr({mapValue:{fields:e.fields}}),m=Nn.newFoundDocument(r,s,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function lp(n,e){let t;if(e instanceof Vl)t={update:js(n,e.key,e.value)};else if(e instanceof Ul)t={delete:jl(n,e.key)};else if(e instanceof ca)t={update:js(n,e.key,e.data),updateMask:sv(e.fieldMask)};else{if(!(e instanceof Tm))return it();t={verify:jl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof oc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ac)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ll)return{fieldPath:u.field.canonicalString(),increment:d._t};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:iD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:it()),t;var s}function rv(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?jn.updateTime(cr(s.updateTime)):void 0!==s.exists?jn.exists(s.exists):jn.none():jn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let m=null;"setToServerValue"in d?(_t("REQUEST_TIME"===d.setToServerValue),m=new oc):"appendMissingElements"in d?m=new tu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ac(d.removeAllFromArray.values||[]):"increment"in d?m=new Ll(u,d.increment):it();const v=yr.fromServerFormat(d.fieldPath);return new Eh(v,m)}(n,s)):[];var s;if(e.update){const s=Vr(n,e.update.name),u=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Wi((e.updateMask.fieldPaths||[]).map(E=>yr.fromServerFormat(E)));return new ca(s,u,d,t,r)}return new Vl(s,u,t,r)}if(e.delete){const s=Vr(n,e.delete);return new Ul(s,t)}if(e.verify){const s=Vr(n,e.verify);return new Tm(s,t)}return it()}function Rm(n,e){return{documents:[tv(n,e.path)]}}function $l(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0!==v.length)return iv(vn.create(v,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(E=>{return{field:uc((T=E).field),direction:kC(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(E=e.limit,n.useProto3Json||Tl(E)?E:{value:E});var E,m,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function RC(n){let e=xC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){_t(1===r);const T=t.from[0];T.allDescendants?s=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const O=PC(T);return O instanceof vn&&Ly(O)?O.getFilters():[O]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(T=>{return new fh(Hl((O=T).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(T){let O;return O="object"==typeof T?T.value:T,Tl(O)?null:O}(t.limit));let v=null;var T;t.startAt&&(v=new rc((T=t.startAt).values||[],!!T.before));let E=null;return t.endAt&&(E=function(T){return new rc(T.values||[],!T.before)}(t.endAt)),mC(e,s,d,u,m,"F",v,E)}function PC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Hl(e.unaryFilter.field);return tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Hl(e.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hl(e.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Hl(e.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?tn.create(Hl((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(t=>PC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function kC(n){return TC[n]}function NC(n){return SC[n]}function Om(n){return Dh[n]}function uc(n){return{fieldPath:n.canonicalString()}}function Hl(n){return yr.fromServerFormat(n.fieldPath)}function iv(n){return n instanceof tn?function(e){if("=="===e.op){if(ky(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NAN"}};if(Py(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ky(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NOT_NAN"}};if(Py(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(e.field),op:NC(e.op),value:e.value}}}(n):n instanceof vn?function(e){const t=e.getFilters().map(r=>iv(r));return 1===t.length?t[0]:{compositeFilter:{op:Om(e.op),filters:t}}}(n):it()}function sv(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dp(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class da{constructor(e,t,r,s,u=vt.min(),d=vt.min(),m=Lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ov{constructor(e){this.se=e}}function av(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jl(s=n.se,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Th(s,u.version.toTimestamp()),createTime:Th(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cc(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:cc(e.version)}}var s,u;return r}function hp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lc(n){const e=new Bn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function dc(n,e){const t=(e.baseMutations||[]).map(u=>rv(n.se,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>rv(n.se,u)),s=Bn.fromMillis(e.localWriteTimeMs);return new Sm(e.batchId,s,t,r)}function Sh(n){const e=lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var s;return void 0!==n.query.documents?(_t(1===(s=n.query).documents.length),r=li(Oi(xC(s.documents[0])))):r=li(RC(n.query)),new da(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function uv(n,e){const t=cc(e.snapshotVersion),r=cc(e.lastLimboFreeSnapshotVersion);let s;s=Uy(e.target)?Rm(n.se,e.target):$l(n.se,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function cv(n){const e=RC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Xa(e,e.limit,"L"):e}function lv(n,e){return new la(e.largestBatchId,rv(n.se,e.overlayMutation))}function LC(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function VC(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:cc(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class aD{getBundleMetadata(e,t){return UC(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:lc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return UC(e).put({bundleId:(r=t).id,createTime:cc(cr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return BC(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:cv(s.bundledQuery),readTime:lc(s.readTime)};var s})}saveNamedQuery(e,t){return BC(e).put({name:(r=t).name,readTime:cc(cr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function UC(n){return pn(n,"bundles")}function BC(n){return pn(n,"namedQueries")}class Pm{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new Pm(e,t.uid||"")}getOverlay(e,t){return fp(e).get(LC(this.userId,t)).next(r=>r?lv(this.serializer,r):null)}getOverlays(e,t){const r=wo();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const m=new la(t,d);s.push(this.re(e,m))}),re.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(Ri(d.getCollectionPath())));const u=[];return s.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(fp(e).J("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const s=wo(),u=Ri(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return fp(e).j("collectionPathOverlayIndex",d).next(m=>{for(const v of m){const E=lv(this.serializer,v);s.set(E.getKey(),E)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=wo();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fp(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,E,T)=>{const O=lv(this.serializer,E);u.size()<s||O.largestBatchId===d?(u.set(O.getKey(),O),d=O.largestBatchId):T.done()}).next(()=>u)}re(e,t){return fp(e).put(function(r,s,u){const[d,m,v]=LC(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:lp(r.se,u.mutation)}}(this.serializer,this.userId,t))}}function fp(n){return pn(n,"documentOverlays")}class zl{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),am(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Ml(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?pm(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):it()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const s of Object.keys(r))this.fe(s,t),this.ue(r[s],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const s of r)this.ue(s,t)}_e(e,t){this.ae(t,37),Ge.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function uD(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function jC(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=uD(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}zl.pe=new zl;class cD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const s=t.codePointAt(0);this.Te(240|s>>>18),this.Te(128|63&s>>>12),this.Te(128|63&s>>>6),this.Te(128|63&s)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const s=t.codePointAt(0);this.Re(240|s>>>18),this.Re(128|63&s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s)}}this.ve()}Ve(e){const t=this.Se(e),r=jC(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ce(e){const t=this.Se(e),r=jC(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class lD{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class dD{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class pp{constructor(){this.Me=new cD,this.Fe=new lD(this.Me),this.Be=new dD(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class hc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hc(this.indexId,this.documentKey,this.arrayValue,r)}}function nu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dv(n.arrayValue,e.arrayValue),0!==t?t:(t=dv(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function dv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class $C{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){_t(e.collectionGroup===this.collectionId);const t=Ka(e);if(void 0!==t&&!this.ze(t))return!1;const r=Il(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Ge){const d=r[s];if(!this.je(this.Ge,d)||!this.We(this.Ue[u++],d))return!1;++s}for(;s<r.length;++s)if(u>=this.Ue.length||!this.We(this.Ue[u++],r[s]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hv(n){var e,t;if(_t(n instanceof tn||n instanceof vn),n instanceof tn){if(n instanceof dC){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>tn.create(n.field,"==",u)))||[];return vn.create(s,"or")}return n}const r=n.filters.map(s=>hv(s));return vn.create(r,n.op)}function HC(n){if(0===n.getFilters().length)return[];const e=Fm(hv(n));return _t(fv(e)),km(e)||Nm(e)?[e]:e.getFilters()}function km(n){return n instanceof tn}function Nm(n){return n instanceof vn&&Ly(n)}function fv(n){return km(n)||Nm(n)||function(e){if(e instanceof vn&&Fy(e)){for(const t of e.getFilters())if(!km(t)&&!Nm(t))return!1;return!0}return!1}(n)}function Fm(n){if(_t(n instanceof tn||n instanceof vn),n instanceof tn)return n;if(1===n.filters.length)return Fm(n.filters[0]);const e=n.filters.map(r=>Fm(r));let t=vn.create(e,n.op);return t=Vm(t),fv(t)?t:(_t(t instanceof vn),_t(ph(t)),_t(t.filters.length>1),t.filters.reduce((r,s)=>Lm(r,s)))}function Lm(n,e){let t;return _t(n instanceof tn||n instanceof vn),_t(e instanceof tn||e instanceof vn),t=n instanceof tn?e instanceof tn?vn.create([n,e],"and"):fc(n,e):e instanceof tn?fc(e,n):function(r,s){if(_t(r.filters.length>0&&s.filters.length>0),ph(r)&&ph(s))return cC(r,s.getFilters());const u=Fy(r)?r:s,d=Fy(r)?s:r,m=u.filters.map(v=>Lm(v,d));return vn.create(m,"or")}(n,e),Vm(t)}function fc(n,e){if(ph(e))return cC(e,n.getFilters());{const t=e.filters.map(r=>Lm(n,r));return vn.create(t,"or")}}function Vm(n){if(_t(n instanceof tn||n instanceof vn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return Vm(e[0]);if(uC(n))return n;const t=e.map(s=>Vm(s)),r=[];return t.forEach(s=>{s instanceof tn?r.push(s):s instanceof vn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:vn.create(r,n.op)}class hD{constructor(){this.He=new pc}addToCollectionParentIndex(e,t){return this.He.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ls.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class pc{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new In(sn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new In(sn.comparator)).toArray()}}const pv=new Uint8Array(0);class gv{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new pc,this.Ye=new eu(r=>gh(r),(r,s)=>mh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const u={collectionId:r,parent:Ri(s)};return fD(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Kw(t),""],!1,!0);return fD(e).j(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(yo(d.parent))}return r})}addFieldIndex(e,t){const r=gp(e),s={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete s.indexId;const u=r.add(s);if(t.indexState){const d=Um(e);return u.next(m=>{d.put(VC(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=gp(e),s=Um(e),u=Ah(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ah(e);let s=!0;const u=new Map;return re.forEach(this.Ze(t),d=>this.Xe(e,d).next(m=>{s&&(s=!!m),u.set(d,m)})).next(()=>{if(s){let d=Ht();const m=[];return re.forEach(u,(v,E)=>{var T;Oe("IndexedDbIndexManager",`Using index ${T=v,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(at=>`${at.fieldPath}:${at.kind}`).join(",")}`} to execute ${gh(t)}`);const O=function(at,wt){const Bt=Ka(wt);if(void 0===Bt)return null;for(const Zt of Ol(at,Bt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(E,v),V=function(at,wt){const Bt=new Map;for(const Zt of Il(wt))for(const fi of Ol(at,Zt.fieldPath))switch(fi.op){case"==":case"in":Bt.set(Zt.fieldPath.canonicalString(),fi.value);break;case"not-in":case"!=":return Bt.set(Zt.fieldPath.canonicalString(),fi.value),Array.from(Bt.values())}return null}(E,v),W=function(at,wt){const Bt=[];let Zt=!0;for(const fi of Il(wt)){const Gs=0===fi.kind?pC(at,fi.fieldPath,at.startAt):gC(at,fi.fieldPath,at.startAt);Bt.push(Gs.value),Zt&&(Zt=Gs.inclusive)}return new rc(Bt,Zt)}(E,v),ie=function(at,wt){const Bt=[];let Zt=!0;for(const fi of Il(wt)){const Gs=0===fi.kind?gC(at,fi.fieldPath,at.endAt):pC(at,fi.fieldPath,at.endAt);Bt.push(Gs.value),Zt&&(Zt=Gs.inclusive)}return new rc(Bt,Zt)}(E,v),Ae=this.tn(v,E,W),xe=this.tn(v,E,ie),Et=this.en(v,E,V),Mt=this.nn(v.indexId,O,Ae,W.inclusive,xe,ie.inclusive,Et);return re.forEach(Mt,at=>r.H(at,t.limit).next(wt=>{wt.forEach(Bt=>{const Zt=Ge.fromSegments(Bt.documentKey);d.has(Zt)||(d=d.add(Zt),m.push(Zt))})}))}).next(()=>m)}return re.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:HC(vn.create(e.filters,"and")).map(r=>Vy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,s,u,d,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),E=v/(null!=t?t.length:1),T=[];for(let O=0;O<v;++O){const V=t?this.sn(t[O/E]):pv,W=this.rn(e,V,r[O%E],s),ie=this.on(e,V,u[O%E],d),Ae=m.map(xe=>this.rn(e,V,xe,!0));T.push(...this.createRange(W,ie,Ae))}return T}rn(e,t,r,s){const u=new hc(e,Ge.empty(),t,r);return s?u:u.qe()}on(e,t,r,s){const u=new hc(e,Ge.empty(),t,r);return s?u.qe():u}Xe(e,t){const r=new $C(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let d=null;for(const m of u)r.Qe(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;const s=this.Ze(t);return re.forEach(s,u=>this.Xe(e,u).next(d=>{d?0!==r&&d.fields.length<function(m){let v=new In(yr.comparator),E=!1;for(const T of m.filters)for(const O of T.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?E=!0:v=v.add(O.field));for(const T of m.orderBy)T.field.isKeyField()||(v=v.add(T.field));return v.size+(E?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}un(e,t){const r=new pp;for(const s of Il(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.Le(s.kind);zl.pe.oe(u,d)}return r.$e()}sn(e){const t=new pp;return zl.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new pp;return zl.pe.oe(ch(this.databaseId,t),r.Le(function(s){const u=Il(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let s=[];s.push(new pp);let u=0;for(const d of Il(e)){const m=r[u++];for(const v of s)if(this.an(t,d.fieldPath)&&fm(m))s=this.hn(s,d,m);else{const E=v.Le(d.kind);zl.pe.oe(m,E)}}return this.ln(s)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of s){const v=new pp;v.seed(m.$e()),zl.pe.oe(d,v.Le(t.kind)),u.push(v)}return u}an(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=gp(e),s=Um(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const d=[];return re.forEach(u,m=>s.get([m.indexId,this.uid]).next(v=>{d.push(function(E,T){const O=T?new im(T.sequenceNumber,new ls(lc(T.readTime),new Ge(yo(T.documentKey)),T.largestBatchId)):im.empty(),V=E.fields.map(([W,ie])=>new oh(yr.fromServerFormat(W),ie));return new Kf(E.indexId,E.collectionGroup,V,O)}(m,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=gp(e),u=Um(e);return this.fn(e).next(d=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,v=>u.put(VC(v.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?re.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),re.forEach(m,v=>this.dn(e,s,v).next(E=>{const T=this.wn(u,v);return E.isEqual(T)?re.resolve():this._n(e,u,v,E,T)}))))})}mn(e,t,r,s){return Ah(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,s){return Ah(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const s=Ah(e);let u=new In(nu);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(d,m)=>{u=u.add(new hc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new In(nu);const s=this.un(t,e);if(null==s)return r;const u=Ka(t);if(null!=u){const d=e.data.field(u.fieldPath);if(fm(d))for(const m of d.arrayValue.values||[])r=r.add(new hc(t.indexId,e.key,this.sn(m),s))}else r=r.add(new hc(t.indexId,e.key,pv,s));return r}_n(e,t,r,s,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,v,E,T,O){const V=m.getIterator(),W=v.getIterator();let ie=xl(V),Ae=xl(W);for(;ie||Ae;){let xe=!1,Et=!1;if(ie&&Ae){const Mt=E(ie,Ae);Mt<0?Et=!0:Mt>0&&(xe=!0)}else null!=ie?Et=!0:xe=!0;xe?(T(Ae),Ae=xl(W)):Et?(O(ie),ie=xl(V)):(ie=xl(V),Ae=xl(W))}}(s,u,nu,m=>{d.push(this.mn(e,t,r,m))},m=>{d.push(this.gn(e,t,r,m))}),re.waitFor(d)}fn(e){let t=1;return Um(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>nu(d,m)).filter((d,m,v)=>!m||0!==nu(d,v[m-1]));const s=[];s.push(e);for(const d of r){const m=nu(d,e),v=nu(d,t);if(0===m)s[0]=e.qe();else if(m>0&&v<0)s.push(d),s.push(d.qe());else if(v>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2){if(this.yn(s[d],s[d+1]))return[];u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,pv,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,pv,[]]))}return u}yn(e,t){return nu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(bt)}getMinOffset(e,t){return re.mapArray(this.Ze(t),r=>this.Xe(e,r).next(s=>s||it())).next(bt)}}function fD(n){return pn(n,"collectionParents")}function Ah(n){return pn(n,"indexEntries")}function gp(n){return pn(n,"indexConfiguration")}function Um(n){return pn(n,"indexState")}function bt(n){_t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;sm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ls(e.readTime,e.documentKey,t)}const zC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Yi(e,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function GC(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:d},(T,O,V)=>(m++,V.delete()));u.push(v.next(()=>{_t(1===m)}));const E=[];for(const T of t.mutations){const O=tC(e,T.key.path,t.batchId);u.push(s.delete(O)),E.push(T.key)}return re.waitFor(u).next(()=>E)}function ru(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Yi.DEFAULT_COLLECTION_PERCENTILE=10,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yi.DEFAULT=new Yi(41943040,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yi.DISABLED=new Yi(-1,0,0);class Bm{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.pn={}}static ie(e,t,r,s){_t(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Bm(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Co(e).Z({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=xn(e),d=Co(e);return d.add({}).next(m=>{_t("number"==typeof m);const v=new Sm(m,t,r,s),E=function(V,W,ie){const Ae=ie.baseMutations.map(Et=>lp(V.se,Et)),xe=ie.mutations.map(Et=>lp(V.se,Et));return{userId:W,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:Ae,mutations:xe}}(this.serializer,this.userId,v),T=[];let O=new In((V,W)=>Lt(V.canonicalString(),W.canonicalString()));for(const V of s){const W=tC(this.userId,V.key.path,m);O=O.add(V.key.path.popLast()),T.push(d.put(E)),T.push(u.put(W,Nb))}return O.forEach(V=>{T.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.pn[m]=v.keys()}),re.waitFor(T).next(()=>v)})}lookupMutationBatch(e,t){return Co(e).get(t).next(r=>r?(_t(r.userId===this.userId),dc(this.serializer,r)):null)}In(e,t){return this.pn[t]?re.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.pn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Co(e).Z({index:"userMutationsIndex",range:s},(d,m,v)=>{m.userId===this.userId&&(_t(m.batchId>=r),u=dc(this.serializer,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Co(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Co(e).j("userMutationsIndex",t).next(r=>r.map(s=>dc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Qf(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return xn(e).Z({range:s},(d,m,v)=>{const[E,T,O]=d,V=yo(T);if(E===this.userId&&t.path.isEqual(V))return Co(e).get(O).next(W=>{if(!W)throw it();_t(W.userId===this.userId),u.push(dc(this.serializer,W))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Lt);const s=[];return t.forEach(u=>{const d=Qf(this.userId,u.path),m=IDBKeyRange.lowerBound(d),v=xn(e).Z({range:m},(E,T,O)=>{const[V,W,ie]=E,Ae=yo(W);V===this.userId&&u.path.isEqual(Ae)?r=r.add(ie):O.done()});s.push(v)}),re.waitFor(s).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Qf(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new In(Lt);return xn(e).Z({range:d},(v,E,T)=>{const[O,V,W]=v,ie=yo(V);O===this.userId&&r.isPrefixOf(ie)?ie.length===s&&(m=m.add(W)):T.done()}).next(()=>this.Tn(e,m))}Tn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Co(e).get(u).next(d=>{if(null===d)throw it();_t(d.userId===this.userId),r.push(dc(this.serializer,d))}))}),re.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return GC(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),re.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return xn(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const v=yo(u[1]);s.push(v)}else m.done()}).next(()=>{_t(0===s.length)})})}containsKey(e,t){return mp(e,this.userId,t)}An(e){return pD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mp(n,e,t){const r=Qf(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return xn(n).Z({range:u,Y:!0},(m,v,E)=>{const[T,O,V]=m;T===e&&O===s&&(d=!0),E.done()}).next(()=>d)}function Co(n){return pn(n,"mutations")}function xn(n){return pn(n,"documentMutations")}function pD(n){return pn(n,"mutationQueues")}class gc{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new gc(0)}static bn(){return new gc(-1)}}class qC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new gc(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>vt.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Vn(e,s)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xh(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(_t(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return xh(e).Z((d,m)=>{const v=Sh(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>re.waitFor(u)).next(()=>s)}forEachTarget(e,t){return xh(e).Z((r,s)=>{const u=Sh(s);t(u)})}Pn(e){return mv(e).get("targetGlobalKey").next(t=>(_t(null!==t),t))}Vn(e,t){return mv(e).put("targetGlobalKey",t)}Sn(e,t){return xh(e).put(uv(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=gh(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return xh(e).Z({range:s,index:"queryTargetsIndex"},(d,m,v)=>{const E=Sh(m);mh(t,E.target)&&(u=E,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=iu(e);return t.forEach(d=>{const m=Ri(d.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,d))}),re.waitFor(s)}removeMatchingKeys(e,t,r){const s=iu(e);return re.forEach(t,u=>{const d=Ri(u.path);return re.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=iu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=iu(e);let u=Ht();return s.Z({range:r,Y:!0},(d,m,v)=>{const E=yo(d[1]),T=new Ge(E);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Ri(t.path),s=IDBKeyRange.bound([r],[Kw(r)],!1,!0);let u=0;return iu(e).Z({index:"documentTargetsIndex",Y:!0,range:s},([d,m],v,E)=>{0!==d&&(u++,E.done())}).next(()=>u>0)}ne(e,t){return xh(e).get(t).next(r=>r?Sh(r):null)}}function xh(n){return pn(n,"targets")}function mv(n){return pn(n,"targetGlobal")}function iu(n){return pn(n,"targetDocuments")}function _v([n,e],[t,r]){const s=Lt(n,t);return 0===s?Lt(e,r):s}class ZC{constructor(e){this.Cn=e,this.buffer=new In(_v),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_v(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xu(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ds(r)}yield t.$n(3e5)}))}}class mD{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Zi.ct);const r=new ZC(t);return this.Mn.forEachTarget(e,s=>r.kn(s.sequenceNumber)).next(()=>this.Mn.Bn(e,s=>r.kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(zC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zC):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,s,u,d,m,v,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),s=this.params.maximumSequenceNumbersToCollect):s=O,d=Date.now(),this.nthSequenceNumber(e,s))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(E=Date.now(),zw()<=Cr.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${s} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${O} documents in `+(E-v)+`ms\nTotal Duration: ${E-T}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:O})))}}class _D{constructor(e,t){this.db=e,this.garbageCollector=new mD(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,s)=>t(s))}addReference(e,t,r){return mc(e,r)}removeReference(e,t,r){return mc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return mc(e,t)}Kn(e,t){return function(r,s){let u=!1;return pD(r).X(d=>mp(r,d,s).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Un(e,(d,m)=>{if(m<=t){const v=this.Kn(e,d).next(E=>{if(!E)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,vt.min()),iu(e).delete([0,Ri(d.path)])))});s.push(v)}}).next(()=>re.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return mc(e,t)}Un(e,t){const r=iu(e);let s,u=Zi.ct;return r.Z({index:"documentTargetsIndex"},([d,m],{path:v,sequenceNumber:E})=>{0===d?(u!==Zi.ct&&t(new Ge(yo(s)),u),u=E,s=v):u=Zi.ct}).next(()=>{u!==Zi.ct&&t(new Ge(yo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mc(n,e){return iu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ri(e.path),sequenceNumber:r}));var r}class WC{constructor(){this.changes=new eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _c(e).put(r)}removeEntry(e,t,r){return _c(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],hp(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return _c(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(s,u)=>{r=this.Qn(t,u)}).next(()=>r)}zn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return _c(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(s,u)=>{r={document:this.Qn(t,u),size:ru(u)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this.jn(e,t,(s,u)=>{const d=this.Qn(s,u);r=r.insert(s,d)}).next(()=>r)}Wn(e,t){let r=Pi(),s=new Wn(Ge.comparator);return this.jn(e,t,(u,d)=>{const m=this.Qn(u,d);r=r.insert(u,m),s=s.insert(u,ru(d))}).next(()=>({documents:r,Hn:s}))}jn(e,t,r){if(t.isEmpty())return re.resolve();let s=new In(Rh);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Mh(s.first()),Mh(s.last())),d=s.getIterator();let m=d.getNext();return _c(e).Z({index:"documentKeyIndex",range:u},(v,E,T)=>{const O=Ge.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;m&&Rh(m,O)<0;)r(m,null),m=d.getNext();m&&m.isEqual(O)&&(r(m,E),m=d.hasNext()?d.getNext():null),m?T.G(Mh(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),hp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _c(e).j(IDBKeyRange.bound(d,m,!0)).next(v=>{let E=Pi();for(const T of v){const O=this.Qn(Ge.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);O.isFoundDocument()&&(ua(t,O)||s.has(O.key))&&(E=E.insert(O.key,O))}return E})}getAllFromCollectionGroup(e,t,r,s){let u=Pi();const d=YC(t,r),m=YC(t,ls.max());return _c(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(v,E,T)=>{const O=this.Qn(Ge.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);u=u.insert(O.key,O),u.size===s&&T.done()}).next(()=>u)}newChangeBuffer(e){return new jm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return yv(e).get("remoteDocumentGlobalKey").next(t=>(_t(!!t),t))}Gn(e,t){return yv(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function FC(n,e){let t;if(e.document)t=nv(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=lc(e.noDocument.readTime);t=Nn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ge.fromSegments(e.unknownDocument.path),s=lc(e.unknownDocument.version);t=Nn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Bn(r[0],r[1]);return vt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Nn.newInvalidDocument(e)}}function KC(n){return new yD(n)}class jm extends WC{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new eu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new In((u,d)=>Lt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Yn.get(u);if(t.push(this.Jn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const v=av(this.Jn.serializer,d);s=s.add(u.path.popLast());const E=ru(v);r+=E-m.size,t.push(this.Jn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=av(this.Jn.serializer,d.convertToNoDocument(vt.min()));t.push(this.Jn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Jn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:s})=>(s.forEach((u,d)=>{this.Yn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function yv(n){return pn(n,"remoteDocumentGlobal")}function _c(n){return pn(n,"remoteDocumentsV14")}function Mh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YC(n,e){const t=e.documentKey.path.toArray();return[n,hp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Rh(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Lt(t[u],r[u]),s)return s;return s=Lt(t.length,r.length),s||(s=Lt(t[t.length-2],r[r.length-2]),s||Lt(t[t.length-1],r[r.length-1]))}class _p{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class QC{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&up(r.mutation,s,Wi.empty(),Bn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const s=wo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=wh();return u.forEach((m,v)=>{d=d.insert(m,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,s){let u=Pi();const d=Ch(),m=Ch();return t.forEach((v,E)=>{const T=r.get(E.key);s.has(E.key)&&(void 0===T||T.mutation instanceof ca)?u=u.insert(E.key,E):void 0!==T?(d.set(E.key,T.mutation.getFieldMask()),up(T.mutation,E,T.mutation.getFieldMask(),Bn.now())):d.set(E.key,Wi.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((E,T)=>d.set(E,T)),t.forEach((E,T)=>{var O;return m.set(E,new _p(T,null!==(O=d.get(E))&&void 0!==O?O:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Ch();let s=new Wn((d,m)=>d-m),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(v=>{const E=t.get(v);if(null===E)return;let T=r.get(v)||Wi.empty();T=m.applyToLocalView(E,T),r.set(v,T);const O=(s.get(m.batchId)||Ht()).add(v);s=s.insert(m.batchId,O)})}).next(()=>{const d=[],m=s.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),E=v.key,T=v.value,O=$y();T.forEach(V=>{if(!u.has(V)){const W=CC(t.get(V),r.get(V));null!==W&&O.set(V,W),u=u.add(V)}}),d.push(this.documentOverlayCache.saveOverlays(e,E,O))}return re.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):yh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):re.resolve(wo());let m=-1,v=u;return d.next(E=>re.forEach(E,(T,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),u.get(T)?re.resolve():this.remoteDocumentCache.getEntry(e,T).next(V=>{v=v.insert(T,V)}))).next(()=>this.populateOverlays(e,E,u)).next(()=>this.computeViews(e,v,E,Ht())).next(T=>({batchId:m,changes:jy(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=wh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=wh();return this.indexManager.getCollectionParents(e,s).next(d=>re.forEach(d,m=>{const v=(E=t,T=m.child(s),new vo(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(E=>{E.forEach((T,O)=>{u=u.insert(T,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,v)=>{const E=v.getKey();null===u.get(E)&&(u=u.insert(E,Nn.newInvalidDocument(E)))});let d=wh();return u.forEach((m,v)=>{const E=s.get(m);void 0!==E&&up(E.mutation,v,Wi.empty(),Bn.now()),ua(t,v)&&(d=d.insert(m,v))}),d})}}class vD{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:cr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:cv(r.bundledQuery),readTime:cr(r.readTime)}),re.resolve();var r}}class wD{constructor(){this.overlays=new Wn(Ge.comparator),this.ts=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wo();return re.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.re(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ts.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ts.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=wo(),u=t.length+1,d=new Ge(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const v=m.getNext().value,E=v.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Wn((E,T)=>E-T);const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let T=u.get(E.largestBatchId);null===T&&(T=wo(),u=u.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const m=wo(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((E,T)=>m.set(E,T)),!(m.size()>=s)););return re.resolve(m)}re(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.ts.get(s.largestBatchId).delete(r.key);this.ts.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new la(t,r));let u=this.ts.get(t);void 0===u&&(u=Ht(),this.ts.set(t,u)),this.ts.set(t,u.add(r.key))}}class $m{constructor(){this.es=new In(Ur.ns),this.ss=new In(Ur.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new Ur(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new Ur(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new Ge(new sn([])),r=new Ur(t,e),s=new Ur(t,e+1),u=[];return this.ss.forEachInRange([r,s],d=>{this.us(d),u.push(d.key)}),u}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new Ge(new sn([])),r=new Ur(t,e),s=new Ur(t,e+1);let u=Ht();return this.ss.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Ur(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ur{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return Ge.comparator(e.key,t.key)||Lt(e.ds,t.ds)}static rs(e,t){return Lt(e.ds,t.ds)||Ge.comparator(e.key,t.key)}}class JC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new In(Ur.ns)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const d=new Sm(u,t,r,s);this.mutationQueue.push(d);for(const m of s)this._s=this._s.add(new Ur(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(d)}lookupMutationBatch(e,t){return re.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ys(t+1),u=s<0?0:s;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ur(t,0),s=new Ur(t,Number.POSITIVE_INFINITY),u=[];return this._s.forEachInRange([r,s],d=>{const m=this.gs(d.ds);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Lt);return t.forEach(s=>{const u=new Ur(s,0),d=new Ur(s,Number.POSITIVE_INFINITY);this._s.forEachInRange([u,d],m=>{r=r.add(m.ds)})}),re.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new Ur(new Ge(u),0);let m=new In(Lt);return this._s.forEachWhile(v=>{const E=v.key.path;return!!r.isPrefixOf(E)&&(E.length===s&&(m=m.add(v.ds)),!0)},d),re.resolve(this.ps(m))}ps(e){const t=[];return e.forEach(r=>{const s=this.gs(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){_t(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return re.forEach(t.mutations,s=>{const u=new Ur(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new Ur(t,0),s=this._s.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return re.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class CD{constructor(e){this.Ts=e,this.docs=new Wn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Nn.newInvalidDocument(s))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Pi();const d=t.path,m=new Ge(d.child("")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:E,value:{document:T}}=v.getNext();if(!d.isPrefixOf(E.path))break;E.path.length>d.length+1||sm(Rb(T),r)<=0||(s.has(T.key)||ua(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,s){it()}Es(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XC(this)}getSize(e){return re.resolve(this.size)}}class XC extends WC{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Jn.addEntry(e,s)):this.Jn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class ED{constructor(e){this.persistence=e,this.As=new eu(t=>gh(t),mh),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Rs=0,this.vs=new $m,this.targetCount=0,this.bs=gc.vn()}forEachTarget(e,t){return this.As.forEach((r,s)=>t(s)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),re.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new gc(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Sn(t),re.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.As.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.As.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),re.waitFor(u).next(()=>s)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.vs.containsKey(t))}}class eE{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Zi(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new ED(this),this.indexManager=new hD,this.remoteDocumentCache=new CD(r=>this.referenceDelegate.Cs(r)),this.serializer=new ov(t),this.xs=new vD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new JC(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const s=new cA(this.Vs.next());return this.referenceDelegate.Ns(),r(s).next(u=>this.referenceDelegate.ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Os(e,t){return re.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class cA extends Yw{constructor(e){super(),this.currentSequenceNumber=e}}class vv{constructor(e){this.persistence=e,this.$s=new $m,this.Ms=null}static Fs(e){return new vv(e)}get Bs(){if(this.Ms)return this.Ms;throw it()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),re.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(s=>this.Bs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Bs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Bs,r=>{const s=Ge.fromPath(r);return this.Ls(e,s).next(u=>{u||t.removeEntry(s,vt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return re.or([()=>re.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class lA{constructor(e){this.serializer=e}M(e,t,r,s){const u=new bl("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eC,{unique:!0}),m.createObjectStore("documentMutations"),ID(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=re.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),ID(e)),d=d.next(()=>function(m){const v=m.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",E)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(m,v){return v.store("mutations").j().next(E=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eC,{unique:!0});const T=v.store("mutations"),O=E.map(V=>T.put(V));return re.waitFor(O)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.qs(u))),r<6&&s>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Us(u)))),r<7&&s>=7&&(d=d.next(()=>this.Ks(u))),r<8&&s>=8&&(d=d.next(()=>this.Gs(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.Qs(u))),r<11&&s>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:Sy});v.createIndex("collectionPathOverlayIndex",Fb,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",Lb,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:cm});v.createIndex("documentKeyIndex",ah),v.createIndex("collectionGroupIndex",Ey)}(e)).next(()=>this.zs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.js(e,u))),r<15&&s>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:by}).createIndex("sequenceNumberIndex",Dy,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Ty}).createIndex("documentKeyIndex",rC,{unique:!1})}(e))),d}Us(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=ru(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>re.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",d).next(m=>re.forEach(m,v=>{_t(v.userId===u.userId);const E=dc(this.serializer,v);return GC(e,u.userId,E).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((d,m)=>{const v=new sn(d),E=[0,Ri(v)];u.push(t.get(E).next(T=>T?re.resolve():t.put({targetId:0,path:Ri(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:nC});const r=t.store("collectionParents"),s=new pc,u=d=>{if(s.add(d)){const m=d.lastSegment(),v=d.popLast();return r.put({collectionId:m,parent:Ri(v)})}};return t.store("remoteDocuments").Z({Y:!0},(d,m)=>{const v=new sn(d);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([d,m,v],E)=>{const T=yo(m);return u(T.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,s)=>{const u=Sh(s),d=uv(this.serializer,u);return t.put(d)})}zs(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),v=(E=d,E.document?new Ge(sn.fromString(E.document.name).popFirst(5)):E.noDocument?Ge.fromSegments(E.noDocument.path):E.unknownDocument?Ge.fromSegments(E.unknownDocument.path):it()).path.toArray();var E;const T={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(m.put(T))}).next(()=>re.waitFor(s))}js(e,t){const r=t.store("mutations"),s=KC(this.serializer),u=new eE(vv.Fs,this.serializer.se);return r.j().next(d=>{const m=new Map;return d.forEach(v=>{var E;let T=null!==(E=m.get(v.userId))&&void 0!==E?E:Ht();dc(this.serializer,v).keys().forEach(O=>T=T.add(O)),m.set(v.userId,T)}),re.forEach(m,(v,E)=>{const T=new kn(E),O=Pm.ie(this.serializer,T),V=u.getIndexManager(T),W=Bm.ie(T,this.serializer,V,u.referenceDelegate);return new QC(s,W,O,V).recalculateAndSaveOverlaysForDocumentKeys(new Ry(t,Zi.ct),v).next()})})}}function ID(n){n.createObjectStore("targetDocuments",{keyPath:Iy}).createIndex("documentTargetsIndex",lm,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jf,{unique:!0}),n.createObjectStore("targetGlobal")}const Hm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Oh{constructor(e,t,r,s,u,d,m,v,E,T,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=u,this.window=d,this.document=m,this.Hs=E,this.Js=T,this.Ys=O,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=V=>Promise.resolve(),!Oh.D())throw new De(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _D(this,s),this.si=t+"main",this.serializer=new ov(v),this.ii=new _o(this.si,this.Ys,new lA(this.serializer)),this.Ds=new qC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KC(this.serializer),this.xs=new aD,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===T&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(X.FAILED_PRECONDITION,Hm);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Zi(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,ue.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,ue.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Xu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return yp(e).get("owner").next(t=>re.resolve(this._i(t)))}mi(e){return zm(e).delete(this.clientId)}gi(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=pn(r,"clientMetadata");return s.j().next(u=>{const d=e.pi(u,18e5),m=u.filter(v=>-1===d.indexOf(v));return re.forEach(m,v=>s.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?re.resolve(!0):yp(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new De(X.FAILED_PRECONDITION,Hm);return!1}}return!(!this.networkEnabled||!this.inForeground)||zm(e).j().next(r=>void 0===this.pi(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ry(t,Zi.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>zm(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return Bm.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gv(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return Pm.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(d=this.Ys)?Ub:14===d?My:13===d?xy:12===d?Vb:11===d?Ay:void it();var d;let m;return this.ii.runTransaction(e,s,u,v=>(m=new Ry(v,this.Vs?this.Vs.next():Zi.ct),"readwrite-primary"===t?this.li(m).next(E=>!!E||this.fi(m)).next(E=>{if(!E)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new De(X.FAILED_PRECONDITION,Ob);return r(m)}).next(E=>this.wi(m).next(()=>E)):this.Pi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Pi(e){return yp(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(X.FAILED_PRECONDITION,Hm)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yp(e).put("owner",t)}static D(){return _o.D()}di(e){const t=yp(e);return t.get("owner").next(r=>this._i(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,Ot.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yp(n){return pn(n,"owner")}function zm(n){return pn(n,"clientMetadata")}function Gm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Gl{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=s}static Di(e,t){let r=Ht(),s=Ht();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new Gl(e,t.fromCache,r,s)}}class tE{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ni(e,t).next(u=>u||this.ki(e,t,s,r)).next(u=>u||this.Oi(e,t))}Ni(e,t){if(_h(t))return re.resolve(null);let r=li(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Xa(t,null,"F"),r=li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Ht(...u);return this.xi.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const E=this.$i(t,m);return this.Mi(t,E,d,v.readTime)?this.Ni(e,Xa(t,null,"F")):this.Fi(e,E,t,v)}))})))}ki(e,t,r,s){return _h(t)||s.isEqual(vt.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(u=>{const d=this.$i(t,u);return this.Mi(t,d,r,s)?this.Oi(e,t):(zw()<=Cr.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sc(t)),this.Fi(e,d,t,Mb(s,-1)))})}$i(e,t){let r=new In(Nl(e));return t.forEach((s,u)=>{ua(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Oi(e,t){return zw()<=Cr.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",sc(t)),this.xi.getDocumentsMatchingQuery(e,t,ls.min())}Fi(e,t,r,s){return this.xi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class bD{constructor(e,t,r,s){this.persistence=e,this.Bi=t,this.serializer=s,this.Li=new Wn(Lt),this.qi=new eu(u=>gh(u),mh),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QC(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function nE(n,e,t,r){return new bD(n,e,t,r)}function rE(n,e){return iE.apply(this,arguments)}function iE(){return iE=(0,ue.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let v=Ht();for(const E of s){d.push(E.batchId);for(const T of E.mutations)v=v.add(T.key)}for(const E of u){m.push(E.batchId);for(const T of E.mutations)v=v.add(T.key)}return t.localDocuments.getDocuments(r,v).next(E=>({Qi:E,removedBatchIds:d,addedBatchIds:m}))})})}),iE.apply(this,arguments)}function wv(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function sE(n,e,t){let r=Ht(),s=Ht();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Pi();return t.forEach((m,v)=>{const E=u.get(m);v.isFoundDocument()!==E.isFoundDocument()&&(s=s.add(m)),v.isNoDocument()&&v.version.isEqual(vt.min())?(e.removeEntry(m,v.readTime),d=d.insert(m,v)):!E.isValidDocument()||v.version.compareTo(E.version)>0||0===v.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(v),d=d.insert(m,v)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",v.version)}),{zi:d,ji:s}})}function vp(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ph(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Ds.getTargetData(r,e).next(u=>u?(s=u,re.resolve(s)):t.Ds.allocateTargetId(r).next(d=>(s=new da(e,d,0,r.currentSequenceNumber),t.Ds.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Li.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ql(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ue.Z)(function*(n,e,t){const r=Qe(n),s=r.Li.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!Xu(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Li=r.Li.remove(e),r.qi.delete(s.target)}),Cv.apply(this,arguments)}function wp(n,e,t){const r=Qe(n);let s=vt.min(),u=Ht();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,v,E){const T=Qe(m),O=T.qi.get(E);return void 0!==O?re.resolve(T.Li.get(O)):T.Ds.getTargetData(v,E)}(r,d,li(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(d,m.targetId).next(v=>{u=v})}).next(()=>r.Bi.getDocumentsMatchingQuery(d,e,t?s:vt.min(),t?u:Ht())).next(m=>(aE(r,kl(e),m),{documents:m,Wi:u})))}function oE(n,e){const t=Qe(n),r=Qe(t.Ds),s=t.Li.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(d=>d?d.target:null))}function Ev(n,e){const t=Qe(n),r=t.Ui.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Ki.getAllFromCollectionGroup(s,e,Mb(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(aE(t,e,s),s))}function aE(n,e,t){let r=n.Ui.get(e)||vt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ui.set(e,r)}function bv(){return bv=(0,ue.Z)(function*(n,e,t,r){const s=Qe(n);let u=Ht(),d=Pi();for(const E of t){const T=e.Hi(E.metadata.name);E.document&&(u=u.add(T));const O=e.Ji(E);O.setReadTime(e.Yi(E.metadata.readTime)),d=d.insert(T,O)}const m=s.Ki.newChangeBuffer({trackRemovals:!0}),v=yield Ph(s,(E=r,li(Oi(sn.fromString(`__bundle__/docs/${E}`)))));var E;return s.persistence.runTransaction("Apply bundle documents","readwrite",E=>sE(E,m,d).next(T=>(m.apply(E),T)).next(T=>s.Ds.removeMatchingKeysForTargetId(E,v.targetId).next(()=>s.Ds.addMatchingKeys(E,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(E,T.zi,T.ji)).next(()=>T.zi)))}),bv.apply(this,arguments)}function uE(n,e){return qm.apply(this,arguments)}function qm(){return qm=(0,ue.Z)(function*(n,e,t=Ht()){const r=yield Ph(n,li(cv(e.bundledQuery))),s=Qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=cr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.xs.saveNamedQuery(u,e);const m=r.withResumeToken(Lr.EMPTY_BYTE_STRING,d);return s.Li=s.Li.insert(m.targetId,m),s.Ds.updateTargetData(u,m).next(()=>s.Ds.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Ds.addMatchingKeys(u,t,r.targetId)).next(()=>s.xs.saveNamedQuery(u,e))})}),qm.apply(this,arguments)}function cE(n,e){return`firestore_clients_${n}_${e}`}function lE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Dv(n,e){return`firestore_targets_${n}_${e}`}class kh{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new De(s.error.code,s.error.message))),d?new kh(e,t,s.state,u):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new De(r.error.code,r.error.message))),u?new Cp(e,r.state,s):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ep{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=vm();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=um(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new Ep(e,u):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Tv{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tv(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sv{constructor(){this.activeTargetIds=vm()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Av{constructor(e,t,r,s,u){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Wn(Lt),this.started=!1,this.ur=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.cr=cE(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new Sv),this.hr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.bi();for(const s of t){if(s===e.nr)continue;const u=e.getItem(cE(e.persistenceKey,s));if(u){const d=Ep.Zi(s,u);d&&(e.rr=e.rr.insert(d.clientId,d))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const s=e.gr(r);s&&e.yr(s)}for(const s of e.ur)e.ir(s);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Dv(this.persistenceKey,e));if(r){const s=Cp.Zi(e,r);s&&(t=s.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Tr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const s=t.br(r.key);return t.Pr(s,null)}{const s=t.Vr(r.key,r.newValue);if(s)return t.Pr(s.clientId,s)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const s=t.Sr(r.key,r.newValue);if(s)return t.Dr(s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Cr(r.key,r.newValue);if(s)return t.Nr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.gr(r.newValue);if(s)return t.yr(s)}}else if(r.key===t.ar){const s=function(u){let d=Zi.ct;if(null!=u)try{const m=JSON.parse(u);_t("number"==typeof m),d=m}catch(m){br("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);s!==Zi.ct&&t.sequenceNumberHandler(s)}else if(r.key===t._r){const s=t.kr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Or(u)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const s=new kh(this.currentUser,e,t,r),u=lE(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Xi())}Tr(e){const t=lE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const s=Dv(this.persistenceKey,e),u=new Cp(e,t,r);this.setItem(s,u.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return Ep.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),s=Number(r[1]);return kh.Zi(new kn(void 0!==r[2]?r[2]:null),s,t)}Cr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return Cp.Zi(s,t)}gr(e){return Tv.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),s=this.pr(this.rr),u=this.pr(r),d=[],m=[];return u.forEach(v=>{s.has(v)||d.push(v)}),s.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Fr(d,m).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=vm();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class dE{constructor(){this.Br=new Sv,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Sv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SD{qr(e){}shutdown(){}}class hE{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Zm=null;function xv(){return null===Zm?Zm=268435456+Math.round(2147483648*Math.random()):Zm++,"0x"+Zm.toString(16)}const fE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pE{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Ti="WebChannelConnection";class AD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,s,u){const d=xv(),m=this.ao(e,t);Oe("RestConnection",`Sending RPC '${e}' ${d}:`,m,r);const v={};return this.ho(v,s,u),this.lo(e,m,v,r).then(E=>(Oe("RestConnection",`Received RPC '${e}' ${d}: `,E),E),E=>{throw mo("RestConnection",`RPC '${e}' ${d} failed with error: `,E,"url: ",m,"request:",r),E})}fo(e,t,r,s,u,d){return this.co(e,t,r,s,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+rh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ao(e,t){return`${this.ro}/v1/${t}:${fE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,s){const u=xv();return new Promise((d,m)=>{const v=new Cb;v.setWithCredentials(!0),v.listenOnce(yb.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case yy.NO_ERROR:const T=v.getResponseJson();Oe(Ti,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case yy.TIMEOUT:Oe(Ti,`RPC '${e}' ${u} timed out`),m(new De(X.DEADLINE_EXCEEDED,"Request time out"));break;case yy.HTTP_ERROR:const O=v.getStatus();if(Oe(Ti,`RPC '${e}' ${u} failed with status:`,O,"response text:",v.getResponseText()),O>0){let V=v.getResponseJson();Array.isArray(V)&&(V=V[0]);const W=V?.error;if(W&&W.status&&W.message){const ie=function(Ae){const xe=Ae.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(xe)>=0?xe:X.UNKNOWN}(W.status);m(new De(ie,W.message))}else m(new De(X.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new De(X.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Oe(Ti,`RPC '${e}' ${u} completed.`)}});const E=JSON.stringify(s);Oe(Ti,`RPC '${e}' ${u} sending request:`,s),v.send(t,"POST",E,r,15)})}wo(e,t,r){const s=xv(),u=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=_y(),m=Wf(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(v.xmlHttpFactory=new wb({})),this.ho(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const E=u.join("");Oe(Ti,`Creating RPC '${e}' stream ${s}: ${E}`,v);const T=d.createWebChannel(E,v);let O=!1,V=!1;const W=new pE({Wr:Ae=>{V?Oe(Ti,`Not sending because RPC '${e}' stream ${s} is closed:`,Ae):(O||(Oe(Ti,`Opening RPC '${e}' stream ${s} transport.`),T.open(),O=!0),Oe(Ti,`RPC '${e}' stream ${s} sending:`,Ae),T.send(Ae))},Hr:()=>T.close()}),ie=(Ae,xe,Et)=>{Ae.listen(xe,Mt=>{try{Et(Mt)}catch(at){setTimeout(()=>{throw at},0)}})};return ie(T,nm.EventType.OPEN,()=>{V||Oe(Ti,`RPC '${e}' stream ${s} transport opened.`)}),ie(T,nm.EventType.CLOSE,()=>{V||(V=!0,Oe(Ti,`RPC '${e}' stream ${s} transport closed`),W.so())}),ie(T,nm.EventType.ERROR,Ae=>{V||(V=!0,mo(Ti,`RPC '${e}' stream ${s} transport errored:`,Ae),W.so(new De(X.UNAVAILABLE,"The operation could not be completed")))}),ie(T,nm.EventType.MESSAGE,Ae=>{var xe;if(!V){const Et=Ae.data[0];_t(!!Et);const at=Et.error||(null===(xe=Et[0])||void 0===xe?void 0:xe.error);if(at){Oe(Ti,`RPC '${e}' stream ${s} received error:`,at);const wt=at.status;let Bt=function(fi){const Gs=ur[fi];if(void 0!==Gs)return tD(Gs)}(wt),Zt=at.message;void 0===Bt&&(Bt=X.INTERNAL,Zt="Unknown error status: "+wt+" with message "+at.message),V=!0,W.so(new De(Bt,Zt)),T.close()}else Oe(Ti,`RPC '${e}' stream ${s} received:`,Et),W.io(Et)}}),ie(m,vb.STAT_EVENT,Ae=>{Ae.stat===Hw.PROXY?Oe(Ti,`RPC '${e}' stream ${s} detected buffering proxy`):Ae.stat===Hw.NOPROXY&&Oe(Ti,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{W.no()},0),W}}function Mv(){return typeof window<"u"?window:null}function Wm(){return typeof document<"u"?document:null}function Ip(n){return new rD(n,!0)}class Rv{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=s,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,t-r);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Km{constructor(e,t,r,s,u,d,m,v){this.Ws=e,this.bo=r,this.Po=s,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Rv(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,ue.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,ue.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,ue.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===X.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Vo===t&&this.Ko(r,s)},r=>{e(()=>{const s=new De(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(s)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(s=>{r(()=>this.Go(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}ko(){var e=this;this.state=5,this.Co.Ao((0,ue.Z)(function*(){e.state=0,e.start()}))}Go(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ov extends Km{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.serializer=u}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function sD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:it(),s=e.targetChange.targetIds||[],u=function(v,E){return v.useProto3Json?(_t(void 0===E||"string"==typeof E),Lr.fromBase64String(E||"")):(_t(void 0===E||E instanceof Uint8Array),Lr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const E=void 0===v.code?X.UNKNOWN:tD(v.code);return new De(E,v.message||"")}(d);t=new Qy(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Vr(n,r.document.name),u=cr(r.document.updateTime),d=r.document.createTime?cr(r.document.createTime):vt.min(),m=new zr({mapValue:{fields:r.document.fields}}),v=Nn.newFoundDocument(s,u,d,m);t=new Mm(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,s=Vr(n,r.document),u=r.readTime?cr(r.readTime):vt.min(),d=Nn.newNoDocument(s,u);t=new Mm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=Vr(n,r.document);t=new Mm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new Bl(r.count||0);t=new Tr(r.targetId,u)}}var v;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return vt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?cr(u.readTime):vt.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=Ki(this.serializer),t.addTarget=function(s,u){let d;const m=u.target;return d=Uy(m)?{documents:Rm(s,m)}:{query:$l(s,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Xy(s,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(d.readTime=Th(s,u.snapshotVersion.toTimestamp())),d}(this.serializer,e);const r=function OC(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Ki(this.serializer),t.removeTarget=e,this.Fo(t)}}class gE extends Km{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.serializer=u,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function oD(n,e){return n&&n.length>0?(_t(void 0!==e),n.map(t=>function(r,s){let u=cr(r.updateTime?r.updateTime:s);return u.isEqual(vt.min())&&(u=cr(s)),new wC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.Zo(r,t)}return _t(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Ki(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lp(this.serializer,r))};this.Fo(t)}}class Pv extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.eu=!1}nu(){if(this.eu)throw new De(X.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new De(X.UNKNOWN,s.toString())})}fo(e,t,r,s){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.fo(e,t,r,u,d,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new De(X.UNKNOWN,u.toString())})}terminate(){this.eu=!0}}class Nv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(br(t),this.ru=!1):Oe("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class MD{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=u,this._u.qr(m=>{r.enqueueAndForget((0,ue.Z)(function*(){var v;ha(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ue.Z)(function*(E){const T=Qe(E);T.du.add(4),yield Zl(T),T.mu.set("Unknown"),T.du.delete(4),yield Nh(T)}),function(E){return v.apply(this,arguments)})(d))}))}),this.mu=new Nv(r,s)}}function Nh(n){return yc.apply(this,arguments)}function yc(){return yc=(0,ue.Z)(function*(n){if(ha(n))for(const e of n.wu)yield e(!0)}),yc.apply(this,arguments)}function Zl(n){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ue.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Fv.apply(this,arguments)}function Lv(n,e){const t=Qe(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),Vv(t)?Dp(t):Kl(t).No()&&bp(t,e))}function Fh(n,e){const t=Qe(n),r=Kl(t);t.fu.delete(e),r.No()&&mE(t,e),0===t.fu.size&&(r.No()?r.$o():ha(t)&&t.mu.set("Unknown"))}function bp(n,e){n.gu.Ot(e.targetId),Kl(n).jo(e)}function mE(n,e){n.gu.Ot(e),Kl(n).Wo(e)}function Dp(n){n.gu=new nD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),Kl(n).start(),n.mu.ou()}function Vv(n){return ha(n)&&!Kl(n).xo()&&n.fu.size>0}function ha(n){return 0===Qe(n).du.size}function Ym(n){n.gu=void 0}function _E(n){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,ue.Z)(function*(n){n.fu.forEach((e,t)=>{bp(n,e)})}),Qm.apply(this,arguments)}function yE(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,ue.Z)(function*(n,e){Ym(n),Vv(n)?(n.mu.au(e),Dp(n)):n.mu.set("Unknown")}),Jm.apply(this,arguments)}function RD(n,e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ue.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof Qy&&2===e.state&&e.cause)try{yield(r=(0,ue.Z)(function*(s,u){const d=u.cause;for(const m of u.targetIds)s.fu.has(m)&&(yield s.remoteSyncer.rejectListen(m,d),s.fu.delete(m),s.gu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xm(n,r)}else if(e instanceof Mm?n.gu.Kt(e):e instanceof Tr?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(vt.min()))try{const r=yield wv(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.gu.Xt(u);return d.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const E=s.fu.get(v);E&&s.fu.set(v,E.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const v=s.fu.get(m);if(!v)return;s.fu.set(m,v.withResumeToken(Lr.EMPTY_BYTE_STRING,v.snapshotVersion)),mE(s,m);const E=new da(v.target,m,1,v.sequenceNumber);bp(s,E)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield Xm(n,r)}var r}),Uv.apply(this,arguments)}function Xm(n,e,t){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,ue.Z)(function*(n,e,t){if(!Xu(e))throw e;n.du.add(1),yield Zl(n),n.mu.set("Offline"),t||(t=()=>wv(n.localStore)),n.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield Nh(n)}))}),Bv.apply(this,arguments)}function jv(n,e){return e().catch(t=>Xm(n,t,e))}function Tp(n){return e_.apply(this,arguments)}function e_(){return e_=(0,ue.Z)(function*(n){const e=Qe(n),t=su(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;OD(e);)try{const s=yield vp(e.localStore,r);if(null===s){0===e.lu.length&&t.$o();break}r=s.batchId,PD(e,s)}catch(s){yield Xm(e,s)}kD(e)&&vE(e)}),e_.apply(this,arguments)}function OD(n){return ha(n)&&n.lu.length<10}function PD(n,e){n.lu.push(e);const t=su(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function kD(n){return ha(n)&&!su(n).xo()&&n.lu.length>0}function vE(n){su(n).start()}function ND(n){return t_.apply(this,arguments)}function t_(){return t_=(0,ue.Z)(function*(n){su(n).tu()}),t_.apply(this,arguments)}function wE(n){return n_.apply(this,arguments)}function n_(){return n_=(0,ue.Z)(function*(n){const e=su(n);for(const t of n.lu)e.Yo(t.mutations)}),n_.apply(this,arguments)}function CE(n,e,t){return $v.apply(this,arguments)}function $v(){return $v=(0,ue.Z)(function*(n,e,t){const r=n.lu.shift(),s=Ih.from(r,e,t);yield jv(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Tp(n)}),$v.apply(this,arguments)}function FD(n,e){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,ue.Z)(function*(n,e){var t;e&&su(n).Jo&&(yield(t=(0,ue.Z)(function*(r,s){if(Am(u=s.code)&&u!==X.ABORTED){const d=r.lu.shift();su(r).Oo(),yield jv(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield Tp(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),kD(n)&&vE(n)}),Hv.apply(this,arguments)}function EE(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,ue.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=ha(t);t.du.add(3),yield Zl(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield Nh(t)}),zv.apply(this,arguments)}function Gv(n,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,ue.Z)(function*(n,e){const t=Qe(n);e?(t.du.delete(2),yield Nh(t)):e||(t.du.add(2),yield Zl(t),t.mu.set("Unknown"))}),Wl.apply(this,arguments)}function Kl(n){return n.yu||(n.yu=function(e,t,r){const s=Qe(e);return s.nu(),new Ov(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Jr:_E.bind(null,n),Zr:yE.bind(null,n),zo:RD.bind(null,n)}),n.wu.push(function(){var e=(0,ue.Z)(function*(t){t?(n.yu.Oo(),Vv(n)?Dp(n):n.mu.set("Unknown")):(yield n.yu.stop(),Ym(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function su(n){return n.pu||(n.pu=function(e,t,r){const s=Qe(e);return s.nu(),new gE(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Jr:ND.bind(null,n),Zr:FD.bind(null,n),Xo:wE.bind(null,n),Zo:CE.bind(null,n)}),n.wu.push(function(){var e=(0,ue.Z)(function*(t){t?(n.pu.Oo(),yield Tp(n)):(yield n.pu.stop(),n.lu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class r_{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,m=new r_(e,t,d,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yl(n,e){if(br("AsyncQueue",`${e}: ${n}`),Xu(n))return new De(X.UNAVAILABLE,`${e}: ${n}`);throw n}class Ql{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=wh(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new Ql(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ql;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class qv{constructor(){this.Iu=new Wn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):it():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lh{constructor(e,t,r,s,u,d,m,v,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,s,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Lh(e,t,Ql.emptySet(t),d,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&aa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class dA{constructor(){this.Eu=void 0,this.listeners=[]}}class IE{constructor(){this.queries=new eu(e=>Pl(e),aa),this.onlineState="Unknown",this.Au=new Set}}function Zv(n,e){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,ue.Z)(function*(n,e){const t=Qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new dA),s)try{u.Eu=yield t.onListen(r)}catch(d){const m=Yl(d,`Initialization of query '${sc(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Ru(t.onlineState),u.Eu&&e.vu(u.Eu)&&Ap(t)}),Wv.apply(this,arguments)}function Kv(n,e){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,ue.Z)(function*(n,e){const t=Qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),Yv.apply(this,arguments)}function Sp(n,e){const t=Qe(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const m of d.listeners)m.vu(s)&&(r=!0);d.Eu=s}}r&&Ap(t)}function LD(n,e,t){const r=Qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Ap(n){n.Au.forEach(e=>{e.next()})}class $s{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Lh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Lh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class VD{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class i_{constructor(e){this.serializer=e}Hi(e){return Vr(this.serializer,e)}Ji(e){return e.metadata.exists?nv(this.serializer,e.document,!1):Nn.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return cr(e)}}class xp{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bE(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=sn.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new i_(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.Hi(s.metadata.name);for(const d of s.metadata.queries){const m=(t.get(d)||Ht()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function Iv(n,e,t,r){return bv.apply(this,arguments)}(e.localStore,new i_(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const s of e.queries)yield uE(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function bE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class DE{constructor(e){this.key=e}}class TE{constructor(e){this.key=e}}class Mp{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Ht(),this.mutatedKeys=Ht(),this.Ku=Nl(e),this.Gu=new Ql(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new qv,s=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,m=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,E="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((T,O)=>{const V=s.get(T),W=ua(this.query,O)?O:null,ie=!!V&&this.mutatedKeys.has(V.key),Ae=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let xe=!1;V&&W?V.data.isEqual(W.data)?ie!==Ae&&(r.track({type:3,doc:W}),xe=!0):this.Wu(V,W)||(r.track({type:2,doc:W}),xe=!0,(v&&this.Ku(W,v)>0||E&&this.Ku(W,E)<0)&&(m=!0)):!V&&W?(r.track({type:0,doc:W}),xe=!0):V&&!W&&(r.track({type:1,doc:V}),xe=!0,(v||E)&&(m=!0)),xe&&(W?(d=d.add(W),u=Ae?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const T="F"===this.query.limitType?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Gu:d,ju:r,Mi:m,mutatedKeys:u}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.ju.Tu();u.sort((E,T)=>function(O,V){const W=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return W(O)-W(V)}(E.type,T.type)||this.Ku(E.doc,T.doc)),this.Hu(r);const d=t?this.Ju():[],m=0===this.Uu.size&&this.current?1:0,v=m!==this.qu;return this.qu=m,0!==u.length||v?{snapshot:new Lh(this.query,e.Gu,s,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:d}:{Yu:d}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new qv,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Ht(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new TE(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new DE(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Ht();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Lh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class s_{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UD{constructor(e){this.key=e,this.ec=!1}}class BD{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nc={},this.sc=new eu(m=>Pl(m),aa),this.ic=new Map,this.rc=new Set,this.oc=new Wn(Ge.comparator),this.uc=new Map,this.cc=new $m,this.ac={},this.hc=new Map,this.lc=gc.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function SE(n,e){return o_.apply(this,arguments)}function o_(){return o_=(0,ue.Z)(function*(n,e){const t=p_(n);let r,s;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.tc();else{const d=yield Ph(t.localStore,li(e));t.isPrimaryClient&&Lv(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield Rp(t,e,r,"current"===m,d.resumeToken)}return s}),o_.apply(this,arguments)}function Rp(n,e,t,r,s){return a_.apply(this,arguments)}function a_(){return a_=(0,ue.Z)(function*(n,e,t,r,s){n.dc=(O,V,W)=>{return(ie=(0,ue.Z)(function*(Ae,xe,Et,Mt){let at=xe.view.zu(Et);at.Mi&&(at=yield wp(Ae.localStore,xe.query,!1).then(({documents:Zt})=>xe.view.zu(Zt,at)));const wt=Mt&&Mt.targetChanges.get(xe.targetId),Bt=xe.view.applyChanges(at,Ae.isPrimaryClient,wt);return h_(Ae,xe.targetId,Bt.Yu),Bt.snapshot}),function(Ae,xe,Et,Mt){return ie.apply(this,arguments)})(n,O,V,W);var ie};const u=yield wp(n.localStore,e,!0),d=new Mp(e,u.Wi),m=d.zu(u.documents),v=bh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),E=d.applyChanges(m,n.isPrimaryClient,v);h_(n,t,E.Yu);const T=new s_(e,t,d);return n.sc.set(e,T),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),E.snapshot}),a_.apply(this,arguments)}function Qv(n,e){return Op.apply(this,arguments)}function Op(){return Op=(0,ue.Z)(function*(n,e){const t=Qe(n),r=t.sc.get(e),s=t.ic.get(r.targetId);if(s.length>1)return t.ic.set(r.targetId,s.filter(u=>!aa(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ql(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Fh(t.remoteStore,r.targetId),Jl(t,r.targetId)}).catch(ds))):(Jl(t,r.targetId),yield ql(t.localStore,r.targetId,!0))}),Op.apply(this,arguments)}function Pp(){return Pp=(0,ue.Z)(function*(n,e,t){const r=c0(n);try{const s=yield function(u,d){const m=Qe(u),v=Bn.now(),E=d.reduce((V,W)=>V.add(W.key),Ht());let T,O;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let W=Pi(),ie=Ht();return m.Ki.getEntries(V,E).next(Ae=>{W=Ae,W.forEach((xe,Et)=>{Et.isValidDocument()||(ie=ie.add(xe))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,W)).next(Ae=>{T=Ae;const xe=[];for(const Et of d){const Mt=EC(Et,T.get(Et.key).overlayedDocument);null!=Mt&&xe.push(new ca(Et.key,Mt,Ny(Mt.value.mapValue),jn.exists(!0)))}return m.mutationQueue.addMutationBatch(V,v,xe,d)}).next(Ae=>{O=Ae;const xe=Ae.applyToLocalDocumentSet(T,ie);return m.documentOverlayCache.saveOverlays(V,Ae.batchId,xe)})}).then(()=>({batchId:O.batchId,changes:jy(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,m){let v=u.ac[u.currentUser.toKey()];v||(v=new Wn(Lt)),v=v.insert(d,m),u.ac[u.currentUser.toKey()]=v}(r,s.batchId,t),yield Qi(r,s.changes),yield Tp(r.remoteStore)}catch(s){const u=Yl(s,"Failed to persist write");t.reject(u)}}),Pp.apply(this,arguments)}function u_(n,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,ue.Z)(function*(n,e){const t=Qe(n);try{const r=yield function TD(n,e){const t=Qe(n),r=e.snapshotVersion;let s=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Ki.newChangeBuffer({trackRemovals:!0});s=t.Li;const m=[];e.targetChanges.forEach((T,O)=>{const V=s.get(O);if(!V)return;m.push(t.Ds.removeMatchingKeys(u,T.removedDocuments,O).next(()=>t.Ds.addMatchingKeys(u,T.addedDocuments,O)));let W=V.withSequenceNumber(u.currentSequenceNumber);var ie,Ae,xe;e.targetMismatches.has(O)?W=W.withResumeToken(Lr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):T.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(T.resumeToken,r)),s=s.insert(O,W),Ae=W,xe=T,(0===(ie=V).resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&m.push(t.Ds.updateTargetData(u,W))});let v=Pi(),E=Ht();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(sE(u,d,e.documentUpdates).next(T=>{v=T.zi,E=T.ji})),!r.isEqual(vt.min())){const T=t.Ds.getLastRemoteSnapshotVersion(u).next(O=>t.Ds.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return re.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,E)).next(()=>v)}).then(u=>(t.Li=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.uc.get(u);d&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.ec=!0:s.modifiedDocuments.size>0?_t(d.ec):s.removedDocuments.size>0&&(_t(d.ec),d.ec=!1))}),yield Qi(t,r,e)}catch(r){yield ds(r)}}),Jv.apply(this,arguments)}function xE(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.sc.forEach((u,d)=>{const m=d.view.Ru(e);m.snapshot&&s.push(m.snapshot)}),function(u,d){const m=Qe(u);m.onlineState=d;let v=!1;m.queries.forEach((E,T)=>{for(const O of T.listeners)O.Ru(d)&&(v=!0)}),v&&Ap(m)}(r.eventManager,e),s.length&&r.nc.zo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jD(n,e,t){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,ue.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.uc.get(e),u=s&&s.key;if(u){let d=new Wn(Ge.comparator);d=d.insert(u,Nn.newNoDocument(u,vt.min()));const m=Ht().add(u),v=new cp(vt.min(),new Map,new In(Lt),d,m);yield u_(r,v),r.oc=r.oc.remove(u),r.uc.delete(e),di(r)}else yield ql(r.localStore,e,!1).then(()=>Jl(r,e,t)).catch(ds)}),Xv.apply(this,arguments)}function ME(n,e){return kp.apply(this,arguments)}function kp(){return kp=(0,ue.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const s=yield function DD(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Ki.newChangeBuffer({trackRemovals:!0});return function(d,m,v,E){const T=v.batch,O=T.keys();let V=re.resolve();return O.forEach(W=>{V=V.next(()=>E.getEntry(m,W)).next(ie=>{const Ae=v.docVersions.get(W);_t(null!==Ae),ie.version.compareTo(Ae)<0&&(T.applyToRemoteDocument(ie,v),ie.isValidDocument()&&(ie.setReadTime(v.commitVersion),E.addEntry(ie)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ht();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(m=m.add(d.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);d_(t,r,null),e0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qi(t,s)}catch(s){yield ds(s)}}),kp.apply(this,arguments)}function RE(n,e,t){return c_.apply(this,arguments)}function c_(){return c_=(0,ue.Z)(function*(n,e,t){const r=Qe(n);try{const s=yield function(u,d){const m=Qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return m.mutationQueue.lookupMutationBatch(v,d).next(T=>(_t(null!==T),E=T.keys(),m.mutationQueue.removeMutationBatch(v,T))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,E,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>m.localDocuments.getDocuments(v,E))})}(r.localStore,e);d_(r,e,t),e0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qi(r,s)}catch(s){yield ds(s)}}),c_.apply(this,arguments)}function l_(){return l_=(0,ue.Z)(function*(n,e){const t=Qe(n);ha(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.hc.get(r)||[];s.push(e),t.hc.set(r,s)}catch(r){const s=Yl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),l_.apply(this,arguments)}function e0(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function d_(n,e,t){const r=Qe(n);let s=r.ac[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function Jl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||PE(n,r)})}function PE(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Fh(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),di(n))}function h_(n,e,t){for(const r of t)r instanceof DE?(n.cc.addReference(r.key,e),$D(n,r)):r instanceof TE?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||PE(n,r.key)):it()}function $D(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.rc.add(r),di(n))}function di(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(sn.fromString(e)),r=n.lc.next();n.uc.set(r,new UD(t)),n.oc=n.oc.insert(t,r),Lv(n.remoteStore,new da(li(Oi(t.path)),r,2,Zi.ct))}}function Qi(n,e,t){return t0.apply(this,arguments)}function t0(){return t0=(0,ue.Z)(function*(n,e,t){const r=Qe(n),s=[],u=[],d=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,v)=>{d.push(r.dc(v,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,E?.fromCache?"not-current":"current"),E){s.push(E);const T=Gl.Di(v.targetId,E);u.push(T)}}))}),yield Promise.all(d),r.nc.zo(s),yield(m=(0,ue.Z)(function*(v,E){const T=Qe(v);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>re.forEach(E,V=>re.forEach(V.Vi,W=>T.persistence.referenceDelegate.addReference(O,V.targetId,W)).next(()=>re.forEach(V.Si,W=>T.persistence.referenceDelegate.removeReference(O,V.targetId,W)))))}catch(O){if(!Xu(O))throw O;Oe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of E){const V=O.targetId;if(!O.fromCache){const W=T.Li.get(V),Ae=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);T.Li=T.Li.insert(V,Ae)}}}),function(v,E){return m.apply(this,arguments)})(r.localStore,u))}),t0.apply(this,arguments)}function HD(n,e){return kE.apply(this,arguments)}function kE(){return kE=(0,ue.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield rE(t.localStore,e);t.currentUser=e,(s=t).hc.forEach(d=>{d.forEach(m=>{m.reject(new De(X.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qi(t,r.Qi)}var s}),kE.apply(this,arguments)}function hA(n,e){const t=Qe(n),r=t.uc.get(e);if(r&&r.ec)return Ht().add(r.key);{let s=Ht();const u=t.ic.get(e);if(!u)return s;for(const d of u){const m=t.sc.get(d);s=s.unionWith(m.view.Qu)}return s}}function NE(n,e){return Np.apply(this,arguments)}function Np(){return Np=(0,ue.Z)(function*(n,e){const t=Qe(n),r=yield wp(t.localStore,e.query,!0),s=e.view.Xu(r);return t.isPrimaryClient&&h_(t,e.targetId,s.Yu),s}),Np.apply(this,arguments)}function Fp(n,e){return n0.apply(this,arguments)}function n0(){return n0=(0,ue.Z)(function*(n,e){const t=Qe(n);return Ev(t.localStore,e).then(r=>Qi(t,r))}),n0.apply(this,arguments)}function r0(n,e,t,r){return s0.apply(this,arguments)}function s0(){return s0=(0,ue.Z)(function*(n,e,t,r){const s=Qe(n),u=yield function(d,m){const v=Qe(d),E=Qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.In(T,m).next(O=>O?v.localDocuments.getDocuments(T,O):re.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Tp(s.remoteStore):"acknowledged"===t||"rejected"===t?(d_(s,e,r||null),e0(s,e),m=e,Qe(Qe(s.localStore).mutationQueue).En(m)):it(),yield Qi(s,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),s0.apply(this,arguments)}function o0(){return o0=(0,ue.Z)(function*(n,e){const t=Qe(n);if(p_(t),c0(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield LE(t,r.toArray());t.fc=!0,yield Gv(t.remoteStore,!0);for(const u of s)Lv(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let s=Promise.resolve();t.ic.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(Jl(t,d),ql(t.localStore,d,!0))),Fh(t.remoteStore,d)}),yield s,yield LE(t,r),function(u){const d=Qe(u);d.uc.forEach((m,v)=>{Fh(d.remoteStore,v)}),d.cc.ls(),d.uc=new Map,d.oc=new Wn(Ge.comparator)}(t),t.fc=!1,yield Gv(t.remoteStore,!1)}}),o0.apply(this,arguments)}function LE(n,e,t){return a0.apply(this,arguments)}function a0(){return a0=(0,ue.Z)(function*(n,e,t){const r=Qe(n),s=[],u=[];for(const d of e){let m;const v=r.ic.get(d);if(v&&0!==v.length){m=yield Ph(r.localStore,li(v[0]));for(const E of v){const T=r.sc.get(E),O=yield NE(r,T);O.snapshot&&u.push(O.snapshot)}}else{const E=yield oE(r.localStore,d);m=yield Ph(r.localStore,E),yield Rp(r,f_(E),d,!1,m.resumeToken)}s.push(m)}return r.nc.zo(u),s}),a0.apply(this,arguments)}function f_(n){return mC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VE(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).bi()}function UE(n,e,t,r){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,ue.Z)(function*(n,e,t,r){const s=Qe(n);if(s.fc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=s.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Ev(s.localStore,kl(u[0])),m=cp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Lr.EMPTY_BYTE_STRING);yield Qi(s,d,m);break}case"rejected":yield ql(s.localStore,e,!0),Jl(s,e,r);break;default:it()}}),Vh.apply(this,arguments)}function u0(n,e,t){return BE.apply(this,arguments)}function BE(){return BE=(0,ue.Z)(function*(n,e,t){const r=p_(n);if(r.fc){for(const s of e){if(r.ic.has(s)){Oe("SyncEngine","Adding an already active target "+s);continue}const u=yield oE(r.localStore,s),d=yield Ph(r.localStore,u);yield Rp(r,f_(u),d.targetId,!1,d.resumeToken),Lv(r.remoteStore,d)}for(const s of t)r.ic.has(s)&&(yield ql(r.localStore,s,!1).then(()=>{Fh(r.remoteStore,s),Jl(r,s)}).catch(ds))}}),BE.apply(this,arguments)}function p_(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=u_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jD.bind(null,e),e.nc.zo=Sp.bind(null,e.eventManager),e.nc.wc=LD.bind(null,e.eventManager),e}function c0(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ME.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RE.bind(null,e),e}class ou{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.serializer=Ip(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return nE(this.persistence,new tE,e.initialUser,this.serializer)}createPersistence(e){return new eE(vv.Fs,this.serializer)}createSharedClientState(e){return new dE}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class l0 extends ou{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield c0(r.mc.syncEngine),yield Tp(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return nE(this.persistence,new tE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new gD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Xw(t,this.persistence);return new kb(e.asyncQueue,r)}createPersistence(e){const t=Gm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Yi.withCacheSize(this.cacheSizeBytes):Yi.DEFAULT;return new Oh(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Mv(),Wm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new dE}}class d0 extends l0{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e);const s=r.mc.syncEngine;r.sharedClientState instanceof Av&&(r.sharedClientState.syncEngine={$r:r0.bind(null,s),Mr:UE.bind(null,s),Fr:u0.bind(null,s),bi:VE.bind(null,s),Or:Fp.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var u=(0,ue.Z)(function*(d){yield function FE(n,e){return o0.apply(this,arguments)}(r.mc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Mv();if(!Av.D(t))throw new De(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Gm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Av(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class vc{initialize(e,t){var r=this;return(0,ue.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>xE(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=HD.bind(null,r.syncEngine),yield Gv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new IE}createDatastore(e){const t=Ip(e.databaseInfo.databaseId),r=new AD(e.databaseInfo);return new Pv(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>xE(this.syncEngine,m,0),d=hE.D()?new hE:new SD,new MD(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,m,v,E){const T=new BD(r,s,u,d,m,v);return E&&(T.fc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const r=Qe(t);Oe("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield Zl(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zD(n,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class g_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fA{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),s=Number(r);isNaN(s)&&e.Rc(`length string (${r}) is not valid number`);const u=yield e.vc(s);return new VD(JSON.parse(u),t.length+s)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,ue.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class GD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ue.Z)(function*(u,d){const m=Qe(u),v=Ki(m.serializer)+"/documents",E={documents:d.map(W=>jl(m.serializer,W))},T=yield m.fo("BatchGetDocuments",v,E,d.length),O=new Map;T.forEach(W=>{const ie=function MC(n,e){return"found"in e?function(t,r){_t(!!r.found);const s=Vr(t,r.found.name),u=cr(r.found.updateTime),d=r.found.createTime?cr(r.found.createTime):vt.min(),m=new zr({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(s,u,d,m)}(n,e):"missing"in e?function(t,r){_t(!!r.missing),_t(!!r.readTime);const s=Vr(t,r.missing),u=cr(r.readTime);return Nn.newNoDocument(s,u)}(n,e):it()}(m.serializer,W);O.set(ie.key.toString(),ie)});const V=[];return d.forEach(W=>{const ie=O.get(W.toString());_t(!!ie),V.push(ie)}),V}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new Tm(u,e.precondition(u)))}),yield(r=(0,ue.Z)(function*(s,u){const d=Qe(s),m=Ki(d.serializer)+"/documents",v={writes:u.map(E=>lp(d.serializer,E))};yield d.co("Commit",m,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new De(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qD{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Vc=r.maxAttempts,this.Co=new Rv(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,ue.Z)(function*(){const t=new GD(e.datastore),r=e.Dc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Cc(u)}))}).catch(s=>{e.Cc(s)})}))}Dc(e){try{const t=this.updateFunction(e);return!Tl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Am(t)}return!1}}class ZD{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=kn.UNAUTHENTICATED,this.clientId=vy.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ue.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Yl(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Lp(n,e){return m_.apply(this,arguments)}function m_(){return m_=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ue.Z)(function*(u){r.isEqual(u)||(yield rE(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),m_.apply(this,arguments)}function h0(n,e){return __.apply(this,arguments)}function __(){return __=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield p0(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>EE(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>EE(e.remoteStore,u)),n._onlineComponents=e}),__.apply(this,arguments)}function f0(n){return"FirebaseError"===n.name?n.code===X.FAILED_PRECONDITION||n.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function p0(n){return g0.apply(this,arguments)}function g0(){return g0=(0,ue.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Lp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!f0(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),yield Lp(n,new ou)}}else Oe("FirestoreClient","Using default OfflineComponentProvider"),yield Lp(n,new ou);return n._offlineComponents}),g0.apply(this,arguments)}function Vp(n){return m0.apply(this,arguments)}function m0(){return m0=(0,ue.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield h0(n,n._uninitializedComponentsProvider._online)):(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield h0(n,new vc))),n._onlineComponents}),m0.apply(this,arguments)}function _0(n){return p0(n).then(e=>e.persistence)}function Up(n){return p0(n).then(e=>e.localStore)}function y_(n){return Vp(n).then(e=>e.remoteStore)}function v_(n){return Vp(n).then(e=>e.syncEngine)}function Uh(n){return HE.apply(this,arguments)}function HE(){return HE=(0,ue.Z)(function*(n){const e=yield Vp(n),t=e.eventManager;return t.onListen=SE.bind(null,e.syncEngine),t.onUnlisten=Qv.bind(null,e.syncEngine),t}),HE.apply(this,arguments)}function WD(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(s,u,d,m,v){const E=new g_({next:O=>{u.enqueueAndForget(()=>Kv(s,T));const V=O.docs.has(d);!V&&O.fromCache?v.reject(new De(X.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&O.fromCache&&m&&"server"===m.source?v.reject(new De(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(O)},error:O=>v.reject(O)}),T=new $s(Oi(d.path),E,{includeMetadataChanges:!0,xu:!0});return Zv(s,T)}(yield Uh(n),n.asyncQueue,e,t,r)})),r.promise}function KD(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(s,u,d,m,v){const E=new g_({next:O=>{u.enqueueAndForget(()=>Kv(s,T)),O.fromCache&&"server"===m.source?v.reject(new De(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(O)},error:O=>v.reject(O)}),T=new $s(d,E,{includeMetadataChanges:!0,xu:!0});return Zv(s,T)}(yield Uh(n),n.asyncQueue,e,t,r)})),r.promise}const YD=new Map;function C_(n,e,t){if(!t)throw new De(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Bp(n,e,t,r){if(!0===e&&!0===r)throw new De(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function y0(n){if(!Ge.isDocumentKey(n))throw new De(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function v0(n){if(Ge.isDocumentKey(n))throw new De(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function w0(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=w0(n);throw new De(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function C0(n,e){if(e<=0)throw new De(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class GE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new De(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Bp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E_{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ib;switch(t.type){case"firstParty":return new Tb(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YD.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),YD.delete(e),t.terminate())}(this),Promise.resolve()}}class $n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class hs extends hi{constructor(e,t,r){super(e,t,Oi(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Ge(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function qE(n,e,...t){if(n=(0,Ot.m9)(n),C_("collection","path",e),n instanceof E_){const r=sn.fromString(e,...t);return v0(r),new hs(n,null,r)}{if(!(n instanceof $n||n instanceof hs))throw new De(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return v0(r),new hs(n.firestore,null,r)}}function E0(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=vy.A()),C_("doc","path",e),n instanceof E_){const r=sn.fromString(e,...t);return y0(r),new $n(n,null,new Ge(r))}{if(!(n instanceof $n||n instanceof hs))throw new De(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return y0(r),new $n(n.firestore,n instanceof hs?n.converter:null,new Ge(r))}}function JD(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof $n||n instanceof hs)&&(e instanceof $n||e instanceof hs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function I0(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof hi&&e instanceof hi&&n.firestore===e.firestore&&aa(n._query,e._query)&&n.converter===e.converter}class XD{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Rv(this,"async_queue_retry"),this.qc=()=>{const t=Wm();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Wm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Wm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Dr;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,ue.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Xu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,br("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const s=r_.createAndSchedule(this,e,t,r,u=>this.Qc(u));return this.$c.push(s),s}Uc(){this.Mc&&it()}verifyOperationInProgress(){}zc(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function b0(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class CA{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fn extends E_{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new XD,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZE(this),this._firestoreClient.terminate()}}function dn(n){return n._firestoreClient||ZE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ZE(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Hb(n._databaseId,m,n._persistenceKey,(E=s).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,E.useFetchStreams));var m,E;n._firestoreClient=new ZD(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function rT(n,e,t){const r=new Dr;return n.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield Lp(n,t),yield h0(n,e),r.resolve()}catch(s){const u=s;if(!f0(u))throw u;mo("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function A0(n){if(n._initialized||n._terminated)throw new De(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eo(Lr.fromBase64String(e))}catch(t){throw new De(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Eo(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class au{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xl{constructor(e){this._methodName=e}}class Bh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const uu=/^__.*__$/;class wc{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ca(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vl(e,this.data,t,this.fieldTransforms)}}class x0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ca(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function I_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class $p{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Jc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new $p(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Zc({path:r,ta:!1});return s.ea(e),s}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Zc({path:r,ta:!1});return s.Jc(),s}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return td(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(I_(this.Yc)&&uu.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class aT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ip(e)}ua(e,t,r,s=!1){return new $p({Yc:e,methodName:t,oa:r,path:yr.emptyPath(),ta:!1,ra:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jh(n){const e=n._freezeSettings(),t=Ip(n._databaseId);return new aT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function b_(n,e,t,r,s,u={}){const d=n.ua(u.merge||u.mergeFields?2:0,e,t,s);T_("Data must be an object, but it was:",d,r);const m=O0(r,d);let v,E;if(u.merge)v=new Wi(d.fieldMask),E=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const O of u.mergeFields){const V=$h(e,O,t);if(!d.contains(V))throw new De(X.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);k0(T,V)||T.push(V)}v=new Wi(T),E=d.fieldTransforms.filter(O=>v.covers(O.field))}else v=null,E=d.fieldTransforms;return new wc(new zr(m),v,E)}class Hp extends Xl{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hp}}function YE(n,e,t){return new $p({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class M0 extends Xl{_toFieldTransform(e){return new Eh(e.path,new oc)}isEqual(e){return e instanceof M0}}class QE extends Xl{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=YE(this,e,!0),r=this.ca.map(u=>cu(u,t)),s=new tu(r);return new Eh(e.path,s)}isEqual(e){return this===e}}class IA extends Xl{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=YE(this,e,!0),r=this.ca.map(u=>cu(u,t)),s=new ac(r);return new Eh(e.path,s)}isEqual(e){return this===e}}class JE extends Xl{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Ll(e.serializer,yC(e.serializer,this.aa));return new Eh(e.path,t)}isEqual(e){return this===e}}function R0(n,e,t,r){const s=n.ua(1,e,t);T_("Data must be an object, but it was:",s,r);const u=[],d=zr.empty();Al(r,(v,E)=>{const T=ed(e,v,t);E=(0,Ot.m9)(E);const O=s.na(T);if(E instanceof Hp)u.push(T);else{const V=cu(E,O);null!=V&&(u.push(T),d.set(T,V))}});const m=new Wi(u);return new x0(d,m,s.fieldTransforms)}function D_(n,e,t,r,s,u){const d=n.ua(1,e,t),m=[$h(e,r,t)],v=[s];if(u.length%2!=0)throw new De(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push($h(e,u[V])),v.push(u[V+1]);const E=[],T=zr.empty();for(let V=m.length-1;V>=0;--V)if(!k0(E,m[V])){const W=m[V];let ie=v[V];ie=(0,Ot.m9)(ie);const Ae=d.na(W);if(ie instanceof Hp)E.push(W);else{const xe=cu(ie,Ae);null!=xe&&(E.push(W),T.set(W,xe))}}const O=new Wi(E);return new x0(T,O,d.fieldTransforms)}function uT(n,e,t,r=!1){return cu(t,n.ua(r?4:3,e))}function cu(n,e){if(P0(n=(0,Ot.m9)(n)))return T_("Unsupported field value:",e,n),O0(n,e);if(n instanceof Xl)return function(t,r){if(!I_(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let m=cu(d,r.sa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yC(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Bn.fromDate(t);return{timestampValue:Th(r.serializer,s)}}if(t instanceof Bn){const s=new Bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Th(r.serializer,s)}}if(t instanceof Bh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Eo)return{bytesValue:Xy(r.serializer,t._byteString)};if(t instanceof $n){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ia(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:AC(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${w0(t)}`)}(n,e)}function O0(n,e){const t={};return Bb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Al(n,(r,s)=>{const u=cu(s,e.Xc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function P0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof Bh||n instanceof Eo||n instanceof $n||n instanceof Xl)}function T_(n,e,t){if(!P0(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=w0(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function $h(n,e,t){if((e=(0,Ot.m9)(e))instanceof au)return e._internalPath;if("string"==typeof e)return ed(n,e);throw td("Field path arguments must be of type string or ",n,!1,void 0,t)}const XE=new RegExp("[~\\*/\\[\\]]");function ed(n,e,t){if(e.search(XE)>=0)throw td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new au(...e.split("."))._internalPath}catch{throw td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function td(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${s}`),v+=")"),new De(X.INVALID_ARGUMENT,m+n+v)}function k0(n,e){return n.some(t=>t.isEqual(e))}class zp{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(N0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cT extends zp{data(){return super.data()}}function N0(n,e){return"string"==typeof e?ed(n,e):e instanceof au?e._internalPath:e._delegate._internalPath}function lT(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eI{}class Hh extends eI{}function Cc(n,e,...t){let r=[];e instanceof eI&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof qp).length,d=s.filter(m=>m instanceof Gp).length;if(u>1||u>0&&d>0)throw new De(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Gp extends Hh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gp(e,t,r)}_apply(e){const t=this._parse(e);return Wp(e._query,t),new hi(e.firestore,e.converter,ic(e._query,t))}_parse(e){const t=jh(e.firestore);return function(s,u,d,m,v,E,T){let O;if(v.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new De(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){R_(T,E);const V=[];for(const W of T)V.push(M_(m,s,W));O={arrayValue:{values:V}}}else O=M_(m,s,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||R_(T,E),O=uT(d,"where",T,"in"===E||"not-in"===E);return tn.create(v,E,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qp extends eI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const d=s.getFlattenedFilters();for(const m of d)Wp(u,m),u=ic(u,m)}(e._query,t),new hi(e.firestore,e.converter,ic(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tI extends Hh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tI(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new De(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new fh(s,u);return function(m,v){if(null===Gr(m)){const E=oa(m);null!==E&&fT(0,E,v.field)}}(r,d),d}(e._query,this._field,this._direction);return new hi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new vo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class S_ extends Hh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new S_(e,t,r)}_apply(e){return new hi(e.firestore,e.converter,Xa(e._query,this._limit,this._limitType))}}class x_ extends Hh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new x_(e,t,r)}_apply(e){const t=rI(e,this.type,this._docOrFields,this._inclusive);return new hi(e.firestore,e.converter,(s=t,new vo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class Zp extends Hh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Zp(e,t,r)}_apply(e){const t=rI(e,this.type,this._docOrFields,this._inclusive);return new hi(e.firestore,e.converter,(s=t,new vo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function rI(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof zp)return function(s,u,d,m,v){if(!m)throw new De(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const E=[];for(const T of qr(s))if(T.field.isKeyField())E.push(ch(u,m.key));else{const O=m.data.field(T.field);if(Vs(O))throw new De(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const V=T.field.canonicalString();throw new De(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}E.push(O)}return new rc(E,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=jh(n.firestore);return function(u,d,m,v,E,T){const O=u.explicitOrderBy;if(E.length>O.length)throw new De(X.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let W=0;W<E.length;W++){const ie=E[W];if(O[W].field.isKeyField()){if("string"!=typeof ie)throw new De(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ie}`);if(!yh(u)&&-1!==ie.indexOf("/"))throw new De(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ie}' contains a slash.`);const Ae=u.path.child(sn.fromString(ie));if(!Ge.isDocumentKey(Ae))throw new De(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const xe=new Ge(Ae);V.push(ch(d,xe))}else{const Ae=uT(m,v,ie);V.push(Ae)}}return new rc(V,T)}(n._query,n.firestore._databaseId,s,e,t,r)}}function M_(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new De(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yh(e)&&-1!==t.indexOf("/"))throw new De(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ge.isDocumentKey(r))throw new De(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ch(n,new Ge(r))}if(t instanceof $n)return ch(n,t._key);throw new De(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${w0(t)}.`)}function R_(n,e){if(!Array.isArray(n)||0===n.length)throw new De(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wp(n,e){if(e.isInequality()){const r=oa(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new De(X.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=Gr(n);null!==u&&fT(0,s,u)}const t=function(r,s){for(const u of r)for(const d of u.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(X.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function fT(n,e,t){if(!t.isEqual(e))throw new De(X.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class iI{convertValue(e,t="none"){switch(Rl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return Al(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Bh(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const t=ec(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);_t(dp(r));const s=new Ya(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||br(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function V0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class sI extends iI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}class Ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends zp{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(N0("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Kp extends fa{data(e={}){return super.data(e)}}class Ic{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ec(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kp(this._firestore,this._userDataWriter,r.key,r,new Ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Kp(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ec(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const m=new Kp(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ec(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,E=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),E=u.indexOf(d.doc.key)),{type:oI(d.type),doc:m,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function O_(n,e){return n instanceof fa&&e instanceof fa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ic&&e instanceof Ic&&n._firestore===e._firestore&&I0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class lu extends iI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function aI(n,e,t){n=Wt(n,$n);const r=Wt(n.firestore,Fn),s=V0(n.converter,e,t);return Yp(r,[b_(jh(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,jn.none())])}function uI(n,e,t,...r){n=Wt(n,$n);const s=Wt(n.firestore,Fn),u=jh(s);let d;return d="string"==typeof(e=(0,Ot.m9)(e))||e instanceof au?D_(u,"updateDoc",n._key,e,t,r):R0(u,"updateDoc",n._key,e),Yp(s,[d.toMutation(n._key,jn.exists(!0))])}function wT(n,...e){var t,r,s;n=(0,Ot.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||b0(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(b0(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[d+2]=null===(s=O.complete)||void 0===s?void 0:s.bind(O)}let v,E,T;if(n instanceof $n)E=Wt(n.firestore,Fn),T=Oi(n._key.path),v={next:O=>{e[d]&&e[d](B0(E,n,O))},error:e[d+1],complete:e[d+2]};else{const O=Wt(n,hi);E=Wt(O.firestore,Fn),T=O._query;const V=new lu(E);v={next:W=>{e[d]&&e[d](new Ic(E,V,O,W))},error:e[d+1],complete:e[d+2]},lT(n._query)}return function(O,V,W,ie){const Ae=new g_(ie),xe=new $s(V,Ae,W);return O.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return Zv(yield Uh(O),xe)})),()=>{Ae.yc(),O.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return Kv(yield Uh(O),xe)}))}}(dn(E),T,m,v)}function Yp(n,e){return function(t,r){const s=new Dr;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function AE(n,e,t){return Pp.apply(this,arguments)}(yield v_(t),r,s)})),s.promise}(dn(n),e)}function B0(n,e,t){const r=t.docs.get(e._key),s=new lu(n);return new fa(n,s,e._key,r,new Ec(t.hasPendingWrites,t.fromCache),e.converter)}const h={maxAttempts:5};class g{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jh(e)}set(e,t,r){this._verifyNotCommitted();const s=y(e,this._firestore),u=V0(s.converter,t,r),d=b_(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,jn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=y(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof au?D_(this._dataReader,"WriteBatch.update",u._key,t,r,s):R0(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=y(e,this._firestore);return this._mutations=this._mutations.concat(new Ul(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function y(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new De(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class C extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jh(e)}get(e){const t=y(e,this._firestore),r=new sI(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return it();const u=s[0];if(u.isFoundDocument())return new zp(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new zp(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const s=y(e,this._firestore),u=V0(s.converter,t,r),d=b_(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=y(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof au?D_(this._dataReader,"Transaction.update",u._key,t,r,s):R0(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=y(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=y(e,this._firestore),r=new lu(this._firestore);return super.get(e).then(s=>new fa(this._firestore,r,t._key,s._document,new Ec(!1,!1),t.converter))}}function N(...n){return new QE("arrayUnion",n)}function H(...n){return new IA("arrayRemove",n)}!function(n,e=!0){rh=wr.SDK_VERSION,(0,wr._registerComponent)(new Gn.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),d=new Fn(new Db(t.getProvider("auth-internal")),new Sb(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new De(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ya(m.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,wr.registerVersion)(El,"3.10.0",n),(0,wr.registerVersion)(El,"3.10.0","esm2017")}();function Re(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vt(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function Hn(){if(!function Oy(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}class zn{constructor(e){this._delegate=e}static fromBase64String(e){return Hn(),new zn(Eo.fromBase64String(e))}static fromUint8Array(e){return Vt(),new zn(Eo.fromUint8Array(e))}toBase64(){return Hn(),this._delegate.toBase64()}toUint8Array(){return Vt(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cI(n){return function Z1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class W1{enableIndexedDbPersistence(e,t){return function D0(n,e){A0(n=Wt(n,Fn));const t=dn(n);if(t._uninitializedComponentsProvider)throw new De(X.FAILED_PRECONDITION,"SDK cache is already specified.");mo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new vc;return rT(t,s,new l0(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function nT(n){A0(n=Wt(n,Fn));const e=dn(n);if(e._uninitializedComponentsProvider)throw new De(X.FAILED_PRECONDITION,"SDK cache is already specified.");mo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new vc;return rT(e,r,new d0(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Hs(n){if(n._initialized&&!n._terminated)throw new De(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(r){if(!_o.D())return Promise.resolve();const s=r+"main";yield _o.delete(s)}),function(r){return t.apply(this,arguments)})(Gm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class FA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function QD(n,e,t,r={}){var s;const u=(n=Wt(n,E_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&mo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=kn.MOCK_USER;else{d=(0,Ot.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new De(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new kn(v)}n._authCredentials=new bb(new Gw(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function T0(n){return function zE(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield _0(n),t=yield y_(n);return e.setNetworkEnabled(!0),function(r){const s=Qe(r);return s.du.delete(0),Nh(s)}(t)}))}(dn(n=Wt(n,Fn)))}(this._delegate)}disableNetwork(){return function sT(n){return function pA(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield _0(n),t=yield y_(n);return e.setNetworkEnabled(!1),(r=(0,ue.Z)(function*(s){const u=Qe(s);u.du.add(0),yield Zl(u),u.mu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(dn(n=Wt(n,Fn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Bp("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iT(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function OE(n,e){return l_.apply(this,arguments)}(yield v_(e),t)})),t.promise}(dn(n=Wt(n,Fn)))}(this._delegate)}onSnapshotsInSync(e){return function OA(n,e){return function _A(n,e){const t=new g_(e);return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return r=yield Uh(n),s=t,Qe(r).Au.add(s),void s.next();var r,s})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return r=yield Uh(n),s=t,void Qe(r).Au.delete(s);var r,s}))}}(dn(n=Wt(n,Fn)),b0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new P_(this,qE(this._delegate,e))}catch(t){throw fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new pa(this,E0(this._delegate,e))}catch(t){throw fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function wA(n,e){if(n=Wt(n,E_),C_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hi(n,null,(t=e,new vo(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function I(n,e,t){n=Wt(n,Fn);const r=Object.assign(Object.assign({},h),t);return function(s){if(s.maxAttempts<1)throw new De(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,d){const m=new Dr;return s.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const v=yield function $E(n){return Vp(n).then(e=>e.datastore)}(s);new qD(s.asyncQueue,v,d,u,m).run()})),m.promise}(dn(n),s=>e(new C(n,s)),r)}(this._delegate,t=>e(new LA(this,t)))}batch(){return dn(this._delegate),new VA(new g(this._delegate,e=>Yp(this._delegate,e)))}loadBundle(e){return function S0(n,e){const t=dn(n=Wt(n,Fn)),r=new CA;return function yA(n,e,t,r){const s=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,E){if(v instanceof Uint8Array)return zD(v,E);if(v instanceof ArrayBuffer)return zD(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new fA(v,d);var v}(t,Ip(e));n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function jE(n,e,t){const r=Qe(n);var s;(s=(0,ue.Z)(function*(u,d,m){try{const v=yield d.getMetadata();if(yield function(V,W){const ie=Qe(V),Ae=cr(W.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",xe=>ie.xs.getBundleMetadata(xe,W.id)).then(xe=>!!xe&&xe.createTime.compareTo(Ae)>=0)}(u.localStore,v))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(bE(v));const E=new xp(v,u.localStore,d.serializer);let T=yield d._c();for(;T;){const V=yield E.$u(T);V&&m._updateProgress(V),T=yield d._c()}const O=yield E.complete();return yield Qi(u,O.Bu,void 0),yield function(V,W){const ie=Qe(V);return ie.persistence.runTransaction("Save bundle","readwrite",Ae=>ie.xs.saveBundleMetadata(Ae,W))}(u.localStore,v),m._completeWith(O.progress),Promise.resolve(O.Fu)}catch(v){return mo("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var V}),function(u,d,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield v_(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function WE(n,e){return function vA(n,e){return n.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,r){const s=Qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.xs.getNamedQuery(u,r))}(yield Up(n),e)}))}(dn(n=Wt(n,Fn)),e).then(t=>t?new hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class lI extends iI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(new Eo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pa.forKey(t,this.firestore,null)}}class LA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lI(e)}get(e){const t=Jp(e);return this._delegate.get(t).then(r=>new j0(this._firestore,new fa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Jp(e);return r?(Re("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}}class VA{constructor(e){this._delegate=e}set(e,t,r){const s=Jp(e);return r?(Re("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Kp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Qp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Qp(e,new lI(e),t),s.set(t,u)),u}}Qp.INSTANCES=new WeakMap;class pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pa(t,new $n(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new pa(t,new $n(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new P_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new P_(this.firestore,qE(this._delegate,e))}catch(t){throw fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof $n&&JD(this._delegate,e)}set(e,t){t=Re("DocumentReference.set",t);try{return t?aI(this._delegate,e,t):aI(this._delegate,e)}catch(r){throw fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?uI(this._delegate,e):uI(this._delegate,e,t,...r)}catch(s){throw fs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function vT(n){return Yp(Wt(n.firestore,Fn),[new Ul(n._key,jn.none())])}(this._delegate)}onSnapshot(...e){const t=UA(e),r=BA(e,s=>new j0(this.firestore,new fa(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return wT(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function U0(n){n=Wt(n,$n);const e=Wt(n.firestore,Fn),t=dn(e),r=new lu(e);return function gA(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(s,u,d){try{const m=yield function(v,E){const T=Qe(v);return T.persistence.runTransaction("read document","readonly",O=>T.localDocuments.getDocument(O,E))}(s,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new De(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Yl(m,`Failed to get document '${u} from cache`);d.reject(v)}}),function(s,u,d){return r.apply(this,arguments)})(yield Up(n),e,t);var r})),t.promise}(t,n._key).then(s=>new fa(e,r,n._key,s,new Ec(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function _T(n){n=Wt(n,$n);const e=Wt(n.firestore,Fn);return WD(dn(e),n._key,{source:"server"}).then(t=>B0(e,n,t))}(this._delegate):function AA(n){n=Wt(n,$n);const e=Wt(n.firestore,Fn);return WD(dn(e),n._key).then(t=>B0(e,n,t))}(this._delegate),t.then(r=>new j0(this.firestore,new fa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function fs(n,e,t){return n.message=n.message.replace(e,t),n}function UA(n){for(const e of n)if("object"==typeof e&&!cI(e))return e;return{}}function BA(n,e){var t,r;let s;return s=cI(n[0])?n[0]:cI(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class j0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return O_(this._delegate,e._delegate)}}class $0 extends j0{data(e){const t=this._delegate.data(e);return function Eb(n,e){n||it()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lI(e)}where(e,t,r){try{return new ps(this.firestore,Cc(this._delegate,function dT(n,e,t){const r=e,s=N0("where",n);return Gp._create(s,r,t)}(e,t,r)))}catch(s){throw fs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,Cc(this._delegate,function bA(n,e="asc"){const t=e,r=N0("orderBy",n);return tI._create(r,t)}(e,t)))}catch(r){throw fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,Cc(this._delegate,function A_(n){return C0("limit",n),S_._create("limit",n,"F")}(e)))}catch(t){throw fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,Cc(this._delegate,function hT(n){return C0("limitToLast",n),S_._create("limitToLast",n,"L")}(e)))}catch(t){throw fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,Cc(this._delegate,function nI(...n){return x_._create("startAt",n,!0)}(...e)))}catch(t){throw fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,Cc(this._delegate,function nd(...n){return x_._create("startAfter",n,!1)}(...e)))}catch(t){throw fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,Cc(this._delegate,function F0(...n){return Zp._create("endBefore",n,!1)}(...e)))}catch(t){throw fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,Cc(this._delegate,function L0(...n){return Zp._create("endAt",n,!0)}(...e)))}catch(t){throw fs(t,"endAt()","Query.endAt()")}}isEqual(e){return I0(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function xA(n){n=Wt(n,hi);const e=Wt(n.firestore,Fn),t=dn(e),r=new lu(e);return function mA(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(s,u,d){try{const m=yield wp(s,u,!0),v=new Mp(u,m.Wi),E=v.zu(m.documents),T=v.applyChanges(E,!1);d.resolve(T.snapshot)}catch(m){const v=Yl(m,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(s,u,d){return r.apply(this,arguments)})(yield Up(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Ic(e,r,n,s))}(this._delegate):"server"===e?.source?function MA(n){n=Wt(n,hi);const e=Wt(n.firestore,Fn),t=dn(e),r=new lu(e);return KD(t,n._query,{source:"server"}).then(s=>new Ic(e,r,n,s))}(this._delegate):function yT(n){n=Wt(n,hi);const e=Wt(n.firestore,Fn),t=dn(e),r=new lu(e);return lT(n._query),KD(t,n._query).then(s=>new Ic(e,r,n,s))}(this._delegate),t.then(r=>new CT(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=UA(e),r=BA(e,s=>new CT(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return wT(this._delegate,t,r)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}class Y1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Y1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $0(this._firestore,r))})}isEqual(e){return O_(this._delegate,e._delegate)}}class P_ extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pa(this.firestore,e):null}doc(e){try{return new pa(this.firestore,void 0===e?E0(this._delegate):E0(this._delegate,e))}catch(t){throw fs(t,"doc()","CollectionReference.doc()")}}add(e){return function RA(n,e){const t=Wt(n.firestore,Fn),r=E0(n),s=V0(n.converter,e);return Yp(t,[b_(jh(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pa(this.firestore,t))}isEqual(e){return JD(this._delegate,e._delegate)}withConverter(e){return new P_(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function Jp(n){return Wt(n,$n)}class ET{constructor(...e){this._delegate=new au(...e)}static documentId(){return new ET(yr.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof au&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function M(){return new M0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xp(e)}static delete(){const e=function A(){return new Hp("deleteField")}();return e._methodName="FieldValue.delete",new Xp(e)}static arrayUnion(...e){const t=N(...e);return t._methodName="FieldValue.arrayUnion",new Xp(t)}static arrayRemove(...e){const t=H(...e);return t._methodName="FieldValue.arrayRemove",new Xp(t)}static increment(e){const t=function Y(n){return new JE("increment",n)}(e);return t._methodName="FieldValue.increment",new Xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Q1={Firestore:FA,GeoPoint:Bh,Timestamp:Bn,Blob:zn,Transaction:LA,WriteBatch:VA,DocumentReference:pa,DocumentSnapshot:j0,Query:ps,QueryDocumentSnapshot:$0,QuerySnapshot:CT,CollectionReference:P_,FieldPath:ET,FieldValue:Xp,setLogLevel:function K1(n){!function oA(n){Ju.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function X1(n){(function J1(n,e){n.INTERNAL.registerComponent(new Gn.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},Q1)))})(n,(e,t)=>new FA(e,t,new W1)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(Fa.Z);var bc=k(7579),eO=k(6451),dI=k(5363),hI=k(8421);function Zr(n,e){return(0,pr.e)((t,r)=>{let s=null,u=0,d=!1;const m=()=>d&&!s&&r.complete();t.subscribe((0,yn.x)(r,v=>{s?.unsubscribe();let E=0;const T=u++;(0,hI.Xf)(n(v,T)).subscribe(s=(0,yn.x)(r,O=>r.next(e?e(v,O,T,E++):O),()=>{s=null,m()}))},()=>{d=!0,m()}))})}var tO=k(6063);class nO extends bc.x{constructor(e=1/0,t=1/0,r=tO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)m=v;m&&r.splice(0,m+1)}}}var rO=k(3099);function jA(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,rO.B)({connector:()=>new nO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}var IT=k(576);function $A(n,e){return(0,IT.m)(e)?Zr(()=>n,e):Zr(()=>n)}var bT=k(9468);k(259);const TT=new Map,zA={activated:!1,tokenObservers:[]},uO={initialized:!1,enabled:!1};function ki(n){return TT.get(n)||Object.assign({},zA)}function fI(){return uO}const ST="https://content-firebaseappcheck.googleapis.com/v1",hO="exchangeDebugToken",GA={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class pO{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ue.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function gO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gs=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function MT(){return MT=(0,ue.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const O=yield s.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(O){throw gs.create("fetch-network-error",{originalErrorMessage:O?.message})}if(200!==d.status)throw gs.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(O){throw gs.create("fetch-parse-error",{originalErrorMessage:O?.message})}const v=m.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const E=1e3*Number(v[1]),T=Date.now();return{token:m.token,expireTimeMillis:T+E,issuedAtTimeMillis:T}}),MT.apply(this,arguments)}const wO="firebase-app-check-database",CO=1,z0="firebase-app-check-store";let mI=null;function RT(){return RT=(0,ue.Z)(function*(n,e){const r=(yield function WA(){return mI||(mI=new Promise((n,e)=>{try{const t=indexedDB.open(wO,CO);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(gs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(z0,{keyPath:"compositeKey"})}}catch(t){e(gs.create("storage-open",{originalErrorMessage:t?.message}))}}),mI)}()).transaction(z0,"readwrite"),u=r.objectStore(z0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var E;m(gs.create("storage-set",{originalErrorMessage:null===(E=v.target.error)||void 0===E?void 0:E.message}))}})}),RT.apply(this,arguments)}const G0=new Cr.Yd("@firebase/app-check");function kT(n,e){return(0,Ot.hl)()?function IO(n,e){return function KA(n,e){return RT.apply(this,arguments)}(function QA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{G0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function FT(){return FT=(0,ue.Z)(function*(){const n=fI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),FT.apply(this,arguments)}const xO={error:"UNKNOWN_ERROR"};function MO(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function _I(n){return LT.apply(this,arguments)}function LT(){return LT=(0,ue.Z)(function*(n,e=!1){const t=n.app;!function qA(n){if(!ki(n).activated)throw gs.create("use-before-activation",{appName:n.name})}(t);const r=ki(t);let u,s=r.token;if(s&&!k_(s)&&(r.token=void 0,s=void 0),!s){const v=yield r.cachedTokenPromise;v&&(k_(v)?s=v:yield kT(t,void 0))}if(!e&&s&&k_(s))return{token:s.token};let m,d=!1;if(function JA(){return fI().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function xT(n,e){return MT.apply(this,arguments)}(function vO(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${ST}/projects/${t}/apps/${r}:${hO}?key=${s}`,body:{debug_token:e}}}(t,yield function XA(){return FT.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const v=yield r.exchangeTokenPromise;return yield kT(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),s=yield ki(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?G0.warn(v.message):G0.error(v),u=v}return s?u?m=k_(s)?{token:s.token,internalError:u}:nx(u):(m={token:s.token},r.token=s,yield kT(t,s)):m=nx(u),d&&function tx(n,e){const t=ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),LT.apply(this,arguments)}function UT(n,e){const t=ki(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ex(n){const{app:e}=n,t=ki(e);let r=t.tokenRefresher;r||(r=function RO(n){const{app:e}=n;return new pO((0,ue.Z)(function*(){let r;if(r=ki(e).token?yield _I(n,!0):yield _I(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},GA.RETRIAL_MIN_WAIT,GA.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function k_(n){return n.expireTimeMillis-Date.now()>0}function nx(n){return{token:MO(xO),error:n}}class OO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ki(this.app);for(const t of e)UT(this.app,t.next);return Promise.resolve()}}const lx="app-check-internal";!function qO(){(0,wr._registerComponent)(new Gn.wA("app-check",n=>function PO(n,e){return new OO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lx).initialize()})),(0,wr._registerComponent)(new Gn.wA(lx,n=>function kO(n){return{getToken:e=>_I(n,e),addTokenListener:e=>function VT(n,e,t,r){const{app:s}=n,u=ki(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&k_(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ex(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ex(n))}(n,"INTERNAL",e),removeTokenListener:e=>UT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wr.registerVersion)("@firebase/app-check","0.6.4")}();class vI{constructor(){return(0,x.vb)("app-check")}}typeof window<"u"&&window;var wI=k(9260);const hx=new c.OlP("angularfire2.auth.use-emulator"),fx=new c.OlP("angularfire2.auth.settings"),px=new c.OlP("angularfire2.auth.tenant-id"),gx=new c.OlP("angularfire2.auth.langugage-code"),mx=new c.OlP("angularfire2.auth.use-device-language"),_x=new c.OlP("angularfire.auth.persistence"),yx=(n,e,t,r,s,u,d,m)=>(0,ln.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),d)for(const[E,T]of Object.entries(d))v.settings[E]=T;return m&&v.setPersistence(m),v},[t,r,s,u,d,m]);let eg=(()=>{class n{constructor(t,r,s,u,d,m,v,E,T,O,V,W){const ie=new bc.x,Ae=D(void 0).pipe((0,dI.Q)(d.outsideAngular),Zr(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9800)))),(0,ft.U)(()=>(0,ln.on)(t,u,r)),(0,ft.U)(xe=>yx(xe,u,m,E,T,O,v,V)),jA({bufferSize:1,refCount:!1}));if(wu(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=D(null);else{Ae.pipe(ai()).subscribe();const Et=Ae.pipe(Zr(wt=>wt.getRedirectResult().then(Bt=>Bt,()=>null)),x.iC,jA({bufferSize:1,refCount:!1})),Mt=Ae.pipe(Zr(wt=>new Di.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>wt.onAuthStateChanged(Zt=>Bt.next(Zt),Zt=>Bt.error(Zt),()=>Bt.complete()))})))),at=Ae.pipe(Zr(wt=>new Di.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>wt.onIdTokenChanged(Zt=>Bt.next(Zt),Zt=>Bt.error(Zt),()=>Bt.complete()))}))));this.authState=Et.pipe($A(Mt),(0,bT.R)(d.outsideAngular),(0,dI.Q)(d.insideAngular)),this.user=Et.pipe($A(at),(0,bT.R)(d.outsideAngular),(0,dI.Q)(d.insideAngular)),this.idToken=this.user.pipe(Zr(wt=>wt?(0,Jt.D)(wt.getIdToken()):D(null))),this.idTokenResult=this.user.pipe(Zr(wt=>wt?(0,Jt.D)(wt.getIdTokenResult()):D(null))),this.credential=(0,eO.T)(Et,ie,this.authState.pipe(Ii(wt=>!wt))).pipe((0,ft.U)(wt=>wt?.user?wt:null),(0,bT.R)(d.outsideAngular),(0,dI.Q)(d.insideAngular))}return(0,ln.pX)(this,Ae,u,{spy:{apply:(xe,Et,Mt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&Mt.then(at=>ie.next(at))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ln.Dh),c.LFG(ln.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(x.HU),c.LFG(hx,8),c.LFG(fx,8),c.LFG(px,8),c.LFG(gx,8),c.LFG(mx,8),c.LFG(_x,8),c.LFG(vI,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JO=(()=>{class n{constructor(){wI.Z.registerVersion("angularfire",x.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[eg]}),n})();function vx(n,e){return function XO(n,e=ho.z){return new Di.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function zT(n,e){return vx(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function CI(n,e){return zT(n,e).pipe(Se(void 0),Ye(),(0,ft.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const v=s.find(T=>T.doc.ref.isEqual(d.ref)),E=t?.payload.docs.find(T=>T.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&E&&JSON.stringify(E.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function wx(n,e,t){return CI(n,t).pipe(lt((r,s)=>function tP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function nP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function zt(n,e=us.y){return n=n??At,(0,pr.e)((t,r)=>{let s,u=!0;t.subscribe((0,yn.x)(r,d=>{const m=e(d);(u||!n(s,m))&&(u=!1,s=m,r.next(d))}))})}(),(0,ft.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function GT(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Cx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Ex{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=CI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Se(void 0),Ye(),Ii(([r,s])=>s.length>0||!r),(0,ft.U)(([r,s])=>s),x.iC)}auditTrail(e){return this.stateChanges(e).pipe(lt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Cx(e);return wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(x.iC)}valueChanges(e={}){return zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),x.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(x.iC)}add(e){return this.ref.add(e)}doc(e){return new Ix(this.ref.doc(e),this.afs)}}class Ix{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=Tx(r,t);return new Ex(s,u,this.afs)}snapshotChanges(){return function eP(n,e){return vx(n,e).pipe(Se(void 0),Ye(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(x.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(x.iC)}}class rP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CI(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ii(t=>t.length>0),x.iC):CI(this.query,this.afs.schedulers.outsideAngular).pipe(x.iC)}auditTrail(e){return this.stateChanges(e).pipe(lt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Cx(e);return wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(x.iC)}valueChanges(e={}){return zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),x.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(x.iC)}}const bx=new c.OlP("angularfire2.enableFirestorePersistence"),Dx=new c.OlP("angularfire2.firestore.persistenceSettings"),iP=new c.OlP("angularfire2.firestore.settings"),sP=new c.OlP("angularfire2.firestore.use-emulator");function Tx(n,e=(t=>t)){return{query:e(n),ref:n}}let tg=(()=>{class n{constructor(t,r,s,u,d,m,v,E,T,O,V,W,ie,Ae,xe,Et,Mt){this.schedulers=v;const at=(0,ln.on)(t,m,r),wt=T;O&&yx(at,m,V,ie,Ae,xe,W,Et),[this.firestore,this.persistenceEnabled$]=(0,ln.cc)(`${at.name}.firestore`,"AngularFirestore",at.name,()=>{const Bt=m.runOutsideAngular(()=>at.firestore());if(u&&Bt.settings(u),wt&&Bt.useEmulator(...wt),s&&!wu(d)){const Zt=()=>{try{return(0,Jt.D)(Bt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(fi){return typeof console<"u"&&console.warn(fi),D(!1)}};return[Bt,m.runOutsideAngular(Zt)]}return[Bt,D(!1)]},[u,wt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Tx(s,r),m=this.schedulers.ngZone.run(()=>u);return new Ex(m,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new rP(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new Ix(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ln.Dh),c.LFG(ln.xv,8),c.LFG(bx,8),c.LFG(iP,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(x.HU),c.LFG(Dx,8),c.LFG(sP,8),c.LFG(eg,8),c.LFG(hx,8),c.LFG(fx,8),c.LFG(px,8),c.LFG(gx,8),c.LFG(mx,8),c.LFG(_x,8),c.LFG(vI,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oP=(()=>{class n{constructor(){wI.Z.registerVersion("angularfire",x.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:bx,useValue:!0},{provide:Dx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[tg]}),n})(),Sx=(()=>{class n{constructor(t){this.firestore=t}updateRoom(t){this.firestore.doc("rooms/"+t.id).update(t)}updatePartialRoom(t,r){this.firestore.doc("rooms/"+r).update(t)}listenerRoom(t){return this.firestore.doc("rooms/"+t).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(tg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qT=(()=>{class n{constructor(t,r){this.fireAuth=t,this.roomService=r}getUser(){return this.fireAuth.user}getUserAndAddUserToRoomIfNotExist(t){this.getUser().pipe(ai()).subscribe(r=>{this.addUserToRoomIfNotExist(t,r)})}userAlreadyExistInRoom(t,r){return null!=t?.participants?.find(s=>s.uid==r?.uid)}addUserToRoomIfNotExist(t,r){this.userAlreadyExistInRoom(t,r)||this.addParticipant(t,r)}addParticipant(t,r){this.addUserToRoom(t,r),this.updateRoom(t)}addUserToRoom(t,r){t?.participants?.push({uid:r?.uid,displayName:r?.displayName,email:r?.email})}updateRoom(t){this.roomService.updateRoom(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(eg),c.LFG(Sx))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ax=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-loading"]],decls:12,vars:0,consts:[[1,"loading-content"],[1,"icon"],[1,"red"],[1,"text"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1)(2,"span"),c._uU(3,"\u2660"),c.qZA(),c.TgZ(4,"span",2),c._uU(5,"\u2665"),c.qZA(),c.TgZ(6,"span"),c._uU(7,"\u2663"),c.qZA(),c.TgZ(8,"span",2),c._uU(9,"\u2666"),c.qZA()(),c.TgZ(10,"span",3),c._uU(11," carregando... "),c.qZA()())},styles:[".loading-content[_ngcontent-%COMP%]{width:110px;text-align:center}.loading-content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-weight:700;margin-top:10px;display:block}.loading-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;border:2px solid var(--dark);border-radius:4px;width:22px;height:28px;line-height:21px;box-sizing:border-box;background-color:var(--white);margin-right:-4px;padding:0 0 0 2px;transition-duration:.3s;transform:rotate(340deg) translate(0);animation-duration:3s;animation-direction:alternate;animation-play-state:running;animation-iteration-count:infinite;animation-delay:0;animation-timing-function:1;animation-direction:normal}.loading-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span.red[_ngcontent-%COMP%]{color:var(--red)}.loading-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-name:_ngcontent-%COMP%_spadesAnimation}.loading-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-name:_ngcontent-%COMP%_heartsAnimation}.loading-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-name:_ngcontent-%COMP%_clubsAnimation}.loading-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){animation-name:_ngcontent-%COMP%_diamondsAnimation}@keyframes _ngcontent-%COMP%_spadesAnimation{0%{transform:rotate(340deg) translate(0)}25%{transform:rotate(340deg) translate(0)}50%{transform:rotate(340deg) translate(0)}75%{transform:rotate(340deg) translate(45px,15px)}to{transform:rotate(340deg) translate(0)}}@keyframes _ngcontent-%COMP%_heartsAnimation{0%{transform:rotate(340deg) translate(0)}25%{transform:rotate(340deg) translate(-15px,-5px)}50%{transform:rotate(340deg) translate(0)}75%{transform:rotate(340deg) translate(30px,10px)}to{transform:rotate(340deg) translate(0)}}@keyframes _ngcontent-%COMP%_clubsAnimation{0%{transform:rotate(340deg) translate(0)}25%{transform:rotate(340deg) translate(-30px,-10px)}50%{transform:rotate(340deg) translate(0)}75%{transform:rotate(340deg) translate(15px,5px)}to{transform:rotate(340deg) translate(0)}}@keyframes _ngcontent-%COMP%_diamondsAnimation{0%{transform:rotate(340deg) translate(0)}25%{transform:rotate(340deg) translate(-45px,-15px)}50%{transform:rotate(340deg) translate(0)}75%{transform:rotate(340deg) translate(0)}to{transform:rotate(340deg) translate(0)}}"]}),n})();class du extends bc.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:aP}=Array,{getPrototypeOf:uP,prototype:cP,keys:lP}=Object;function xx(n){if(1===n.length){const e=n[0];if(aP(e))return{args:e,keys:null};if(function dP(n){return n&&"object"==typeof n&&uP(n)===cP}(e)){const t=lP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:hP}=Array;function Mx(n){return(0,ft.U)(e=>function fP(n,e){return hP(e)?n(...e):n(e)}(n,e))}function Rx(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var pP=k(9672);function Ox(...n){const e=(0,b.yG)(n),t=(0,b.jO)(n),{args:r,keys:s}=xx(n);if(0===r.length)return(0,Jt.D)([],e);const u=new Di.y(function gP(n,e,t=us.y){return r=>{Px(e,()=>{const{length:s}=n,u=new Array(s);let d=s,m=s;for(let v=0;v<s;v++)Px(e,()=>{const E=(0,Jt.D)(n[v],e);let T=!1;E.subscribe((0,yn.x)(r,O=>{u[v]=O,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>Rx(s,d):us.y));return t?u.pipe(Mx(t)):u}function Px(n,e,t){n?(0,pP.f)(t,n,e):e()}function kx(n){return new Di.y(e=>{(0,hI.Xf)(n()).subscribe(e)})}var mP=k(9635);function q0(n,e){const t=(0,IT.m)(n)?n:()=>n,r=s=>s.error(t());return new Di.y(e?s=>e.schedule(r,0,s):r)}var Nx=k(727);function ZT(){return(0,pr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Fx extends Di.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,pr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Nx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Nx.w0.EMPTY)}return e}refCount(){return ZT()(this)}}var ms=k(5577);function ng(n,e){return(0,IT.m)(e)?(0,ms.z)(n,e,1):(0,ms.z)(n,1)}function zh(n){return(0,pr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,d=>{u=(0,hI.Xf)(n(d,zh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function WT(n){return n<=0?()=>bi.E:(0,pr.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Lx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((s,u)=>n(s,u,r)):us.y,WT(1),t?Hi(e):Vu(()=>new os))}function KT(n){return(0,pr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",Z0=Symbol("RouteTitle");class vP{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function N_(n){return new vP(n)}function wP(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))s[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Dc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Vx(n[s],e[s]))return!1;return!0}function Vx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Ux(n){return Array.prototype.concat.apply([],n)}function Bx(n){return n.length>0?n[n.length-1]:null}function Ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gh(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):D(n)}const EI=!1,EP={exact:function Hx(n,e,t){if(!rg(n.segments,e.segments)||!II(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Hx(n.children[r],e.children[r],t))return!1;return!0},subset:zx},jx={exact:function IP(n,e){return Dc(n,e)},subset:function bP(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Vx(n[t],e[t]))},ignored:()=>!0};function $x(n,e,t){return EP[t.paths](n.root,e.root,t.matrixParams)&&jx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function zx(n,e,t){return Gx(n,e,e.segments,t)}function Gx(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!rg(s,t)||e.hasChildren()||!II(s,t,r))}if(n.segments.length===t.length){if(!rg(n.segments,t)||!II(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!zx(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(rg(n.segments,s)&&II(n.segments,s,r)&&n.children[Gt])&&Gx(n.children[Gt],e,u,r)}}function II(n,e,t){return e.every((r,s)=>jx[t](n[s].parameters,r.parameters))}class qh{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N_(this.queryParams)),this._queryParamMap}toString(){return SP.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ni(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bI(this)}}class W0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=N_(this.parameters)),this._parameterMap}toString(){return Wx(this)}}function rg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let K0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new YT},providedIn:"root"}),n})();class YT{parse(e){const t=new FP(e);return new qh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Y0(e.root,!0)}`,r=function MP(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${DI(t)}=${DI(s)}`).join("&"):`${DI(t)}=${DI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),s="string"==typeof e.fragment?`#${function AP(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${s}`}}const SP=new YT;function bI(n){return n.segments.map(e=>Wx(e)).join("/")}function Y0(n,e){if(!n.hasChildren())return bI(n);if(e){const t=n.children[Gt]?Y0(n.children[Gt],!1):"",r=[];return Ni(n.children,(s,u)=>{u!==Gt&&r.push(`${u}:${Y0(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function TP(n,e){let t=[];return Ni(n.children,(r,s)=>{s===Gt&&(t=t.concat(e(r,s)))}),Ni(n.children,(r,s)=>{s!==Gt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Gt?[Y0(n.children[Gt],!1)]:[`${s}:${Y0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${bI(n)}/${t[0]}`:`${bI(n)}/(${t.join("//")})`}}function qx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function DI(n){return qx(n).replace(/%3B/gi,";")}function QT(n){return qx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function TI(n){return decodeURIComponent(n)}function Zx(n){return TI(n.replace(/\+/g,"%20"))}function Wx(n){return`${QT(n.path)}${function xP(n){return Object.keys(n).map(e=>`;${QT(e)}=${QT(n[e])}`).join("")}(n.parameters)}`}const RP=/^[^\/()?;=#]+/;function SI(n){const e=n.match(RP);return e?e[0]:""}const OP=/^[^=?&#]+/,kP=/^[^&#]+/;class FP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new Xt(e,t)),r}parseSegment(){const e=SI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,EI);return this.capture(e),new W0(TI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=SI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=SI(this.remaining);s&&(r=s,this.capture(r))}e[TI(t)]=TI(r)}parseQueryParam(e){const t=function PP(n){const e=n.match(OP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function NP(n){const e=n.match(kP);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=Zx(t),u=Zx(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=SI(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new c.vHH(4010,EI);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Gt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Gt]:new Xt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,EI)}}function JT(n){return n.segments.length>0?new Xt([],{[Gt]:n}):n}function AI(n){const e={};for(const r of Object.keys(n.children)){const u=AI(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function LP(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function ig(n){return n instanceof qh}const XT=!1;function VP(n,e,t,r,s){if(0===t.length)return F_(e.root,e.root,e.root,r,s);const u=function Xx(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Jx(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Ni(u.outlets,(v,E)=>{m[E]="string"==typeof v?v.split("/"):v}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Jx(t,e,r)}(t);return u.toRoot()?F_(e.root,e.root,new Xt([],{}),r,s):function d(v){const E=function BP(n,e,t,r){if(n.isAbsolute)return new L_(e.root,!0,0);if(-1===r)return new L_(t,t===e.root,0);return function eM(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new c.vHH(4005,XT&&"Invalid number of '../'");s=r.segments.length}return new L_(r,!1,s-u)}(t,r+(Q0(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),T=E.processChildren?V_(E.segmentGroup,E.index,u.commands):eS(E.segmentGroup,E.index,u.commands);return F_(e.root,E.segmentGroup,T,r,s)}(n.snapshot?._lastPathIndex)}function Q0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function J0(n){return"object"==typeof n&&null!=n&&n.outlets}function F_(n,e,t,r,s){let d,u={};r&&Ni(r,(v,E)=>{u[E]=Array.isArray(v)?v.map(T=>`${T}`):`${v}`}),d=n===e?t:Qx(n,e,t);const m=JT(AI(d));return new qh(m,u,s)}function Qx(n,e,t){const r={};return Ni(n.children,(s,u)=>{r[u]=s===e?t:Qx(s,e,t)}),new Xt(n.segments,r)}class Jx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Q0(r[0]))throw new c.vHH(4003,XT&&"Root segment cannot have matrix parameters");const s=r.find(J0);if(s&&s!==Bx(r))throw new c.vHH(4004,XT&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class L_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function eS(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return V_(n,e,t);const r=function $P(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],m=t[r];if(J0(m))break;const v=`${m}`,E=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&E&&"object"==typeof E&&void 0===E.outlets){if(!nM(v,E,d))return u;r+=2}else{if(!nM(v,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Xt(n.segments.slice(0,r.pathIndex),{});return u.children[Gt]=new Xt(n.segments.slice(r.pathIndex),n.children),V_(u,0,s)}return r.match&&0===s.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?tS(n,e,t):r.match?V_(n,0,s):tS(n,e,t)}function V_(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function jP(n){return J0(n[0])?n[0].outlets:{[Gt]:n}}(t),s={};if(!r[Gt]&&n.children[Gt]&&1===n.numberOfChildren&&0===n.children[Gt].segments.length){const u=V_(n.children[Gt],e,t);return new Xt(n.segments,u.children)}return Ni(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=eS(n.children[d],e,u))}),Ni(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new Xt(n.segments,s)}}function tS(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(J0(u)){const v=HP(u.outlets);return new Xt(r,v)}if(0===s&&Q0(t[0])){r.push(new W0(n.segments[e].path,tM(t[0]))),s++;continue}const d=J0(u)?u.outlets[Gt]:`${u}`,m=s<t.length-1?t[s+1]:null;d&&m&&Q0(m)?(r.push(new W0(d,tM(m))),s+=2):(r.push(new W0(d,{})),s++)}return new Xt(r,{})}function HP(n){const e={};return Ni(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=tS(new Xt([],{}),0,t))}),e}function tM(n){const e={};return Ni(n,(t,r)=>e[r]=`${t}`),e}function nM(n,e,t){return n==t.path&&Dc(e,t.parameters)}const X0="imperative";class Tc{constructor(e,t){this.id=e,this.url=t}}class nS extends Tc{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sg extends Tc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xI extends Tc{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class MI extends Tc{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class rS extends Tc{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zP extends Tc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GP extends Tc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qP extends Tc{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ZP extends Tc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WP extends Tc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KP{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YP{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class QP{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JP{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XP{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ek{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let rk=(()=>{class n{createUrlTree(t,r,s,u,d,m){return VP(t||r.root,s,u,d,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),sk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(e){return rk.\u0275fac(e)},providedIn:"root"}),n})();class iM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=iS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=iS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=sS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return sS(e,this._root).map(t=>t.value)}}function iS(n,e){if(n===e.value)return e;for(const t of e.children){const r=iS(n,t);if(r)return r}return null}function sS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=sS(n,t);if(r.length)return r.unshift(e),r}return[]}class rd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function U_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sM extends iM{constructor(e,t){super(e),this.snapshot=t,oS(this,e)}toString(){return this.snapshot.toString()}}function oM(n,e){const t=function ok(n,e){const d=new RI([],{},{},"",{},Gt,e,null,n.root,-1,{});return new uM("",new rd(d,[]))}(n,e),r=new du([new W0("",{})]),s=new du({}),u=new du({}),d=new du({}),m=new du(""),v=new Zh(r,s,d,m,u,Gt,e,t.root);return v.snapshot=t.root,new sM(new rd(v,[]),t)}class Zh{constructor(e,t,r,s,u,d,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,ft.U)(E=>E[Z0]))??D(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>N_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>N_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function ak(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class RI{get title(){return this.data?.[Z0]}constructor(e,t,r,s,u,d,m,v,E,T,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.routeConfig=v,this._urlSegment=E,this._lastPathIndex=T,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=N_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uM extends iM{constructor(e,t){super(t),this.url=e,oS(this,t)}toString(){return cM(this._root)}}function oS(n,e){e.value._routerState=n,e.children.forEach(t=>oS(n,t))}function cM(n){const e=n.children.length>0?` { ${n.children.map(cM).join(", ")} } `:"";return`${n.value}${e}`}function aS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Dc(e.params,t.params)||n.params.next(t.params),function CP(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Dc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function uS(n,e){const t=Dc(n.params,e.params)&&function DP(n,e){return rg(n,e)&&n.every((t,r)=>Dc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||uS(n.parent,e.parent))}function ew(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function ck(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return ew(n,r,s);return ew(n,r)})}(n,e,t);return new rd(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>ew(n,m)),d}}const r=function lk(n){return new Zh(new du(n.url),new du(n.params),new du(n.queryParams),new du(n.fragment),new du(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>ew(n,u));return new rd(r,s)}}const cS="ngNavigationCancelingError";function lM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ig(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=dM(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function dM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[cS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function hM(n){return fM(n)&&ig(n.url)}function fM(n){return n&&n[cS]}class dk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new tw,this.attachRef=null}}let tw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const OI=!1;let PI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(tw),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,OI);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,OI);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,OI);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,OI);this._activatedRoute=t;const s=this.location,d=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new hk(t,m,s.injector);if(r&&function fk(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(d);this.activated=s.createComponent(E,s.length,v)}else this.activated=s.createComponent(d,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),n})();class hk{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zh?this.route:e===tw?this.childContexts:this.parent.get(e,t)}}let lS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[PI],encapsulation:2}),n})();function pM(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hS(n){const e=n.children&&n.children.map(hS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=lS),t}function ga(n){return n.outlet||Gt}function gM(n,e){const t=n.filter(r=>ga(r)===e);return t.push(...n.filter(r=>ga(r)!==e)),t}function nw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yk{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),aS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=U_(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),Ni(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=U_(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=U_(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=U_(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new ek(u.value.snapshot))}),e.children.length&&this.forwardEvent(new JP(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(aS(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),aS(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=nw(s.snapshot),v=m?.get(c._Vd)??null;d.attachRef=null,d.route=s,d.resolver=v,d.injector=m,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class mM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kI{constructor(e,t){this.component=e,this.route=t}}function vk(n,e,t){const r=n._root;return rw(r,e?e._root:null,t,[r.value])}function B_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function rw(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=U_(e);return n.children.forEach(d=>{(function Ck(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function Ek(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!rg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!rg(n.url,e.url)||!Dc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uS(n,e)||!Dc(n.queryParams,e.queryParams);default:return!uS(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new mM(r)):(u.data=d.data,u._resolvedData=d._resolvedData),rw(n,e,u.component?m?m.children:null:t,r,s),v&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new kI(m.outlet.component,d))}else d&&iw(e,m,s),s.canActivateChecks.push(new mM(r)),rw(n,null,u.component?m?m.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),Ni(u,(d,m)=>iw(d,t.getContext(m),s)),s}function iw(n,e,t){const r=U_(n),s=n.value;Ni(r,(u,d)=>{iw(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new kI(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function sw(n){return"function"==typeof n}function fS(n){return n instanceof os||"EmptyError"===n?.name}const NI=Symbol("INITIAL_VALUE");function j_(){return Zr(n=>Ox(n.map(e=>e.pipe(Zo(1),Se(NI)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===NI)return NI;if(!1===t||t instanceof qh)return t}return!0}),Ii(e=>e!==NI),Zo(1)))}function _M(n){return(0,mP.z)((0,un.b)(e=>{if(ig(e))throw lM(0,e)}),(0,ft.U)(e=>!0===e))}const pS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yM(n,e,t,r,s){const u=gS(n,e,t);return u.matched?function Uk(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?D(s.map(d=>{const m=B_(d,n);return Gh(function Ak(n){return n&&sw(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(j_(),_M()):D(!0)}(r=pM(e,r),e,t).pipe((0,ft.U)(d=>!0===d?u:{...pS})):D(u)}function gS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...pS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||wP)(t,n,e);if(!s)return{...pS};const u={};Ni(s.posParams,(m,v)=>{u[v]=m.path});const d=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function FI(n,e,t,r){if(t.length>0&&function $k(n,e,t){return t.some(r=>LI(n,e,r)&&ga(r)!==Gt)}(n,t,r)){const u=new Xt(e,function jk(n,e,t,r){const s={};s[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ga(u)!==Gt){const d=new Xt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[ga(u)]=d}return s}(n,e,r,new Xt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Hk(n,e,t){return t.some(r=>LI(n,e,r))}(n,t,r)){const u=new Xt(n.segments,function Bk(n,e,t,r,s){const u={};for(const d of r)if(LI(n,t,d)&&!s[ga(d)]){const m=new Xt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[ga(d)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Xt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function LI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function vM(n,e,t,r){return!!(ga(n)===r||r!==Gt&&LI(e,t,n))&&("**"===n.path||gS(e,n,t).matched)}function wM(n,e,t){return 0===e.length&&!n.children[t]}const VI=!1;class UI{constructor(e){this.segmentGroup=e||null}}class CM{constructor(e){this.urlTree=e}}function ow(n){return q0(new UI(n))}function EM(n){return q0(new CM(n))}function zk(n){return q0(new c.vHH(4e3,VI&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Zk{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=FI(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Gt).pipe((0,ft.U)(u=>this.createUrlTree(AI(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zh(u=>{if(u instanceof CM)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof UI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Gt).pipe((0,ft.U)(s=>this.createUrlTree(AI(s),e.queryParams,e.fragment))).pipe(zh(s=>{throw s instanceof UI?this.noMatchError(s):s}))}noMatchError(e){return new c.vHH(4002,VI&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=JT(e);return new qh(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(u=>new Xt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Jt.D)(s).pipe(ng(u=>{const d=r.children[u],m=gM(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,ft.U)(v=>({segment:v,outlet:u})))}),lt((u,d)=>(u[d.outlet]=d.segment,u),{}),Lx())}expandSegment(e,t,r,s,u,d){return(0,Jt.D)(r).pipe(ng(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,d).pipe(zh(E=>{if(E instanceof UI)return D(null);throw E}))),ai(m=>!!m),zh((m,v)=>{if(fS(m))return wM(t,s,u)?D(new Xt([],{})):ow(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,d,m){return vM(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):ow(t):ow(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?EM(u):this.lineralizeSegments(r,u).pipe((0,ms.z)(d=>{const m=new Xt(d,{});return this.expandSegment(e,m,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:m,consumedSegments:v,remainingSegments:E,positionalParamSegments:T}=gS(t,s,u);if(!m)return ow(t);const O=this.applyRedirectCommands(v,s.redirectTo,T);return s.redirectTo.startsWith("/")?EM(O):this.lineralizeSegments(s,O).pipe((0,ms.z)(V=>this.expandSegment(e,t,r,V.concat(E),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=pM(r,e),r.loadChildren?(r._loadedRoutes?D({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Xt(s,{})))):D(new Xt(s,{}))):yM(t,r,s,e).pipe(Zr(({matched:d,consumedSegments:m,remainingSegments:v})=>d?this.getChildConfig(e=r._injector??e,r,s).pipe((0,ms.z)(T=>{const O=T.injector??e,V=T.routes,{segmentGroup:W,slicedSegments:ie}=FI(t,m,v,V),Ae=new Xt(W.segments,W.children);if(0===ie.length&&Ae.hasChildren())return this.expandChildren(O,V,Ae).pipe((0,ft.U)(at=>new Xt(m,at)));if(0===V.length&&0===ie.length)return D(new Xt(m,{}));const xe=ga(r)===u;return this.expandSegment(O,Ae,V,ie,xe?Gt:u,!0).pipe((0,ft.U)(Mt=>new Xt(m.concat(Mt.segments),Mt.children)))})):ow(t)))}getChildConfig(e,t,r){return t.children?D({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?D({routes:t._loadedRoutes,injector:t._loadedInjector}):function Vk(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?D(!0):D(s.map(d=>{const m=B_(d,n);return Gh(function bk(n){return n&&sw(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(j_(),_M())}(e,t,r).pipe((0,ms.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,un.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Gk(n){return q0(dM(VI&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):D({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return D(r);if(s.numberOfChildren>1||!s.children[Gt])return zk(e.redirectTo);s=s.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new qh(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ni(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return Ni(t.children,(m,v)=>{d[v]=this.createSegmentGroup(e,m,r,s)}),new Xt(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new c.vHH(4001,VI&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Kk{}class Jk{constructor(e,t,r,s,u,d,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=d,this.urlSerializer=m}recognize(){const e=FI(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new RI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new rd(r,t),u=new uM(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=aM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Jt.D)(Object.keys(r.children)).pipe(ng(s=>{const u=r.children[s],d=gM(t,s);return this.processSegmentGroup(e,d,u,s)}),lt((s,u)=>s&&u?(s.push(...u),s):null),function _P(n,e=!1){return(0,pr.e)((t,r)=>{let s=0;t.subscribe((0,yn.x)(r,u=>{const d=n(u,s++);(d||e)&&r.next(u),!d&&r.complete()}))})}(s=>null!==s),Hi(null),Lx(),(0,ft.U)(s=>{if(null===s)return null;const u=bM(s);return function Xk(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Jt.D)(t).pipe(ng(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,s,u)),ai(d=>!!d),zh(d=>{if(fS(d))return wM(r,s,u)?D([]):D(null);throw d}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!vM(t,r,s,u))return D(null);let d;if("**"===t.path){const m=s.length>0?Bx(s).parameters:{},v=TM(r)+s.length;d=D({snapshot:new RI(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SM(t),ga(t),t.component??t._loadedComponent??null,t,DM(r),v,AM(t)),consumedSegments:[],remainingSegments:[]})}else d=yM(r,t,s,e).pipe((0,ft.U)(({matched:m,consumedSegments:v,remainingSegments:E,parameters:T})=>{if(!m)return null;const O=TM(r)+v.length;return{snapshot:new RI(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SM(t),ga(t),t.component??t._loadedComponent??null,t,DM(r),O,AM(t)),consumedSegments:v,remainingSegments:E}}));return d.pipe(Zr(m=>{if(null===m)return D(null);const{snapshot:v,consumedSegments:E,remainingSegments:T}=m;e=t._injector??e;const O=t._loadedInjector??e,V=function eN(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:W,slicedSegments:ie}=FI(r,E,T,V.filter(xe=>void 0===xe.redirectTo));if(0===ie.length&&W.hasChildren())return this.processChildren(O,V,W).pipe((0,ft.U)(xe=>null===xe?null:[new rd(v,xe)]));if(0===V.length&&0===ie.length)return D([new rd(v,[])]);const Ae=ga(t)===u;return this.processSegment(O,V,W,ie,Ae?Gt:u).pipe((0,ft.U)(xe=>null===xe?null:[new rd(v,xe)]))}))}}function tN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bM(n){const e=[],t=new Set;for(const r of n){if(!tN(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=bM(r.children);e.push(new rd(r.value,s))}return e.filter(r=>!t.has(r))}function DM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function TM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function SM(n){return n.data||{}}function AM(n){return n.resolve||{}}function xM(n){return"string"==typeof n.title||null===n.title}function mS(n){return Zr(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,ft.U)(()=>e)):D(e)})}const $_=new c.OlP("ROUTES");let _S=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return D(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gh(t.loadComponent()).pipe((0,ft.U)(RM),(0,un.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),KT(()=>{this.componentLoaders.delete(t)})),s=new Fx(r,()=>new bc.x).pipe(ZT());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return D({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,E,T=!1;Array.isArray(m)?E=m:(v=m.create(t).injector,E=Ux(v.get($_,[],c.XFs.Self|c.XFs.Optional)));return{routes:E.map(hS),injector:v}}),KT(()=>{this.childrenLoaders.delete(r)})),d=new Fx(u,()=>new bc.x).pipe(ZT());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Gh(t()).pipe((0,ft.U)(RM),(0,ms.z)(r=>r instanceof c.YKP||Array.isArray(r)?D(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RM(n){return function cN(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let jI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new bc.x,this.configLoader=(0,c.f3M)(_S),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(K0),this.rootContexts=(0,c.f3M)(tw),this.navigationId=0,this.afterPreactivation=()=>D(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new YP(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new KP(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new du({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:X0,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ii(r=>0!==r.id),(0,ft.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Zr(r=>{let s=!1,u=!1;return D(r).pipe((0,un.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zr(d=>{const m=t.browserUrlTree.toString(),v=!t.navigated||d.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!v&&"reload"!==(d.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new MI(d.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=d.rawUrl,d.resolve(null),bi.E}if(t.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return OM(d.source)&&(t.browserUrlTree=d.extractedUrl),D(d).pipe(Zr(T=>{const O=this.transitions?.getValue();return this.events.next(new nS(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),O!==this.transitions?.getValue()?bi.E:Promise.resolve(T)}),function Wk(n,e,t,r){return Zr(s=>function qk(n,e,t,r,s){return new Zk(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,ft.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,un.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function rN(n,e,t,r,s){return(0,ms.z)(u=>function Qk(n,e,t,r,s,u,d="emptyOnly"){return new Jk(n,e,t,r,s,d,u).recognize().pipe(Zr(m=>null===m?function Yk(n){return new Di.y(e=>e.error(n))}(new Kk):D(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,ft.U)(d=>({...u,targetSnapshot:d}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,un.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const V=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(V,T)}t.browserUrlTree=T.urlAfterRedirects}const O=new zP(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(O)}));if(v&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:O,source:V,restoredState:W,extras:ie}=d,Ae=new nS(T,this.urlSerializer.serialize(O),V,W);this.events.next(Ae);const xe=oM(O,this.rootComponentType).snapshot;return D(r={...d,targetSnapshot:xe,urlAfterRedirects:O,extras:{...ie,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new MI(d.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=d.rawUrl,d.resolve(null),bi.E}}),(0,un.b)(d=>{const m=new GP(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}),(0,ft.U)(d=>r={...d,guards:vk(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function Mk(n,e){return(0,ms.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?D({...t,guardsResult:!0}):function Rk(n,e,t,r){return(0,Jt.D)(n).pipe((0,ms.z)(s=>function Lk(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?D(u.map(m=>{const v=nw(e)??s,E=B_(m,v);return Gh(function Sk(n){return n&&sw(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):v.runInContext(()=>E(n,e,t,r))).pipe(ai())})).pipe(j_()):D(!0)}(s.component,s.route,t,e,r)),ai(s=>!0!==s,!0))}(d,r,s,n).pipe((0,ms.z)(m=>m&&function Ik(n){return"boolean"==typeof n}(m)?function Ok(n,e,t,r){return(0,Jt.D)(e).pipe(ng(s=>J(function kk(n,e){return null!==n&&e&&e(new QP(n)),D(!0)}(s.route.parent,r),function Pk(n,e){return null!==n&&e&&e(new XP(n)),D(!0)}(s.route,r),function Fk(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function wk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>kx(()=>D(d.guards.map(v=>{const E=nw(d.node)??t,T=B_(v,E);return Gh(function Tk(n){return n&&sw(n.canActivateChild)}(T)?T.canActivateChild(r,n):E.runInContext(()=>T(r,n))).pipe(ai())})).pipe(j_())));return D(u).pipe(j_())}(n,s.path,t),function Nk(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return D(!0);const s=r.map(u=>kx(()=>{const d=nw(e)??t,m=B_(u,d);return Gh(function Dk(n){return n&&sw(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ai())}));return D(s).pipe(j_())}(n,s.route,t))),ai(s=>!0!==s,!0))}(r,u,n,e):D(m)),(0,ft.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,d=>this.events.next(d)),(0,un.b)(d=>{if(r.guardsResult=d.guardsResult,ig(d.guardsResult))throw lM(0,d.guardsResult);const m=new qP(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(m)}),Ii(d=>!!d.guardsResult||(t.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),mS(d=>{if(d.guards.canActivateChecks.length)return D(d).pipe((0,un.b)(m=>{const v=new ZP(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),Zr(m=>{let v=!1;return D(m).pipe(function iN(n,e){return(0,ms.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return D(t);let u=0;return(0,Jt.D)(s).pipe(ng(d=>function sN(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!xM(s)&&(u[Z0]=s.title),function oN(n,e,t,r){const s=function aN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return D({});const u={};return(0,Jt.D)(s).pipe((0,ms.z)(d=>function uN(n,e,t,r){const s=nw(e)??r,u=B_(n,s);return Gh(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ai(),(0,un.b)(m=>{u[d]=m}))),WT(1),function yP(n){return(0,ft.U)(()=>n)}(u),zh(d=>fS(d)?bi.E:q0(d)))}(u,n,e,r).pipe((0,ft.U)(d=>(n._resolvedData=d,n.data=aM(n,t).resolve,s&&xM(s)&&(n.data[Z0]=s.title),null)))}(d.route,r,n,e)),(0,un.b)(()=>u++),WT(1),(0,ms.z)(d=>u===s.length?D(t):bi.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,un.b)({next:()=>v=!0,complete:()=>{v||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,un.b)(m=>{const v=new WP(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),mS(d=>{const m=v=>{const E=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,un.b)(T=>{v.component=T}),(0,ft.U)(()=>{})));for(const T of v.children)E.push(...m(T));return E};return Ox(m(d.targetSnapshot.root)).pipe(Hi(),Zo(1))}),mS(()=>this.afterPreactivation()),(0,ft.U)(d=>{const m=function uk(n,e,t){const r=ew(n,e._root,t?t._root:void 0);return new sM(r,e)}(t.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:m}}),(0,un.b)(d=>{t.currentUrlTree=d.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),t.routerState=d.targetRouterState,"deferred"===t.urlUpdateStrategy&&(d.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,d),t.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new yk(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,d=>this.events.next(d)),Zo(1),(0,un.b)({next:d=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new sg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{s=!0}}),KT(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),zh(d=>{if(u=!0,fM(d)){hM(d)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new xI(r.id,this.urlSerializer.serialize(r.extractedUrl),d.message,d.cancellationCode);if(this.events.next(m),hM(d)){const v=t.urlHandlingStrategy.merge(d.url,t.rawUrlTree),E={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||OM(r.source)};t.scheduleNavigation(v,X0,null,E,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new rS(r.id,this.urlSerializer.serialize(r.extractedUrl),d,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(d))}catch(v){r.reject(v)}}return bi.E}))}))}cancelNavigationTransition(t,r,s){const u=new xI(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OM(n){return n!==X0}let PM=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[Z0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(lN)},providedIn:"root"}),n})(),lN=(()=>{class n extends PM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Go))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(fN)},providedIn:"root"}),n})();class hN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let fN=(()=>{class n extends hN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $I=new c.OlP("",{providedIn:"root",factory:()=>({})});let gN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(mN)},providedIn:"root"}),n})(),mN=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _N(n){throw n}function yN(n,e,t){return e.parse("/")}const vN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)($I,{optional:!0})||{},this.errorHandler=this.options.errorHandler||_N,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||yN,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(gN),this.routeReuseStrategy=(0,c.f3M)(dN),this.urlCreationStrategy=(0,c.f3M)(sk),this.titleStrategy=(0,c.f3M)(PM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ux((0,c.f3M)($_,{optional:!0})??[]),this.navigationTransitions=(0,c.f3M)(jI),this.urlSerializer=(0,c.f3M)(K0),this.location=(0,c.f3M)(Ne),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new qh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oM(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),X0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},d=s?.navigationId?s:null;if(s){const v={...s};delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(hS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:v}=r,E=v?this.currentUrlTree.fragment:d;let T=null;switch(m){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,T,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ig(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,X0,null,r)}navigate(t,r={skipLocationChange:!1}){return function CN(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...vN}:!1===r?{...wN}:r,ig(t))return $x(this.currentUrlTree,t,s);const u=this.parseUrl(t);return $x(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,d){if(this.disposed)return Promise.resolve(!1);let m,v,E,T;return d?(m=d.resolve,v=d.reject,E=d.promise):E=new Promise((O,V)=>{m=O,v=V}),T="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===s?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HI=(()=>{class n{constructor(t,r,s,u,d,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new bc.x;const v=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===v||"area"===v,this.isAnchorElement?this.subscription=t.events.subscribe(E=>{E instanceof sg&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Wr),c.Y36(Zh),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(st))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})();class kM{}let bN=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Ii(t=>t instanceof sg),ng(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,c.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Jt.D)(s).pipe((0,F.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):D(null);const u=s.pipe((0,ms.z)(d=>null===d?D(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,Jt.D)([u,d]).pipe((0,F.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Wr),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(kM),c.LFG(_S))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vS=new c.OlP("");let NM=(()=>{class n{constructor(t,r,s,u,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();var Io=(()=>((Io=Io||{})[Io.COMPLETE=0]="COMPLETE",Io[Io.FAILED=1]="FAILED",Io[Io.REDIRECTING=2]="REDIRECTING",Io))();const H_=!1;function Wh(n,e){return{\u0275kind:n,\u0275providers:e}}const wS=new c.OlP("",{providedIn:"root",factory:()=>!1});function LM(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(Wr),s=n.get(VM);1===n.get(CS)&&r.initialNavigation(),n.get(UM,null,c.XFs.Optional)?.setUpPreloading(),n.get(vS,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const VM=new c.OlP(H_?"bootstrap done indicator":"",{factory:()=>new bc.x}),CS=new c.OlP(H_?"initial navigation":"",{providedIn:"root",factory:()=>1});function xN(){let n=[];return n=H_?[{provide:c.Xts,multi:!0,useFactory:()=>{const e=(0,c.f3M)(Wr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function tk(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Wh(1,n)}const UM=new c.OlP(H_?"router preloader":"");function MN(n){return Wh(0,[{provide:UM,useExisting:bN},{provide:kM,useExisting:n}])}const aw=!1,BM=new c.OlP(aw?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),RN=[Ne,{provide:K0,useClass:YT},Wr,tw,{provide:Zh,useFactory:function FM(n){return n.routerState.root},deps:[Wr]},_S,aw?{provide:wS,useValue:!0}:[]];function ON(){return new c.PXZ("Router",Wr)}let jM=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[RN,aw&&r?.enableTracing?xN().\u0275providers:[],{provide:$_,multi:!0,useValue:t},{provide:BM,useFactory:FN,deps:[[Wr,new c.FiY,new c.tp0]]},{provide:$I,useValue:r||{}},r?.useHash?{provide:st,useClass:Ee}:{provide:st,useClass:Ce},{provide:vS,useFactory:()=>{const n=(0,c.f3M)(no),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)($I),r=(0,c.f3M)(jI),s=(0,c.f3M)(K0);return t.scrollOffset&&n.setOffset(t.scrollOffset),new NM(s,r,n,e,t)}},r?.preloadingStrategy?MN(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:ON},r?.initialNavigation?LN(r):[],[{provide:$M,useFactory:LM},{provide:c.tb,multi:!0,useExisting:$M}]]}}static forChild(t){return{ngModule:n,providers:[{provide:$_,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(BM,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[lS]}),n})();function FN(n){if(aw&&n)throw new c.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function LN(n){return["disabled"===n.initialNavigation?Wh(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(Wr);return()=>{e.setUpLocationChangeListener()}}},{provide:CS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wh(2,[{provide:CS,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(ae,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Wr),u=e.get(VM);(function DN(n,e){n.events.pipe(Ii(t=>t instanceof sg||t instanceof xI||t instanceof rS||t instanceof MI),(0,ft.U)(t=>t instanceof sg||t instanceof MI?Io.COMPLETE:t instanceof xI&&(0===t.code||1===t.code)?Io.REDIRECTING:Io.FAILED),Ii(t=>t!==Io.REDIRECTING),Zo(1)).subscribe(()=>{e()})})(s,()=>{r(!0)}),e.get(jI).afterPreactivation=()=>(r(!0),u.closed?D(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const $M=new c.OlP(aw?"Router Initializer":"");function UN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",2),c._uU(1),c.TgZ(2,"span",3),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();let m;return c.KtG(d.goToRoom(null!==(m=u.id)&&void 0!==m?m:""))}),c._uU(3,"Entrar"),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",t.name," ")}}let BN=(()=>{class n{constructor(t){this.router=t}ngOnInit(){}goToRoom(t){this.router.navigate(["tasks",t])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Wr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-rooms-list"]],inputs:{rooms:"rooms"},decls:2,vars:1,consts:[[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","badge-primary","badge-pill",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"ul",0),c.YNc(1,UN,4,1,"li",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.rooms))},dependencies:[mn],styles:[".list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{cursor:pointer}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:var(--dark)}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:nth-child(odd)   span[_ngcontent-%COMP%]{background-color:var(--red)}"]}),n})(),HM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),og=(()=>{class n extends HM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Sc=new c.OlP("NgValueAccessor"),HN={provide:Sc,useExisting:(0,c.Gpc)(()=>uw),multi:!0},GN=new c.OlP("CompositionEventMode");let uw=(()=>{class n extends HM{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function zN(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(GN,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([HN]),c.qOj]}),n})();const qN=!1;function Kh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function GM(n){return null!=n&&"number"==typeof n.length}const Ji=new c.OlP("NgValidators"),Yh=new c.OlP("NgAsyncValidators"),ZN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class WN{static min(e){return function qM(n){return e=>{if(Kh(e.value)||Kh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ZM(n){return e=>{if(Kh(e.value)||Kh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return WM(e)}static requiredTrue(e){return function KM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function YM(n){return Kh(n.value)||ZN.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function QM(n){return e=>Kh(e.value)||!GM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function JM(n){return e=>GM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function XM(n){if(!n)return zI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Kh(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return sR(e)}static composeAsync(e){return oR(e)}}function WM(n){return Kh(n.value)?{required:!0}:null}function zI(n){return null}function eR(n){return null!=n}function tR(n){const e=(0,c.QGY)(n)?(0,Jt.D)(n):n;if(qN&&!(0,c.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new c.vHH(-1101,t)}return e}function nR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function rR(n,e){return e.map(t=>t(n))}function iR(n){return n.map(e=>function KN(n){return!n.validate}(e)?e:t=>e.validate(t))}function sR(n){if(!n)return null;const e=n.filter(eR);return 0==e.length?null:function(t){return nR(rR(t,e))}}function ES(n){return null!=n?sR(iR(n)):null}function oR(n){if(!n)return null;const e=n.filter(eR);return 0==e.length?null:function(t){return function jN(...n){const e=(0,b.jO)(n),{args:t,keys:r}=xx(n),s=new Di.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let v=d,E=d;for(let T=0;T<d;T++){let O=!1;(0,hI.Xf)(t[T]).subscribe((0,yn.x)(u,V=>{O||(O=!0,E--),m[T]=V},()=>v--,void 0,()=>{(!v||!O)&&(E||u.next(r?Rx(r,m):m),u.complete())}))}});return e?s.pipe(Mx(e)):s}(rR(t,e).map(tR)).pipe((0,ft.U)(nR))}}function IS(n){return null!=n?oR(iR(n)):null}function aR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uR(n){return n._rawValidators}function cR(n){return n._rawAsyncValidators}function bS(n){return n?Array.isArray(n)?n:[n]:[]}function GI(n,e){return Array.isArray(n)?n.includes(e):n===e}function lR(n,e){const t=bS(e);return bS(n).forEach(s=>{GI(t,s)||t.push(s)}),t}function dR(n,e){return bS(e).filter(t=>!GI(n,t))}class hR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ES(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=IS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _s extends hR{get formDirective(){return null}get path(){return null}}class Qh extends hR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let DS=(()=>{class n extends fR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Qh,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),TS=(()=>{class n extends fR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_s,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();function pR(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const xS=!1,cw="VALID",ZI="INVALID",z_="PENDING",lw="DISABLED";function MS(n){return(WI(n)?n.validators:n)||null}function RS(n,e){return(WI(e)?e.asyncValidators:n)||null}function WI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class _R{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cw}get invalid(){return this.status===ZI}get pending(){return this.status==z_}get disabled(){return this.status===lw}get enabled(){return this.status!==lw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dR(e,this._rawAsyncValidators))}hasValidator(e){return GI(this._rawValidators,e)}hasAsyncValidator(e){return GI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=z_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cw||this.status===z_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lw:cw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=z_,this._hasOwnPendingAsyncValidator=!0;const t=tR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?lw:this.errors?ZI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(z_)?z_:this._anyControlsHaveStatus(ZI)?ZI:cw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){WI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function nF(n){return Array.isArray(n)?ES(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function rF(n){return Array.isArray(n)?IS(n):n||null}(this._rawAsyncValidators)}}class dw extends _R{constructor(e,t,r){super(MS(t),RS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function mR(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new c.vHH(1002,xS?function tF(n,e){return`Must supply a value for form control ${pR(n,e)}`}(e,s):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function gR(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,xS?function XN(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new c.vHH(1001,xS?function eF(n,e){return`Cannot find form control ${pR(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const G_=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>KI}),KI="always";function hw(n,e,t=KI){OS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function oF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yR(n,e)})}(n,e),function uF(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function aF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sF(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function QI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),XI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function JI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function OS(n,e){const t=uR(n);null!==e.validator?n.setValidators(aR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=cR(n);null!==e.asyncValidator?n.setAsyncValidators(aR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();JI(e._rawValidators,s),JI(e._rawAsyncValidators,s)}function XI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=uR(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=cR(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return JI(e._rawValidators,r),JI(e._rawAsyncValidators,r),t}function yR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function CR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ER(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const eb=class extends _R{constructor(e=null,t,r){super(MS(t),RS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),WI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ER(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ER(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let SR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),xR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const LS=new c.OlP("NgModelWithFormControlWarning"),EF={provide:_s,useExisting:(0,c.Gpc)(()=>pw)};let pw=(()=>{class n extends _s{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(XI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return hw(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){QI(t.control||null,t,!1),function hF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function wR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(QI(r||null,t),(n=>n instanceof eb)(s)&&(hw(s,t,this.callSetDisabledState),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function vR(n,e){OS(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function cF(n,e){return XI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){OS(this.form,this),this._oldForm&&XI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ji,10),c.Y36(Yh,10),c.Y36(G_,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([EF]),c.qOj,c.TTD]}),n})();const DF={provide:Qh,useExisting:(0,c.Gpc)(()=>tb)};let tb=(()=>{class n extends Qh{set isDisabled(t){}constructor(t,r,s,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function NS(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===uw?t=u:function dF(n){return Object.getPrototypeOf(n.constructor)===og}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function kS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function YI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(_s,13),c.Y36(Ji,10),c.Y36(Yh,10),c.Y36(Sc,10),c.Y36(LS,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([DF]),c.qOj,c.TTD]}),n})(),ag=(()=>{class n{constructor(){this._validator=zI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const kF={provide:Ji,useExisting:(0,c.Gpc)(()=>nb),multi:!0};let nb=(()=>{class n extends ag{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=t=>WM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([kF]),c.qOj]}),n})(),BF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[xR]}),n})(),$F=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:LS,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:G_,useValue:t.callSetDisabledState??KI}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[BF]}),n})();class rb{static FieldInvalid(e){return e.invalid&&(e.dirty||e.touched)}static MarkFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched(),t.controls&&rb.MarkFormGroupTouched(t)})}}const GR=function(n){return{hidden:n}},HF=function(n){return{"is-invalid":n}};let zF=(()=>{class n{constructor(t,r){this.firestore=t,this.router=r,this.loading=!1,this.messageError="",this.form=new dw({roomName:new eb("",WN.required)})}ngOnInit(){}onSubmit(){this.validateForm()&&(this.loading=!0,this.firestore.collection("rooms").add(Object.assign({name:this.form.get("roomName")?.value,average:"-",isFlip:!1,currentTask:0,tasks:[],participants:[],votes:[]})).then(t=>{this.loading=!1,this.goToTaskPage(t)}))}goToTaskPage(t){this.router.navigateByUrl(`/tasks/${t.id}`)}validateForm(){return this.messageError="",rb.MarkFormGroupTouched(this.form),this.form.valid?!this.roomAlreadyExist()||(this.messageError="Esta sala j\xe1 existe \u{1f914}",!1):(this.messageError="Voc\xea se esqueceu de preencher o nome da sala \u{1f61c}",!1)}roomAlreadyExist(){return void 0!==this.rooms?.find(t=>t?.name?.toLowerCase().trim()==this.form.get("roomName")?.value?.toLowerCase().trim())}FieldInvalid(t){var r=this.form.get(t);return!r||rb.FieldInvalid(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(tg),c.Y36(Wr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-rooms-form"]],inputs:{rooms:"rooms"},decls:12,vars:11,consts:[[1,"loading-content",3,"ngClass"],[1,"form-room","text-center",3,"ngClass","formGroup","ngSubmit"],[1,"h3","mb-3","font-weight-normal"],["formControlName","roomName","type","text","id","validationServer03","placeholder","Nome da sala","required","",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"app-loading"),c.qZA(),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"h1",2),c._uU(4,"Crie uma sala para come\xe7ar"),c.qZA(),c.TgZ(5,"div"),c._UZ(6,"input",3),c.TgZ(7,"div",4),c._uU(8),c.qZA()(),c._UZ(9,"br"),c.TgZ(10,"button",5),c._uU(11,"Criar"),c.qZA()()),2&t&&(c.Q6J("ngClass",c.VKq(5,GR,!r.loading)),c.xp6(2),c.Q6J("ngClass",c.VKq(7,GR,r.loading))("formGroup",r.form),c.xp6(4),c.Q6J("ngClass",c.VKq(9,HF,r.messageError.length>0)),c.xp6(2),c.hij(" ",r.messageError," "))},dependencies:[He,SR,uw,DS,TS,nb,pw,tb,Ax],styles:[".loading-content[_ngcontent-%COMP%]{margin:0 auto;width:80px}.form-room[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:0 auto}.hidden[_ngcontent-%COMP%]{display:none}"]}),n})();const $S=function(n){return{hidden:n}};let GF=(()=>{class n{constructor(t,r){this.firestore=t,this.userService=r,this.loading=0,this.loadUser()}ngOnInit(){}loadUser(){this.getUser().pipe((0,un.b)(()=>{this.startLoading()})).subscribe(this.loadRooms.bind(this))}loadRooms(t){this.getRooms().subscribe(r=>{var s=this.getRoomsByEmail(r,t?.email??"");this.setRooms(s),this.stopLoading()})}getRoomsByEmail(t,r){return t.filter(s=>s.participants?.map(u=>u.email).includes(r))}getUser(){return this.userService.getUser().pipe(ai())}getRooms(){return this.firestore.collection("rooms").snapshotChanges().pipe((0,ft.U)(r=>r.map(this.actionToRoomModel)))}actionToRoomModel(t){const r=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},r)}setRooms(t){this.rooms=t.length<=0?[]:t.sort(this.sort)}sort(t,r){return t?.name?.localeCompare(r?.name??"")??0}startLoading(){this.loading++}stopLoading(){this.loading--}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(tg),c.Y36(qT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-rooms"]],decls:7,vars:11,consts:[[1,"loading-content",3,"ngClass"],[3,"ngClass","rooms"],[1,"list-room","text-center",3,"ngClass"],[1,"h3","mb-3","font-weight-normal"],[3,"rooms"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"app-loading"),c.qZA(),c._UZ(2,"app-rooms-form",1),c.TgZ(3,"div",2)(4,"h1",3),c._uU(5,"Ou entre em uma sala j\xe1 existente"),c.qZA(),c._UZ(6,"app-rooms-list",4),c.qZA()),2&t&&(c.Q6J("ngClass",c.VKq(5,$S,!(r.loading>0))),c.xp6(2),c.Q6J("ngClass",c.VKq(7,$S,r.loading>0))("rooms",r.rooms),c.xp6(1),c.Q6J("ngClass",c.VKq(9,$S,r.loading>0)),c.xp6(3),c.Q6J("rooms",r.rooms))},dependencies:[He,Ax,BN,zF],styles:[".list-room[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:0 auto}.loading-content[_ngcontent-%COMP%]{margin:50px auto;width:80px}.hidden[_ngcontent-%COMP%]{display:none}"]}),n})();function qF(n,e){if(1&n&&(c.TgZ(0,"nav",8),c._UZ(1,"img",9),c._uU(2),c.ALo(3,"lowercase"),c.qZA()),2&n){const t=e.ngIf;c.xp6(1),c.Q6J("src",t.photoURL,c.LSH),c.xp6(1),c.hij(" ",c.lcZ(3,2,t.displayName)," ")}}let ZF=(()=>{class n{constructor(t,r){this.angularFireAuth=t,this.router=r}ngOnInit(){this.angularFireAuth.user.subscribe(t=>{console.log(t.photoURL)})}logout(){this.angularFireAuth.signOut(),this.router.navigateByUrl("/login")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(eg),c.Y36(Wr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-menu"]],decls:18,vars:3,consts:[[1,"d-flex","flex-column","flex-md-row","align-items-center","p-3","px-md-4","mb-3","bg-white","border-bottom","box-shadow"],[1,"my-0","mr-md-auto","font-weight-normal"],["routerLink","/",1,"main-title"],[1,"icon"],[1,"red"],[1,"text"],["class","my-2 my-md-0 mr-md-3 user",4,"ngIf"],[1,"btn","btn-outline-primary",3,"routerLink","click"],[1,"my-2","my-md-0","mr-md-3","user"],["alt","User",3,"src"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"h5",1)(2,"a",2)(3,"span",3)(4,"span"),c._uU(5,"\u2660"),c.qZA(),c.TgZ(6,"span",4),c._uU(7,"\u2665"),c.qZA(),c.TgZ(8,"span"),c._uU(9,"\u2663"),c.qZA(),c.TgZ(10,"span",4),c._uU(11,"\u2666"),c.qZA()(),c.TgZ(12,"span",5),c._uU(13,"Planning Poker"),c.qZA()()(),c.YNc(14,qF,4,4,"nav",6),c.ALo(15,"async"),c.TgZ(16,"a",7),c.NdJ("click",function(){return r.logout()}),c._uU(17,"Sair"),c.qZA()()),2&t&&(c.xp6(14),c.Q6J("ngIf",c.lcZ(15,1,r.angularFireAuth.user)))},dependencies:[dr,HI,Xr,Is],styles:[".main-title[_ngcontent-%COMP%]{text-decoration:none;color:var(--dark)}.main-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;border:2px solid var(--dark);border-radius:4px;width:22px;height:28px;line-height:21px;box-sizing:border-box;background-color:var(--white);margin-right:-4px;padding:0 0 0 2px;transition-duration:.3s;transform:rotate(340deg) translate(0)}.main-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span.red[_ngcontent-%COMP%]{color:var(--red)}.main-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{transition-duration:.3s;transform:rotate(340deg) translateY(-5px);top:-6px}.main-title[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:12px;font-weight:700}.user[_ngcontent-%COMP%]{text-transform:capitalize}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;position:absolute;margin-left:-50px;margin-top:-8px}"]}),n})(),WF=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-main"]],decls:2,vars:0,template:function(t,r){1&t&&c._UZ(0,"app-menu")(1,"router-outlet")},dependencies:[PI,ZF]}),n})(),KF=(()=>{class n{constructor(t,r){this.fireAuth=t,this.router=r}canActivate(t,r){return this.fireAuth.user.pipe((0,ft.U)(s=>null!=s||this.router.parseUrl("/login")))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(eg),c.LFG(Wr))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qR(n,e=ho.z){return(0,pr.e)((t,r)=>{let s=null,u=null,d=null;const m=()=>{if(s){s.unsubscribe(),s=null;const E=u;u=null,r.next(E)}};function v(){const E=d+n,T=e.now();if(T<E)return s=this.schedule(void 0,E-T),void r.add(s);m()}t.subscribe((0,yn.x)(r,E=>{u=E,d=e.now(),s||(s=e.schedule(v,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}const ib=[{emoji:"\u{1f6f4}",description:"Claro o que tem que fazer"},{emoji:"\u{1f6b2}",description:"Ok o que tem que fazer"},{emoji:"\u{1f697}",description:"\xc9 complicado o que tem que fazer"},{emoji:"\u2728",description:"Claro como fazer"},{emoji:"\u{1f9ba}",description:"Ok como fazer"},{emoji:"\u{1f9e8}",description:"\xc9 complicado como fazer"},{emoji:"\u{1f431}\u200d\u{1f4bb}",description:"Desenvolver \xe9 f\xe1cil"},{emoji:"\u{1f469}\u200d\u{1f4bb}",description:"Desenvolver t\xe1 ok"},{emoji:"\u{1f528}",description:"T\xe1 complicado de desenvolver"},{emoji:"\u{1f604}",description:"Reproduzir \xe9 simples"},{emoji:"\u{1f914}",description:"T\xe1 ok para reproduir"},{emoji:"\u{1f921}",description:"T\xe1 complicado de reproduzir"}];function YF(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c._UZ(2,"br"),c._uU(3,"\u2665"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t.value?null:t.value.description)}}function QF(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c._UZ(2,"br"),c._uU(3,"\u2666"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t.value?null:t.value.description)}}function JF(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c._UZ(2,"br"),c._uU(3,"\u2660"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t.value?null:t.value.description)}}function XF(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c._UZ(2,"br"),c._uU(3,"\u2663"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(null==t.value?null:t.value.description)}}function eL(n,e){if(1&n&&(c.TgZ(0,"span",14),c._uU(1),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.hij("",null==t.value?null:t.value.description," \u2663")}}function tL(n,e){if(1&n&&(c.TgZ(0,"b",15),c._uU(1),c.qZA()),2&n){const t=e.$implicit,r=c.oxw(3);c.Q6J("title",r.getTitle(t)),c.xp6(1),c.Oqu(t)}}function nL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2665"),c.qZA())}function rL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2666"),c.qZA())}function iL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2660"),c.qZA())}function sL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2663"),c.qZA())}const ZR=function(){return["0","A","2","3"]},WR=function(){return["5","8"]},oL=function(){return["K","21","34","55","89"]},aL=function(){return["?"]},uL=function(){return["Pass"]},cL=function(){return["K"]},lL=function(n){return{k:n}},dL=function(){return["13","21","34","55","89"]},hL=function(){return["?","Pass"]};function fL(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li",8),c.YNc(2,YF,4,1,"span",5),c.YNc(3,QF,4,1,"span",5),c.YNc(4,JF,4,1,"span",5),c.YNc(5,XF,4,1,"span",5),c.YNc(6,eL,2,1,"span",9),c.TgZ(7,"p",10),c.YNc(8,tL,2,2,"b",11),c.qZA()(),c.TgZ(9,"li")(10,"div",12),c.YNc(11,nL,2,0,"span",5),c.YNc(12,rL,2,0,"span",5),c.YNc(13,iL,2,0,"span",5),c.YNc(14,sL,2,0,"span",5),c.qZA()(),c.TgZ(15,"li",13),c._uU(16),c.ALo(17,"lowercase"),c.qZA()()),2&n){const t=c.oxw().$implicit;let r,s,u,d,m,v,E,T,O,V;c.xp6(2),c.Q6J("ngIf",c.DdM(14,ZR).includes(null!==(r=null==t||null==t.value?null:t.value.description)&&void 0!==r?r:"")),c.xp6(1),c.Q6J("ngIf",c.DdM(15,WR).includes(null!==(s=null==t.value?null:t.value.description)&&void 0!==s?s:"")),c.xp6(1),c.Q6J("ngIf",c.DdM(16,oL).includes(null!==(u=null==t.value?null:t.value.description)&&void 0!==u?u:"")),c.xp6(1),c.Q6J("ngIf",c.DdM(17,aL).includes(null!==(d=null==t.value?null:t.value.description)&&void 0!==d?d:"")),c.xp6(1),c.Q6J("ngIf",c.DdM(18,uL).includes(null!==(m=null==t.value?null:t.value.description)&&void 0!==m?m:"")),c.xp6(2),c.Q6J("ngForOf",null==t.value?null:t.value.emojis),c.xp6(2),c.Q6J("ngClass",c.VKq(20,lL,c.DdM(19,cL).includes(null!==(v=null==t.value?null:t.value.description)&&void 0!==v?v:""))),c.xp6(1),c.Q6J("ngIf",c.DdM(22,ZR).includes(null!==(E=null==t.value?null:t.value.description)&&void 0!==E?E:"")),c.xp6(1),c.Q6J("ngIf",c.DdM(23,WR).includes(null!==(T=null==t.value?null:t.value.description)&&void 0!==T?T:"")),c.xp6(1),c.Q6J("ngIf",c.DdM(24,dL).includes(null!==(O=null==t.value?null:t.value.description)&&void 0!==O?O:"")),c.xp6(1),c.Q6J("ngIf",c.DdM(25,hL).includes(null!==(V=null==t.value?null:t.value.description)&&void 0!==V?V:"")),c.xp6(2),c.Oqu(c.lcZ(17,12,t.displayName))}}const pL=function(){return["0","A","2","3","5","8"]},KR=function(n){return{red:n}};function gL(n,e){if(1&n&&(c.TgZ(0,"div",2)(1,"div",3)(2,"div")(3,"div",4),c.YNc(4,fL,18,26,"ul",5),c.qZA()(),c.TgZ(5,"div",6)(6,"div",7),c._uU(7),c.ALo(8,"lowercase"),c.qZA()()()()),2&n){const t=e.$implicit,r=c.oxw();let s;c.xp6(2),c.Gre("card text-white bg-",null==t.value?null:t.value.class," mb-3 flip-card-front"),c.xp6(1),c.Q6J("ngClass",c.VKq(12,KR,c.DdM(11,pL).includes(null!==(s=null==t||null==t.value?null:t.value.description)&&void 0!==s?s:"")))("title",t.displayName),c.xp6(1),c.Q6J("ngIf",null==r.room?null:r.room.isFlip),c.xp6(1),c.Q6J("ngClass",c.VKq(14,KR,t.isRedCard)),c.xp6(1),c.Q6J("title",t.displayName),c.xp6(1),c.Oqu(c.lcZ(8,9,t.displayName))}}const mL=function(n){return{"show-card":n}};let _L=(()=>{class n{getTitle(t){var r=this.emojisAndDescriptions.find(s=>s.emoji==t);return r?r.description:""}constructor(){this.isFlip=!1,this.emojisAndDescriptions=ib}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-votes-cards"]],inputs:{isFlip:"isFlip",room:"room"},decls:2,vars:4,consts:[[1,"row",3,"ngClass"],["class","col-sm-3 text-center flip-card",4,"ngFor","ngForOf"],[1,"col-sm-3","text-center","flip-card"],[1,"flip-card-inner"],[1,"card-body",3,"ngClass","title"],[4,"ngIf"],[1,"card","text-white","bg-info","mb-3","flip-card-back",3,"ngClass"],[1,"card-body",3,"title"],[1,"value"],["class","pass",4,"ngIf"],[1,"emojis"],[3,"title",4,"ngFor","ngForOf"],[1,"square",3,"ngClass"],[1,"name"],[1,"pass"],[3,"title"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.YNc(1,gL,9,16,"div",1),c.qZA()),2&t&&(c.Q6J("ngClass",c.VKq(2,mL,!r.isFlip)),c.xp6(1),c.Q6J("ngForOf",null==r.room?null:r.room.votes))},dependencies:[He,mn,dr,Is],styles:["@charset \"UTF-8\";.row[_ngcontent-%COMP%]{padding:20px}.card[_ngcontent-%COMP%]{text-transform:capitalize}.card-header[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap;overflow:hidden!important;text-overflow:ellipsis;cursor:context-menu}.flip-card[_ngcontent-%COMP%]{background-color:transparent;width:150px;height:150px;perspective:1000px;margin:18px 0}.flip-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d;box-shadow:0 4px 8px #0003}.show-card[_ngcontent-%COMP%]   .flip-card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{background-color:var(--light)!important;background-origin:content-box;border:2px solid var(--light);outline:12px solid var(--light);box-shadow:0 0 0 12px var(--light),0 0 0 13px #00000020,#63636333 0 2px 8px 14px}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;margin:0}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:var(--dark)}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-align:left;height:24px}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{position:absolute;transform:rotate(270deg);margin-top:-18px;font-size:26px;font-weight:700;line-height:24px;margin-left:10px;text-align:center}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span.pass[_ngcontent-%COMP%]{position:initial;transform:none;margin-top:0;font-size:26px;font-weight:700;line-height:0;margin-left:-2px;text-align:left}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   p.emojis[_ngcontent-%COMP%]{margin-top:-5px;position:absolute;right:0}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   p.emojis[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{cursor:default}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{border:2px solid var(--dark);margin:0 20px;height:96px;border-radius:6px}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:60px;transform:rotate(270deg);writing-mode:tb-rl;margin-right:9px;height:100%;line-height:20px}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .square.k[_ngcontent-%COMP%]{background:url(k.808f95fed87bf9c0.png);background-repeat:no-repeat;background-position:center center}.flip-card-front[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{text-align:right;padding-top:5px;font-weight:700;white-space:nowrap;overflow:hidden!important;text-overflow:ellipsis;cursor:context-menu}.flip-card-front[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:var(--red)}.flip-card-front[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{border:2px solid var(--red)}.flip-card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);background-image:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='10px' height='14px'><text x='0' y='12' fill='%23343a40' font-size='20'>\\2666</text></svg>\");background-color:var(--light)!important;padding:31px 30px;background-origin:content-box;box-shadow:0 0 0 2px var(--dark),0 0 0 12px var(--light),0 0 0 13px #00000020,#63636333 0 2px 8px 14px}.flip-card-back[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{height:27px;padding:0;margin:0;display:block;flex:none;color:var(--dark);font-weight:700;display:inline-block;white-space:nowrap;overflow:hidden!important;text-overflow:ellipsis;cursor:context-menu;border-radius:3px;border:2px solid var(--light);background:var(--dark);color:var(--light);outline:3px solid var(--dark)}.flip-card-back.red[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='10px' height='14px'><text x='0' y='12' fill='%23dc3545' font-size='20'>\\2666</text></svg>\");background-color:var(--light)!important;border:2px solid var(--red);outline:12px solid var(--light)}.flip-card-back.red[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background:var(--red);outline:3px solid var(--red)}"]}),n})();function yL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2665"),c.qZA())}function vL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2666"),c.qZA())}function wL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2660"),c.qZA())}const CL=function(){return["0","1","2","3","5","8"]},EL=function(n){return{red:n}};function IL(n,e){if(1&n&&(c.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),c._uU(4),c.YNc(5,yL,2,0,"span",5),c.YNc(6,vL,2,0,"span",5),c.YNc(7,wL,2,0,"span",5),c.qZA()()()()),2&n){const t=c.oxw();let r,s,u,d;c.xp6(3),c.Q6J("ngClass",c.VKq(6,EL,c.DdM(5,CL).includes(null!==(r=t.room.average)&&void 0!==r?r:"0"))),c.xp6(1),c.hij("",t.room.average," "),c.xp6(1),c.Q6J("ngIf",t.isHeart(null!==(s=t.room.average)&&void 0!==s?s:"0")),c.xp6(1),c.Q6J("ngIf",t.isDiamond(null!==(u=t.room.average)&&void 0!==u?u:"0")),c.xp6(1),c.Q6J("ngIf",t.isSpade(null!==(d=t.room.average)&&void 0!==d?d:"0"))}}let bL=(()=>{class n{constructor(){}ngOnInit(){}isHeart(t){return Number(t)<=3}isDiamond(t){return Number(t)>3&&Number(t)<=10}isSpade(t){return Number(t)>10}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-votes-average"]],inputs:{room:"room"},decls:1,vars:1,consts:[["class","card-deck mb-3 text-center",4,"ngIf"],[1,"card-deck","mb-3","text-center"],[1,"card","mb-12","box-shadow"],[1,"card-body"],[1,"card-title","pricing-card-title",3,"ngClass"],[4,"ngIf"]],template:function(t,r){1&t&&c.YNc(0,IL,8,8,"div",0),2&t&&c.Q6J("ngIf",r.room)},dependencies:[He,dr],styles:[".red[_ngcontent-%COMP%]{color:var(--red)}"]}),n})();function DL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",1)(1,"div",3)(2,"div",4)(3,"label",5),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.firstTask())}),c._uU(4," << "),c.qZA(),c.TgZ(5,"label",5),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.prevTask())}),c._uU(6," < "),c.qZA(),c.TgZ(7,"label",6),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.goTask())}),c._uU(8),c.qZA(),c.TgZ(9,"label",5),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.nextTask())}),c._uU(10," > "),c.qZA(),c.TgZ(11,"label",5),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.lastTask())}),c._uU(12," >> "),c.qZA()()()()}if(2&n){const t=c.oxw();c.xp6(7),c.Q6J("title",t.getCurrentTask(null==t.room?null:t.room.currentTask)),c.xp6(1),c.hij(" ",t.getCurrentTask(null==t.room?null:t.room.currentTask)," ")}}function TL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",12),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.resetVotesAndGoBack())}),c._uU(1,"Voltar"),c.qZA()}}function SL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",13),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.flipCard())}),c._uU(1,"Virar"),c.qZA()}}function AL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",13),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.resetVotesAndNext())}),c._uU(1,"Seguir"),c.qZA()}}const xL=function(n){return{"opacity-0":n}};function ML(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",14),c.NdJ("click",function(){c.CHM(t);const s=c.oxw(2);return c.KtG(s.resetVotesAndNext())}),c._uU(1,"Seguir"),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("ngClass",c.VKq(1,xL,t.isFlip))}}function RL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",7),c.YNc(1,TL,2,0,"button",8),c.TgZ(2,"button",9),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.resetVotes())}),c._uU(3,"Revotar"),c.qZA(),c.YNc(4,SL,2,0,"button",10),c.YNc(5,AL,2,0,"button",10),c.YNc(6,ML,2,3,"button",11),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.getCurrentTask(null==t.room?null:t.room.currentTask)),c.xp6(3),c.Q6J("ngIf",!t.isFlip),c.xp6(1),c.Q6J("ngIf",t.isFlip),c.xp6(1),c.Q6J("ngIf",t.getCurrentTask(null==t.room?null:t.room.currentTask))}}let OL=(()=>{class n{constructor(t,r){this.firestore=t,this.router=r,this.isFlip=!1}ngOnInit(){this.roomDoc=this.firestore.doc("rooms/"+this.room?.id)}hasVotes(){return!(!this.room||!this.room.votes)&&this.room.votes.length>0}getCurrentTask(r){return r=r||0,this.room&&this.room.tasks&&this.room.tasks.length>0?this.room.tasks[r]:""}resetVotesAndGoBack(){this.resetVotes(),this.prevTask()}resetVotes(){this.room&&(this.room.average="-",this.room.isFlip=!1,this.room.votes=[],this.roomDoc&&this.roomDoc.update(this.room))}flipCard(){this.room&&(this.room.isFlip=!0),this.averageCalc()}resetVotesAndNext(){this.resetVotes(),this.nextTask()}prevTask(){if(this.room){var t=(this.room.currentTask??0)-1;this.setCurrentTask(t<=-1?(this.room?.tasks?.length??0)-1:t)}}averageCalc(){if(this.room){var t=this.room?.votes?.filter(r=>-1!=r?.value?.value&&99!=r?.value?.value).map(r=>r?.value?.value);this.room.average=Math.ceil(0==t?.length?0:t?.reduce((r,s)=>(r??0)+(s??0))??0/(t?.length??0)).toString(),this.roomDocUpdate(this.room)}}roomDocUpdate(t){this.roomDoc&&t&&this.roomDoc.update(t)}nextTask(){var t=(this.room?.currentTask??0)+1;this.setCurrentTask(t>(this.room?.tasks?.length??0)-1?0:t)}setCurrentTask(t){this.room&&(this.room.currentTask=t),this.roomDocUpdate(this.room)}firstTask(){this.setCurrentTask(0)}goTask(){this.router.navigateByUrl(`/tasks/${this.room?.id}`)}lastTask(){this.setCurrentTask((this.room?.tasks?.length??0)-1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(tg),c.Y36(Wr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-votes-controls"]],inputs:{room:"room",isFlip:"isFlip"},decls:4,vars:2,consts:[["class","row",4,"ngIf"],[1,"row"],["class","col-12 btn-command text-center",4,"ngIf"],[1,"col-12"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-light",3,"title","click"],[1,"col-12","btn-command","text-center"],["type","button","class","btn btn-light float-left",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-light float-right",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-light","float-left",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-light","float-right",3,"ngClass","click"]],template:function(t,r){1&t&&(c.YNc(0,DL,13,2,"div",0),c._UZ(1,"br"),c.TgZ(2,"div",1),c.YNc(3,RL,7,4,"div",2),c.qZA()),2&t&&(c.Q6J("ngIf",r.getCurrentTask(null==r.room?null:r.room.currentTask)),c.xp6(3),c.Q6J("ngIf",r.hasVotes()))},dependencies:[He,dr],styles:['.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-family:monospace}.btn-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-child(3){font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-weight:initial;width:100%}.btn-command[_ngcontent-%COMP%]{padding-bottom:16px}.btn-command[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}.btn-command[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.btn-command[_ngcontent-%COMP%]   button.float-left[_ngcontent-%COMP%], .btn-command[_ngcontent-%COMP%]   button.float-right[_ngcontent-%COMP%]{margin:0}.btn-group-toggle[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.125);border-radius:.25rem}.btn-group-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-child(3){display:inline-block;white-space:nowrap;overflow:hidden!important;text-overflow:ellipsis}.opacity-0[_ngcontent-%COMP%]{opacity:0}.btn-command[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.125);border-radius:.25rem}@media only screen and (max-width: 360px){.btn-command[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0;width:100%}}']}),n})();class PL{}const sb=[{value:0,description:"0",class:"primary"},{value:1,description:"A",class:"primary"},{value:2,description:"2",class:"primary"},{value:3,description:"3",class:"primary"},{value:5,description:"5",class:"primary"},{value:8,description:"8",class:"primary"},{value:13,description:"K",class:"success"},{value:21,description:"21",class:"success"},{value:34,description:"34",class:"success"},{value:55,description:"55",class:"success"},{value:89,description:"89",class:"success"},{value:99,description:"?",class:"warning"},{value:-1,description:"Pass",class:"secondary"}],VL=(0,x.u3)(H,!0),UL=(0,x.u3)(N,!0);let QR=(()=>{class n{constructor(t,r){this.userService=t,this.roomService=r,this.loadUser()}loadUser(){this.userService.getUser().subscribe(t=>{this.user=t})}activeCardEvent(t,r){var s=this.getUserVote(t);this.hasVote(s)&&this.removeVote(t,s),this.addVote(t,r)}getUserVote(t){return t?.votes?.find(r=>r.uid==this.user?.uid)}removeVote(t,r){this.updatePartialRoom(t,{votes:VL(r)})}addVote(t,r){this.updatePartialRoom(t,{votes:UL({uid:this.user?.uid,displayName:this.user?.displayName,value:r,isRedCard:this.getRandomBooleanValue()})})}hasVote(t){return null!=t||null!=t}updatePartialRoom(t,r){this.roomService.updatePartialRoom(r,t?.id?.toString()??"")}getRandomBooleanValue(){return Math.random()<.5}listenerActiveVote(t){return this.roomService.listenerRoom(t).pipe((0,ft.U)(r=>r?.votes?.find(s=>s.uid==this.user?.uid)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qT),c.LFG(Sx))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2665"),c.qZA())}function jL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2666"),c.qZA())}function $L(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2660"),c.qZA())}function HL(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"\u2663"),c.qZA())}const zL=function(n){return{active:n}};function GL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",3)(1,"div",4),c.NdJ("click",function(){const u=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.setActive(u))}),c.TgZ(2,"div",5)(3,"h1",6),c._uU(4),c._UZ(5,"br"),c.YNc(6,BL,2,0,"span",7),c.YNc(7,jL,2,0,"span",7),c.YNc(8,$L,2,0,"span",7),c.YNc(9,HL,2,0,"span",7),c.qZA()()()()}if(2&n){const t=e.$implicit,r=c.oxw();let s,u,d,m;c.xp6(1),c.MT6("card card-deck-custom text-white bg-",t.class," text-",t.class," mb-3"),c.Q6J("ngClass",c.VKq(10,zL,(null==r.activeCard?null:r.activeCard.value)==t.value)),c.xp6(3),c.Oqu(t.description),c.xp6(2),c.Q6J("ngIf",(null!==(s=t.value)&&void 0!==s?s:0)<=3&&-1!=t.value),c.xp6(1),c.Q6J("ngIf",(null!==(u=t.value)&&void 0!==u?u:0)>3&&(null!==(u=t.value)&&void 0!==u?u:0)<=8),c.xp6(1),c.Q6J("ngIf",(null!==(d=t.value)&&void 0!==d?d:0)>8&&(null!==(d=t.value)&&void 0!==d?d:0)<=89),c.xp6(1),c.Q6J("ngIf",(null!==(m=t.value)&&void 0!==m?m:0)>89||-1==t.value)}}let qL=(()=>{class n{constructor(){this.activeCard=sb.find(t=>1==t.value),this.activeCardEvent=new c.vpe}ngOnInit(){}setActive(t){this.activeCard=t,this.activeCardEvent.emit(this.activeCard)}getFibonacciSequenci(){return sb}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-fibonacci-deck"]],inputs:{activeCard:"activeCard"},outputs:{activeCardEvent:"activeCardEvent"},decls:3,vars:1,consts:[[1,"deck-content"],[1,"row","deck-custom"],["class","col-custom-13-full",4,"ngFor","ngForOf"],[1,"col-custom-13-full"],[3,"ngClass","click"],[1,"card-body"],[1,"card-title"],[4,"ngIf"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c.YNc(2,GL,10,12,"div",2),c.qZA()()),2&t&&(c.xp6(2),c.Q6J("ngForOf",r.getFibonacciSequenci()))},dependencies:[He,mn,dr],styles:[".deck-content[_ngcontent-%COMP%]{overflow:hidden}.deck-custom[_ngcontent-%COMP%]{height:122px;padding:20px 0 0 79px;overflow:hidden;position:relative;border-bottom:1px solid #d9dadb}.deck-custom[_ngcontent-%COMP%]   .card-deck-custom[_ngcontent-%COMP%]{position:absolute;margin-left:-55px;width:100%;box-shadow:-2px 5px 7px #000000a8;max-width:216px;cursor:pointer;transition:margin .5s;height:400px;color:var(--red)!important;background-color:#f8f9fa!important}.deck-custom[_ngcontent-%COMP%]   .card-deck-custom[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h1.card-title[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.deck-custom[_ngcontent-%COMP%]   .card-deck-custom.text-success[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h1.card-title[_ngcontent-%COMP%], .deck-custom[_ngcontent-%COMP%]   .card-deck-custom.text-secondary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h1.card-title[_ngcontent-%COMP%], .deck-custom[_ngcontent-%COMP%]   .card-deck-custom.text-warning[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h1.card-title[_ngcontent-%COMP%]{color:var(--dark)}.deck-custom[_ngcontent-%COMP%]   .card-deck-custom.active[_ngcontent-%COMP%]{margin-top:-20px}.deck-custom[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px 1.25rem 1.25rem 16px}.deck-custom[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-align:center;line-height:38px}.col-custom-13-full[_ngcontent-%COMP%]{flex:0 0 7.6%;max-width:7.6%}@media only screen and (max-width: 991px){.deck-custom[_ngcontent-%COMP%]{height:200px}.col-custom-13-full[_ngcontent-%COMP%]{flex:0 0 14%;max-width:14%}}@media only screen and (max-width: 579px){.card-body[_ngcontent-%COMP%]{padding-left:6px}}@media only screen and (max-width: 475px){.deck-custom[_ngcontent-%COMP%]{height:186px}.card-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}}@media only screen and (max-width: 400px){.deck-custom[_ngcontent-%COMP%]{height:175px}.card-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:25px}}@media only screen and (max-width: 300px){.card-body[_ngcontent-%COMP%]{padding-left:2px}}@media only screen and (max-width: 260px){.deck-custom[_ngcontent-%COMP%]{height:168px}.card-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:25px}}"]}),n})(),q_=(()=>{class n{static getMeasureBySM(t){return n._measures[t]}static getUncertaintyRiskNumber(t){return n.getMeasureBySM(this.sm)[1].includes(t)?1:n.getMeasureBySM(this.sm)[2].includes(t)?2:n.getMeasureBySM(this.sm)[3].includes(t)?3:(n.getMeasureBySM(this.sm)[0].includes(t),0)}static getComplexityRiskNumber(t){return n.getMeasureBySM(this.sm)[1].includes(t)?5:n.getMeasureBySM(this.sm)[2].includes(t)?6:n.getMeasureBySM(this.sm)[3].includes(t)?7:(n.getMeasureBySM(this.sm)[0].includes(t),0)}}return n.sm="carol",n._measures={carol:{1:[5],2:[10,12,15,6,7],3:[18,14,21],0:[0]},bruno:{1:[5],2:[10,15,6,7],3:[12,18,14,21],0:[0]}},n})();class GS{constructor(){this.label="",this.first=new JR,this.second=new JR}}class JR{constructor(){this.icons=["\u{1f919}","\u{1f91e}","\u{1f44e}"],this.label="",this.descriptions=[]}}class ZL{constructor(){this.uncertainty=new GS,this.reproduce=new GS}static createRiskInfosModelDefault(){return{uncertainty:{label:"Incerteza",first:{icons:["\u{1f6f4}","\u{1f6b2}","\u{1f697}"],label:"O que fazer",descriptions:["A hist\xf3ria \xe9 simples?","A hist\xf3ria \xe9 complexa?","A hist\xf3ria tem algo diferente?","Temos muitas regras de neg\xf3cio?"]},second:{icons:["\u2728","\u{1f9ba}","\u{1f9e8}"],label:"Como fazer",descriptions:["Como fazer \xe9 simples?","Como fazer \xe9 complexo?","N\xe3o sabemos como fazer?"]}},reproduce:{label:"Complexidade",first:{icons:["\u{1f431}\u200d\u{1f4bb}","\u{1f469}\u200d\u{1f4bb}","\u{1f528}"],label:"Desenvolver",descriptions:["Estamos trabalhando no legado?","A arquitetura do projeto \xe9 nova?","A arquitetura do projeto \xe9 simples?","A parte que vamos trabalhar esta bem organizada?","Precisamos refatorar algo?","Temos depend\xeancias com terceiros?"]},second:{icons:["\u{1f604}","\u{1f914}","\u{1f921}"],label:"Reproduzir",descriptions:["\xc9 simples para testar?","Afeta outras telas?","A massa de testes precisa ser criada?","A hist\xf3ria possui muitos crit\xe9rios?","Temos depend\xeancia com SAP/terceiros?","Necess\xe1rio validar a hist\xf3ria no app?"]}}}}}class ob{}const qS=function(n){return{"not-selected-item":n}},zs=function(n){return{active:n}},WL=function(n,e,t){return{active:n,warning:e,danger:t}};let KL=(()=>{class n{constructor(){this.info=new GS,this.sm="carol",this.listenerRisk=new c.vpe,this.description=new c.vpe,this.selectedDevelopment=0,this.selectedToProduce=0,this.risk={value:0,emojis:[]}}ngOnInit(){}setImpact(t){this.selectedDevelopment=this.selectedDevelopment==t?0:t}setProbability(t){this.selectedToProduce=this.selectedToProduce==t?0:t}setImpactAndCalcRisk(t){this.setImpact(t),this.calcRisk()}setProbabilityAndCalcRisk(t){this.setProbability(t),this.calcRisk()}calcRisk(){this.setAndSendRisk(this.selectedDevelopment*this.selectedToProduce)}setAndSendRisk(t){var r=this.buildRiskModel(t);this.setRisk(r),this.sendRisk(r)}buildRiskModel(t){var r=new ob;return r.value=t,r.emojis=this.getEmojis(t),r}sendRisk(t){this.listenerRisk.emit(t)}setRisk(t){this.risk=t}getEmojis(t){switch(t){case 5:return this.getEmojisByIndex(0,0);case 10:return this.getEmojisByIndex(1,0);case 15:return this.getEmojisByIndex(2,0);case 6:return this.getEmojisByIndex(0,1);case 12:return this.getEmojisByIndex(1,1);case 18:return this.getEmojisByIndex(2,1);case 7:return this.getEmojisByIndex(0,2);case 14:return this.getEmojisByIndex(1,2);case 21:return this.getEmojisByIndex(2,2);default:return[]}}getEmojisByIndex(t,r){return[this.info.first.icons[t],this.info.second.icons[r]]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-risk-matrix-develop-reproduce"]],inputs:{info:"info",sm:"sm"},outputs:{listenerRisk:"listenerRisk",description:"description"},decls:68,vars:84,consts:[[1,"row"],[1,"col-md-6","lines","d-flex","justify-content-end"],[1,"col-12"],[1,"h3","mb-3","font-weight-normal"],[1,"info-description",3,"click"],[1,"container","line",3,"ngClass"],["title","Pouco",1,"cell","success",3,"ngClass","click"],["title","Medio",1,"cell","warning",3,"ngClass","click"],["title","Muito",1,"cell","danger",3,"ngClass","click"],[1,"col-md-6","matrix"],[1,"h3","mb-3","font-weight-normal","text-center"],[1,"container",3,"ngClass"],[1,"cell","success",3,"ngClass"],[1,"cell","warning",3,"ngClass"],[1,"cell",3,"ngClass"],[1,"cell","danger",3,"ngClass"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2)(4,"h1",3),c._uU(5),c.TgZ(6,"span",4),c.NdJ("click",function(){return r.description.emit(r.info.first)}),c._uU(7,"\u{1f468}\u200d\u{1f393}"),c.qZA()(),c.TgZ(8,"div",5)(9,"div",6),c.NdJ("click",function(){return r.setImpactAndCalcRisk(1)}),c._uU(10),c.qZA(),c.TgZ(11,"div",7),c.NdJ("click",function(){return r.setImpactAndCalcRisk(2)}),c._uU(12),c.qZA(),c.TgZ(13,"div",8),c.NdJ("click",function(){return r.setImpactAndCalcRisk(3)}),c._uU(14),c.qZA()(),c.TgZ(15,"h1",3),c._uU(16),c.TgZ(17,"span",4),c.NdJ("click",function(){return r.description.emit(r.info.second)}),c._uU(18,"\u{1f468}\u200d\u{1f393}"),c.qZA()(),c.TgZ(19,"div",5)(20,"div",6),c.NdJ("click",function(){return r.setProbabilityAndCalcRisk(5)}),c._uU(21),c.qZA(),c.TgZ(22,"div",7),c.NdJ("click",function(){return r.setProbabilityAndCalcRisk(6)}),c._uU(23),c.qZA(),c.TgZ(24,"div",8),c.NdJ("click",function(){return r.setProbabilityAndCalcRisk(7)}),c._uU(25),c.qZA()()()()(),c.TgZ(26,"div",9)(27,"div",0)(28,"div",2)(29,"h1",10),c._uU(30),c.qZA(),c.TgZ(31,"div",11)(32,"div",12),c._uU(33,"P"),c.TgZ(34,"span"),c._uU(35),c.qZA()(),c.TgZ(36,"div",13),c._uU(37,"M"),c.TgZ(38,"span"),c._uU(39),c.qZA()(),c.TgZ(40,"div",13)(41,"span"),c._uU(42),c.qZA(),c._uU(43,"M"),c.qZA(),c.TgZ(44,"div",13),c._uU(45,"M"),c.TgZ(46,"span"),c._uU(47),c.qZA()(),c.TgZ(48,"div",14),c._uU(49),c.TgZ(50,"span"),c._uU(51),c.qZA()(),c.TgZ(52,"div",15)(53,"span"),c._uU(54),c.qZA(),c._uU(55,"G"),c.qZA(),c.TgZ(56,"div",13),c._uU(57,"M"),c.TgZ(58,"span"),c._uU(59),c.qZA()(),c.TgZ(60,"div",15),c._uU(61,"G"),c.TgZ(62,"span"),c._uU(63),c.qZA()(),c.TgZ(64,"div",15)(65,"span"),c._uU(66),c.qZA(),c._uU(67,"G"),c.qZA()()()()()()),2&t&&(c.xp6(5),c.hij(" ",r.info.first.label," "),c.xp6(3),c.Q6J("ngClass",c.VKq(46,qS,0==r.selectedDevelopment)),c.xp6(1),c.Q6J("ngClass",c.VKq(48,zs,1==r.selectedDevelopment)),c.xp6(1),c.Oqu(r.info.first.icons[0]),c.xp6(1),c.Q6J("ngClass",c.VKq(50,zs,2==r.selectedDevelopment)),c.xp6(1),c.Oqu(r.info.first.icons[1]),c.xp6(1),c.Q6J("ngClass",c.VKq(52,zs,3==r.selectedDevelopment)),c.xp6(1),c.Oqu(r.info.first.icons[2]),c.xp6(2),c.hij(" ",r.info.second.label," "),c.xp6(3),c.Q6J("ngClass",c.VKq(54,qS,0==r.selectedToProduce)),c.xp6(1),c.Q6J("ngClass",c.VKq(56,zs,5==r.selectedToProduce)),c.xp6(1),c.Oqu(r.info.second.icons[0]),c.xp6(1),c.Q6J("ngClass",c.VKq(58,zs,6==r.selectedToProduce)),c.xp6(1),c.Oqu(r.info.second.icons[1]),c.xp6(1),c.Q6J("ngClass",c.VKq(60,zs,7==r.selectedToProduce)),c.xp6(1),c.Oqu(r.info.second.icons[2]),c.xp6(5),c.Oqu(r.info.label),c.xp6(1),c.Q6J("ngClass",c.VKq(62,qS,0==r.risk.value)),c.xp6(1),c.Q6J("ngClass",c.VKq(64,zs,5==r.risk.value)),c.xp6(3),c.AsE("",r.info.first.icons[0],"",r.info.second.icons[0],""),c.xp6(1),c.Q6J("ngClass",c.VKq(66,zs,10==r.risk.value)),c.xp6(3),c.AsE("",r.info.first.icons[1],"",r.info.second.icons[0],""),c.xp6(1),c.Q6J("ngClass",c.VKq(68,zs,15==r.risk.value)),c.xp6(2),c.AsE("",r.info.first.icons[2],"",r.info.second.icons[0],""),c.xp6(2),c.Q6J("ngClass",c.VKq(70,zs,6==r.risk.value)),c.xp6(3),c.AsE("",r.info.first.icons[0],"",r.info.second.icons[1],""),c.xp6(1),c.Q6J("ngClass",c.kEZ(72,WL,12==r.risk.value,"carol"==r.sm,"bruno"==r.sm)),c.xp6(1),c.hij(" ","carol"==r.sm?"M":"G"," "),c.xp6(2),c.AsE("",r.info.first.icons[1],"",r.info.second.icons[1],""),c.xp6(1),c.Q6J("ngClass",c.VKq(76,zs,18==r.risk.value)),c.xp6(2),c.AsE("",r.info.first.icons[2],"",r.info.second.icons[1],""),c.xp6(2),c.Q6J("ngClass",c.VKq(78,zs,7==r.risk.value)),c.xp6(3),c.AsE("",r.info.first.icons[0],"",r.info.second.icons[2],""),c.xp6(1),c.Q6J("ngClass",c.VKq(80,zs,14==r.risk.value)),c.xp6(3),c.AsE("",r.info.first.icons[1],"",r.info.second.icons[2],""),c.xp6(1),c.Q6J("ngClass",c.VKq(82,zs,21==r.risk.value)),c.xp6(2),c.AsE("",r.info.first.icons[2],"",r.info.second.icons[2],""))},dependencies:[He],styles:[".mb-3[_ngcontent-%COMP%]{font-size:1.5rem;cursor:default}.info-description[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:220px;height:220px;padding:0;margin:0 auto}.container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{flex:0 0 33.333333%;width:33.333333vh;color:#fff;text-align:center;line-height:73px;font-size:36px;font-weight:700;opacity:.5;box-sizing:border-box;transition:opacity .3s ease;-webkit-user-select:none;user-select:none}.container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:0;display:block;opacity:0}.container[_ngcontent-%COMP%]   .cell.active[_ngcontent-%COMP%]{opacity:1;line-height:63px;font-size:46px}.container[_ngcontent-%COMP%]   .cell.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:auto;height:auto;display:inline-block;opacity:1}.container[_ngcontent-%COMP%]   .cell.warning[_ngcontent-%COMP%]{background:var(--warning)}.container[_ngcontent-%COMP%]   .cell.warning.active[_ngcontent-%COMP%]{border:5px solid var(--orange)}.container[_ngcontent-%COMP%]   .cell.danger[_ngcontent-%COMP%]{background:var(--danger)}.container[_ngcontent-%COMP%]   .cell.danger.active[_ngcontent-%COMP%]{border:5px solid var(--pink)}.container[_ngcontent-%COMP%]   .cell.success[_ngcontent-%COMP%]{background:var(--success)}.container[_ngcontent-%COMP%]   .cell.success.active[_ngcontent-%COMP%]{border:5px solid var(--teal)}.container.line[_ngcontent-%COMP%]{height:73px}.container.line[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{cursor:pointer;transition:font-size .5s}.container.line[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:hover{font-size:46px;opacity:1}.container.line[_ngcontent-%COMP%]:not(.not-selected-item)   .cell.warning[_ngcontent-%COMP%]:hover:not(.active){background:rgba(255,193,7,.4980392157)}.container.line[_ngcontent-%COMP%]:not(.not-selected-item)   .cell.danger[_ngcontent-%COMP%]:hover:not(.active){background:rgba(220,53,69,.4980392157)}.container.line[_ngcontent-%COMP%]:not(.not-selected-item)   .cell.success[_ngcontent-%COMP%]:hover:not(.active){background:rgba(40,167,69,.4980392157)}.container.not-selected-item[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{opacity:1}.lines[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:not(:first-child){padding-top:9px}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{transition:all .5s ease;width:73px;height:73px}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:220px;height:220px;position:absolute;line-height:220px;z-index:1}@media only screen and (max-width: 768px){.lines[_ngcontent-%COMP%]{display:flex!important;justify-content:center!important}.matrix[_ngcontent-%COMP%]{padding-top:9px;display:flex!important;justify-content:center!important}}"]}),n})();function YL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",1),c._UZ(1,"div",2),c.TgZ(2,"div",3)(3,"div",4),c._uU(4," Qual a pontua\xe7\xe3o voc\xea acha mais adequado? "),c.qZA(),c.TgZ(5,"div",5)(6,"div",6)(7,"button",7),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.setValue(3))}),c._uU(8,"3"),c.qZA(),c.TgZ(9,"button",7),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.setValue(5))}),c._uU(10,"5"),c.qZA()()()()()}}let QL=(()=>{class n{constructor(){this.isOpen=!1,this.answer=new bc.x}ngOnInit(){}getAnswer(){return this.answer}setValue(t){this.answer.next(t)}open(){this.isOpen=!0}close(){this.isOpen=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-confirm"]],decls:1,vars:1,consts:[["class","confirm-content",4,"ngIf"],[1,"confirm-content"],[1,"background"],[1,"confirm-popup"],[1,"message"],[1,"buttons"],[1,"buttons-content"],["type","button",3,"click"]],template:function(t,r){1&t&&c.YNc(0,YL,11,0,"div",0),2&t&&c.Q6J("ngIf",r.isOpen)},dependencies:[dr],styles:[".confirm-content[_ngcontent-%COMP%]{inset:0;position:fixed;z-index:1}.confirm-content[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{inset:0;position:fixed;opacity:.5;background-color:#000}.confirm-content[_ngcontent-%COMP%]   .confirm-popup[_ngcontent-%COMP%]{position:fixed;width:300px;background-color:#fff;box-shadow:0 4px 8px #0003;left:50%;top:50%;transform:translate(-50%,-50%);padding:20px;border-radius:6px}.confirm-content[_ngcontent-%COMP%]   .confirm-popup[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{text-align:center;padding-bottom:12px}.confirm-content[_ngcontent-%COMP%]   .confirm-popup[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%}.confirm-content[_ngcontent-%COMP%]   .confirm-popup[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .buttons-content[_ngcontent-%COMP%]{margin:0 auto;width:-moz-fit-content;width:fit-content}.confirm-content[_ngcontent-%COMP%]   .confirm-popup[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .buttons-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--warning);border:0;color:#fff;font-weight:700;width:38px;height:38px;margin-left:2px;margin-right:2px;cursor:pointer}"]}),n})();const JL=["confirm"],XL=function(n){return{"not-selected-item":n}},id=function(n){return{active:n}};let eV=(()=>{class n{set setUncertaintyAndCalcRisk(t){this.setUncertainty(t),this.calcRisk()}set setComplexityAndCalcRisk(t){this.setComplexity(t),this.calcRisk()}constructor(t){this.userService=t,this.selectedUncertainty={value:0,emojis:[]},this.selectedComplexity={value:0,emojis:[]},this.risk={value:0,emojis:[]}}ngOnInit(){}getEmojis(t,r){return[...t?.emojis??[],...r?.emojis??[]].join("")}setUncertainty(t){this.selectedUncertainty=t}setComplexity(t){this.selectedComplexity=t}buildRisk(){var t=new ob;return t.value=(this.selectedUncertainty.value??0)*(this.selectedComplexity.value??0),t.emojis=[...this.selectedUncertainty.emojis??[],...this.selectedComplexity.emojis??[]],t}calcRisk(){this.risk=this.buildRisk();var t=this.getMatrixRisk(this.risk?.value??0);this.getFibonacciSequenciAndSelectCard(t)}getMatrixRisk(t){return[5].includes(t)?1:[10,6].includes(t)?2:[15,12,7].includes(t)?5:[18,14].includes(t)?8:[21].includes(t)?13:([0].includes(t),0)}getFibonacciSequenci(t){return sb.find(r=>r.value==t)}getFibonacciSequenciAndSelectCard(t){12!=this.risk.value?this.selectCardAndAddEmojis(t):this.chosenRisk()}chosenRisk(){this.confirm?.open();var t=this.confirm?.getAnswer().subscribe(r=>{this.selectCardAndAddEmojis(r),this.confirm?.close(),t?.unsubscribe()})}selectCardAndAddEmojis(t){var r=this.getFibonacciSequenci(t);this.room&&r&&0!=r.value&&(this.addEmojis(r),this.userService.activeCardEvent(this.room,r))}addEmojis(t){return t.emojis=[...this.selectedUncertainty.emojis??[],...this.selectedComplexity.emojis??[]],t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(QR))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-risk-matrix-uncertainty-complexity"]],viewQuery:function(t,r){if(1&t&&c.Gf(JL,5),2&t){let s;c.iGM(s=c.CRH())&&(r.confirm=s.first)}},inputs:{setUncertaintyAndCalcRisk:"setUncertaintyAndCalcRisk",setComplexityAndCalcRisk:"setComplexityAndCalcRisk",room:"room"},decls:63,vars:39,consts:[[1,"row"],[1,"col-md-12","matrix"],[1,"col-12"],[1,"h3","mb-3","font-weight-normal","text-center"],[1,"container",3,"ngClass"],[1,"cell","success",3,"ngClass"],[1,"cell-content"],[1,"cell","warning",3,"ngClass"],[1,"cell","danger",3,"ngClass"],["confirm",""]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2)(4,"h1",3),c._uU(5,"Incerteza + Complexidade"),c.qZA(),c.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"p"),c._uU(10,"1"),c.qZA(),c.TgZ(11,"span"),c._uU(12),c.qZA()()(),c.TgZ(13,"div",5)(14,"div",6)(15,"p"),c._uU(16,"2"),c.qZA(),c.TgZ(17,"span"),c._uU(18),c.qZA()()(),c.TgZ(19,"div",7)(20,"div",6)(21,"p"),c._uU(22,"5"),c.qZA(),c.TgZ(23,"span"),c._uU(24),c.qZA()()(),c.TgZ(25,"div",5)(26,"div",6)(27,"p"),c._uU(28,"2"),c.qZA(),c.TgZ(29,"span"),c._uU(30),c.qZA()()(),c.TgZ(31,"div",7)(32,"div",6)(33,"p"),c._uU(34,"3/5"),c.qZA(),c.TgZ(35,"span"),c._uU(36),c.qZA()()(),c.TgZ(37,"div",8)(38,"div",6)(39,"p"),c._uU(40,"8"),c.qZA(),c.TgZ(41,"span"),c._uU(42),c.qZA()()(),c.TgZ(43,"div",7)(44,"div",6)(45,"p"),c._uU(46,"5"),c.qZA(),c.TgZ(47,"span"),c._uU(48),c.qZA()()(),c.TgZ(49,"div",8)(50,"div",6)(51,"p"),c._uU(52,"8"),c.qZA(),c.TgZ(53,"span"),c._uU(54),c.qZA()()(),c.TgZ(55,"div",8)(56,"div",6)(57,"p"),c._uU(58,"13"),c.qZA(),c.TgZ(59,"span"),c._uU(60),c.qZA()()()()()()()(),c._UZ(61,"app-confirm",null,9)),2&t&&(c.xp6(6),c.Q6J("ngClass",c.VKq(19,XL,0==r.risk.value)),c.xp6(1),c.Q6J("ngClass",c.VKq(21,id,5==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(23,id,10==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(25,id,15==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(27,id,6==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(29,id,12==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(31,id,18==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(33,id,7==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(35,id,14==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)),c.xp6(1),c.Q6J("ngClass",c.VKq(37,id,21==r.risk.value)),c.xp6(5),c.Oqu(r.getEmojis(r.selectedUncertainty,r.selectedComplexity)))},dependencies:[He,QL],styles:[".mb-3[_ngcontent-%COMP%]{font-size:1.5rem}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:522px;height:522px;padding:0;margin:0 auto}.container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{flex:0 0 33.333333%;width:33.333333vh;color:#fff;text-align:center;line-height:174px;font-size:76px;font-weight:700;opacity:.5;box-sizing:border-box;transition:opacity .3s ease;-webkit-user-select:none;user-select:none}.container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:0;display:block;opacity:0}.container[_ngcontent-%COMP%]   .cell.active[_ngcontent-%COMP%]{opacity:1;font-size:70px}.container[_ngcontent-%COMP%]   .cell.active[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]{width:100%;margin:0;position:absolute;top:50%;transform:translateY(-50%)}.container[_ngcontent-%COMP%]   .cell.active[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0;line-height:48px;font-size:82px}.container[_ngcontent-%COMP%]   .cell.active[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:auto;height:auto;display:inline-block;opacity:1}.container[_ngcontent-%COMP%]   .cell.warning[_ngcontent-%COMP%]{background:var(--warning)}.container[_ngcontent-%COMP%]   .cell.warning.active[_ngcontent-%COMP%]{border:5px solid var(--orange)}.container[_ngcontent-%COMP%]   .cell.danger[_ngcontent-%COMP%]{background:var(--danger)}.container[_ngcontent-%COMP%]   .cell.danger.active[_ngcontent-%COMP%]{border:5px solid var(--pink)}.container[_ngcontent-%COMP%]   .cell.success[_ngcontent-%COMP%]{background:var(--success)}.container[_ngcontent-%COMP%]   .cell.success.active[_ngcontent-%COMP%]{border:5px solid var(--teal)}.container.line[_ngcontent-%COMP%]{height:174px}.container.not-selected-item[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{opacity:1}.lines[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:not(:first-child){padding-top:9px}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{transition:all .5s ease;width:174px;height:174px}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:522px;height:522px;position:absolute;z-index:1}@media only screen and (max-width: 768px){.lines[_ngcontent-%COMP%]{display:flex!important;justify-content:center!important}.matrix[_ngcontent-%COMP%]{padding-top:9px;display:flex!important;justify-content:center!important}}@media only screen and (max-width: 574px){.container[_ngcontent-%COMP%]{width:314px;height:314px}.container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{font-size:40px;line-height:104px}.container[_ngcontent-%COMP%]   .cell.active[_ngcontent-%COMP%]{font-size:40px}.container.line[_ngcontent-%COMP%]{height:104px}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{width:104px;height:104px}.matrix[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:314px;height:314px}}"]}),n})();function tV(n,e){if(1&n&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}function nV(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",9)(1,"div",10),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.closeDescription())}),c.qZA(),c.TgZ(2,"div",11)(3,"div",12),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.closeDescription())}),c._uU(4,"x"),c.qZA(),c.TgZ(5,"div",13),c._uU(6),c.qZA(),c.TgZ(7,"div",14)(8,"ul"),c.YNc(9,tV,2,1,"li",15),c.qZA()()()()}if(2&n){const t=c.oxw();c.xp6(6),c.hij(" \u{1f468}\u200d\u{1f393} ",t.infoItemModel.label," "),c.xp6(3),c.Q6J("ngForOf",t.infoItemModel.descriptions)}}const rV=function(n,e){return{"btn-info":n,"btn-success":e}};let XR=(()=>{class n{constructor(){this.uncertainty={value:0,emojis:[]},this.complexity={value:0,emojis:[]},this.currentSm="carol",this.info=ZL.createRiskInfosModelDefault()}ngOnInit(){}listenerUncertaintyRisk(t){var r=new ob;r.value=q_.getUncertaintyRiskNumber(t.value??0),r.emojis=t.emojis,this.uncertainty=r}listenerComplexityRisk(t){var r=new ob;r.value=q_.getComplexityRiskNumber(t.value??0),r.emojis=t.emojis,this.complexity=r}openDescription(t){this.infoItemModel=t}closeDescription(){this.infoItemModel=void 0}changeSM(){q_.sm="carol"==q_.sm?"bruno":"carol",this.currentSm=q_.sm}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-risk-matrix"]],inputs:{room:"room"},decls:13,vars:13,consts:[[1,"row"],[1,"col-12","text-center"],[1,"btn","button-sm",3,"ngClass","click"],[1,"col-lg-6"],[1,"left-content"],[3,"sm","info","description","listenerRisk"],[1,"col-lg-6","d-flex","justify-content-start"],[3,"room","setUncertaintyAndCalcRisk","setComplexityAndCalcRisk"],["class","info-modal",4,"ngIf"],[1,"info-modal"],[1,"background",3,"click"],[1,"content"],[1,"button-close",3,"click"],[1,"title"],[1,"body"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return r.changeSM()}),c._uU(3),c.qZA()()(),c.TgZ(4,"div",0)(5,"div",3)(6,"div",4)(7,"app-risk-matrix-develop-reproduce",5),c.NdJ("description",function(u){return r.openDescription(u)})("listenerRisk",function(u){return r.listenerUncertaintyRisk(u)}),c.qZA(),c._UZ(8,"hr"),c.TgZ(9,"app-risk-matrix-develop-reproduce",5),c.NdJ("description",function(u){return r.openDescription(u)})("listenerRisk",function(u){return r.listenerComplexityRisk(u)}),c.qZA()()(),c.TgZ(10,"div",6),c._UZ(11,"app-risk-matrix-uncertainty-complexity",7),c.qZA()(),c.YNc(12,nV,10,2,"div",8)),2&t&&(c.xp6(2),c.Q6J("ngClass",c.WLB(10,rV,"carol"==r.currentSm,"bruno"==r.currentSm)),c.xp6(1),c.Oqu(r.currentSm),c.xp6(4),c.Q6J("sm",r.currentSm)("info",r.info.uncertainty),c.xp6(2),c.Q6J("sm",r.currentSm)("info",r.info.reproduce),c.xp6(2),c.Q6J("room",r.room)("setUncertaintyAndCalcRisk",r.uncertainty)("setComplexityAndCalcRisk",r.complexity),c.xp6(1),c.Q6J("ngIf",r.infoItemModel))},dependencies:[He,mn,dr,KL,eV],styles:[".button-sm[_ngcontent-%COMP%]{text-transform:capitalize}.info-modal[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadein .3s;opacity:.4;inset:0;position:fixed;-webkit-backdrop-filter:sepia(100%) blur(6px);backdrop-filter:sepia(100%) blur(6px);z-index:1}.info-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadein .8s;padding:18px;position:fixed;width:280px;height:auto;background-color:#fff;top:10%;left:calc(50% - 140px);box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px;border-radius:6px;z-index:1}.info-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .button-close[_ngcontent-%COMP%]{position:absolute;right:10px;top:1px;font-weight:700;cursor:pointer;text-shadow:rgba(255,255,255,.5) 0px 3px 3px;background-color:#565656;color:transparent;text-shadow:2px 2px 3px rgba(255,255,255,.5);-webkit-background-clip:text}.info-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:18px;padding-bottom:16px}.left-content[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto 0 auto auto}@media only screen and (max-width: 992px){.left-content[_ngcontent-%COMP%]{margin:0 auto}.col-lg-6[_ngcontent-%COMP%]:last-child{justify-content:center!important}}@keyframes _ngcontent-%COMP%_fadein{0%{opacity:0}to{opacity:1}}"]}),n})();function iV(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"app-fibonacci-deck",3),c.NdJ("activeCardEvent",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.activeCardEvent(s))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("activeCard",t.activeCard)}}const e1=function(n){return{open:n}};function sV(n,e){if(1&n&&(c.TgZ(0,"div",4),c._UZ(1,"app-risk-matrix",5),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",c.VKq(2,e1,t.isOpenRisk)),c.xp6(1),c.Q6J("room",t.room)}}function oV(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"img",6),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.toggleOpenRisk())}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("ngClass",c.VKq(1,e1,t.isOpenRisk))}}let aV=(()=>{class n{constructor(t){this.voteService=t,this.isOpenRisk=!1,this.activeCard=sb.find(r=>1==r.value)??new PL}ngOnInit(){this.loadActiveCard()}loadActiveCard(){this.voteService.listenerActiveVote(this.room?.id??"").subscribe(t=>{t&&(this.activeCard=t.value)})}activeCardEvent(t){t.emojis=[],this.room&&this.voteService.activeCardEvent(this.room,t)}toggleOpenRisk(){this.isOpenRisk=!this.isOpenRisk}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(QR))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-votes-deck"]],inputs:{room:"room"},decls:3,vars:3,consts:[[3,"activeCard","activeCardEvent",4,"ngIf"],["class","risk-content",3,"ngClass",4,"ngIf"],["title","Carta na manga","class","button-toggle-risk","src","assets/ace-up-the-sleeve.png",3,"ngClass","click",4,"ngIf"],[3,"activeCard","activeCardEvent"],[1,"risk-content",3,"ngClass"],[3,"room"],["title","Carta na manga","src","assets/ace-up-the-sleeve.png",1,"button-toggle-risk",3,"ngClass","click"]],template:function(t,r){1&t&&(c.YNc(0,iV,1,1,"app-fibonacci-deck",0),c.YNc(1,sV,2,4,"div",1),c.YNc(2,oV,1,3,"img",2)),2&t&&(c.Q6J("ngIf",!(null!=r.room&&r.room.isFlip)),c.xp6(1),c.Q6J("ngIf",!(null!=r.room&&r.room.isFlip)),c.xp6(1),c.Q6J("ngIf",!(null!=r.room&&r.room.isFlip)))},dependencies:[He,dr,qL,XR],styles:[".risk-content[_ngcontent-%COMP%]{position:fixed;top:73px;right:-100%;bottom:0;background:white;padding-top:18px;width:100%;transition:right 1s ease;box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px;overflow:hidden;overflow-y:auto}.risk-content.open[_ngcontent-%COMP%]{right:0}.button-toggle-risk[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;cursor:pointer;-webkit-user-select:none;user-select:none;width:110px;transition:all 1s ease}.button-toggle-risk.open[_ngcontent-%COMP%]{transform:rotate(-50deg) translate(-42px,38px)}@media only screen and (max-width: 768px){.risk-content[_ngcontent-%COMP%]{top:141px}}@media only screen and (max-width: 600px){.button-toggle-risk[_ngcontent-%COMP%]{width:50px}.button-toggle-risk.open[_ngcontent-%COMP%]{transform:rotate(-50deg) translate(-18px,16px)}}"]}),n})();class uV{constructor(e){this.room=e,this.emojis=[],this.whatToDo=["\u{1f6f4}","\u{1f6b2}","\u{1f697}"],this.hotToMake=["\u2728","\u{1f9ba}","\u{1f9e8}"],this.toDevelop=["\u{1f431}\u200d\u{1f4bb}","\u{1f469}\u200d\u{1f4bb}","\u{1f528}"],this.reproduce=["\u{1f604}","\u{1f914}","\u{1f921}"];var t=ib.map(r=>Object.assign({},r));this.emojis=[...t]}report(){var e=this.getEmojisRoom();return{whatToDo:this.countEmojis(e,this.whatToDo),hotToMake:this.countEmojis(e,this.hotToMake),toDevelop:this.countEmojis(e,this.toDevelop),reproduce:this.countEmojis(e,this.reproduce)}}getEmojisRoom(){var e=this.room?.votes?.map(t=>t?.value?.emojis).reduce((t,r)=>[...t??[],...r??[]],[]);return e??[]}countEmojis(e,t){var r=e.filter(s=>t.includes(s)).length;return t.map(s=>({emoji:s,description:ib.find(u=>u.emoji==s).description,quantity:e.filter(u=>u==s).length,percent:100*e.filter(u=>u==s).length/r}))}}class cV{constructor(e){this.room=e,this.emojis=[],this.emojis=[...ib.map(t=>Object.assign({},t))]}report(){var e=this.getEmojisRoom();this.countEmojis(e);var t=this.getQuantityTotal();return this.emojis.filter(r=>r.quantity>0).map(r=>({emoji:r.emoji,description:r.description,quantity:r.quantity,percent:100*r.quantity/t}))}getEmojisRoom(){var e=this.room?.votes?.map(t=>t?.value?.emojis).reduce((t,r)=>[...t??[],...r??[]],[]);return e??[]}countEmojis(e){e.forEach(t=>{var r=this.emojis.find(s=>s.emoji==t);r.quantity||(r.quantity=0),r.quantity++})}getQuantityTotal(){return this.emojis.filter(e=>e.quantity>0).map(e=>e.quantity).reduce((e,t)=>e+t)}}function lV(n,e){if(1&n&&(c.TgZ(0,"li",7),c._uU(1),c.TgZ(2,"span",8),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(1),c.AsE(" ",t.emoji," ",t.description," "),c.xp6(2),c.hij("",t.percent,"%")}}function dV(n,e){if(1&n&&(c.TgZ(0,"ul",2),c.YNc(1,lV,4,3,"li",3),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",t.categoryReport.whatToDo)}}function hV(n,e){if(1&n&&(c.TgZ(0,"li",7),c._uU(1),c.TgZ(2,"span",8),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(1),c.AsE(" ",t.emoji," ",t.description," "),c.xp6(2),c.hij("",t.percent,"%")}}function fV(n,e){if(1&n&&(c.TgZ(0,"ul",2),c.YNc(1,hV,4,3,"li",3),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",t.categoryReport.hotToMake)}}function pV(n,e){if(1&n&&(c.TgZ(0,"li",7),c._uU(1),c.TgZ(2,"span",8),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(1),c.AsE(" ",t.emoji," ",t.description," "),c.xp6(2),c.hij("",t.percent,"%")}}function gV(n,e){if(1&n&&(c.TgZ(0,"ul",2),c.YNc(1,pV,4,3,"li",3),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",t.categoryReport.toDevelop)}}function mV(n,e){if(1&n&&(c.TgZ(0,"li",7),c._uU(1),c.TgZ(2,"span",8),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(1),c.AsE(" ",t.emoji," ",t.description," "),c.xp6(2),c.hij("",t.percent,"%")}}function _V(n,e){if(1&n&&(c.TgZ(0,"ul",2),c.YNc(1,mV,4,3,"li",3),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",t.categoryReport.reproduce)}}function yV(n,e){if(1&n&&(c.TgZ(0,"section")(1,"div",4)(2,"div",5)(3,"h1",1),c._uU(4,"O que fazer"),c.qZA(),c.YNc(5,dV,2,1,"ul",6),c.qZA(),c.TgZ(6,"div",5)(7,"h1",1),c._uU(8,"Como fazer"),c.qZA(),c.YNc(9,fV,2,1,"ul",6),c.qZA()(),c.TgZ(10,"div",4)(11,"div",5)(12,"h1",1),c._uU(13,"Desenvolver"),c.qZA(),c.YNc(14,gV,2,1,"ul",6),c.qZA(),c.TgZ(15,"div",5)(16,"h1",1),c._uU(17,"Reproduzir"),c.qZA(),c.YNc(18,_V,2,1,"ul",6),c.qZA()()()),2&n){const t=c.oxw(2);c.xp6(5),c.Q6J("ngIf",t.categoryReport.whatToDo),c.xp6(4),c.Q6J("ngIf",t.categoryReport.hotToMake),c.xp6(5),c.Q6J("ngIf",t.categoryReport.toDevelop),c.xp6(4),c.Q6J("ngIf",t.categoryReport.reproduce)}}function vV(n,e){if(1&n&&(c.TgZ(0,"li",7),c._uU(1),c.TgZ(2,"span",8),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(1),c.AsE(" ",t.emoji," ",t.description," "),c.xp6(2),c.hij("",t.percent,"%")}}function wV(n,e){if(1&n&&(c.TgZ(0,"section"),c._UZ(1,"br"),c.YNc(2,yV,19,4,"section",0),c.TgZ(3,"h1",1),c._uU(4,"Geral"),c.qZA(),c.TgZ(5,"ul",2),c.YNc(6,vV,4,3,"li",3),c.qZA()()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("ngIf",t.categoryReport),c.xp6(4),c.Q6J("ngForOf",t.generalReport)}}let CV=(()=>{class n{constructor(){this.showReport=!1,this.generalReport=[]}ngOnInit(){this.showReport=this.getEmojisRoom().length>0,this.showReport&&(this.categoryReport=new uV(this.room).report(),this.generalReport=new cV(this.room).report())}getEmojisRoom(){var t=this.room?.votes?.map(r=>r?.value?.emojis).reduce((r,s)=>[...r??[],...s??[]],[]);return t??[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-votos-risk-report"]],inputs:{room:"room"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"h3","mb-3","font-weight-normal"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-6"],["class","list-group",4,"ngIf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","badge-primary","badge-pill"]],template:function(t,r){1&t&&c.YNc(0,wV,7,2,"section",0),2&t&&c.Q6J("ngIf",r.showReport)},dependencies:[mn,dr],styles:[".list-group[_ngcontent-%COMP%]{margin-bottom:8px}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{cursor:pointer}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:var(--dark)}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:nth-child(odd)   span[_ngcontent-%COMP%]{background-color:var(--red)}"]}),n})();function EV(n,e){if(1&n&&(c.TgZ(0,"div",2)(1,"h1",3),c._uU(2),c.qZA()()),2&n){const t=c.oxw();c.xp6(2),c.Oqu(t.room.name)}}function IV(n,e){if(1&n&&c._UZ(0,"app-votos-risk-report",7),2&n){const t=c.oxw(3);c.Q6J("room",t.room)}}function bV(n,e){if(1&n&&(c.TgZ(0,"section"),c._UZ(1,"app-votes-average",7)(2,"app-votes-cards",5)(3,"app-votes-deck",7),c.YNc(4,IV,1,1,"app-votos-risk-report",8),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("room",t.room),c.xp6(1),c.Q6J("room",t.room)("isFlip",t.isFlip),c.xp6(1),c.Q6J("room",t.room),c.xp6(1),c.Q6J("ngIf",t.isFlip)}}function DV(n,e){if(1&n&&(c.TgZ(0,"div",4),c._UZ(1,"app-votes-controls",5),c.YNc(2,bV,5,5,"section",6),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("room",t.room)("isFlip",t.isFlip),c.xp6(1),c.Q6J("ngIf",t.room)}}let TV=(()=>{class n{constructor(t,r,s){this.activatedRoute=t,this.firestore=r,this.userService=s,this.isFlip=!1,this.flipEvent=new bc.x}ngOnInit(){this.loadRoom(),this.waitAndFlip()}waitAndFlip(){this.flipEvent.pipe(qR(50)).subscribe(t=>this.isFlip=t)}getRoomId(){return this.activatedRoute.snapshot.paramMap.get("id")}loadRoom(){var t=this.getRoomId();this.firestore.doc("rooms/"+t).valueChanges().subscribe(r=>{r&&(this.room=r,this.room.id=t??"",this.room.currentTask=this.room.currentTask?this.room.currentTask:0,this.flipEvent.next(this.room?.isFlip??!1),this.getUserAndAddUserToRoomIfNotExist(r))})}getUserAndAddUserToRoomIfNotExist(t){this.userService.getUserAndAddUserToRoomIfNotExist(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zh),c.Y36(tg),c.Y36(qT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-votes"]],decls:2,vars:2,consts:[["class","pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center",4,"ngIf"],["class","container",4,"ngIf"],[1,"pricing-header","px-3","py-3","pt-md-5","pb-md-4","mx-auto","text-center"],[1,"display-4"],[1,"container"],[3,"room","isFlip"],[4,"ngIf"],[3,"room"],[3,"room",4,"ngIf"]],template:function(t,r){1&t&&(c.YNc(0,EV,3,1,"div",0),c.YNc(1,DV,3,3,"div",1)),2&t&&(c.Q6J("ngIf",r.room),c.xp6(1),c.Q6J("ngIf",r.room))},dependencies:[dr,_L,bL,OL,aV,CV],styles:["body[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.pricing-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700}"]}),n})(),SV=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}ngOnInit(){}login(){this.auth.signInWithPopup(this.newGoogleAuthProvider()).then(t=>{this.router.navigateByUrl("/rooms")},t=>{this.logError(t)})}newGoogleAuthProvider(){return new wI.Z.auth.GoogleAuthProvider}logError(t){console.error(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(eg),c.Y36(Wr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:2,vars:0,consts:[["type","submit",1,"btn","btn-lg","btn-primary","btn-block","btn-login",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"button",0),c.NdJ("click",function(){return r.login()}),c._uU(1,"Login Google"),c.qZA())},styles:["[_nghost-%COMP%]{display:contents}"]}),n})();class AV{}function xV(n,e){if(1&n&&(c.TgZ(0,"div",7)(1,"h1",8),c._uU(2),c.qZA()()),2&n){const t=c.oxw();c.xp6(2),c.hij("",t.room.name," - Lista de tarefas")}}const MV=[{path:"",redirectTo:"/rooms",pathMatch:"full"},{path:"login",component:SV},{path:"",component:WF,canActivate:[KF],children:[{path:"rooms",component:GF},{path:"tasks/:id",component:(()=>{class n{constructor(t,r,s){this.activatedRoute=t,this.firestore=r,this.router=s,this.room=new AV,this.form=new dw({taskList:new eb("",[])}),this.roomId=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.loadRoom()}loadRoom(){this.roomDoc=this.firestore.doc("rooms/"+this.roomId),this.roomDoc.valueChanges().subscribe(this.loadTaskAndSetRoom.bind(this))}loadTaskAndSetRoom(t){this.setRoom(t),this.loadTasks(t)}loadTasks(t){t&&t.tasks&&this.form.patchValue({taskList:t.tasks.join("\n")})}setRoom(t){this.room=t}saveAndGoVote(){var t=this.getList();this.addTasks(t),this.goVote()}addTasks(t){this.room.currentTask=0,this.room.tasks=t,this.roomDocUpdate(this.room)}roomDocUpdate(t){this.roomDoc&&t&&this.roomDoc.update(t)}goVote(){this.router.navigateByUrl(`/votes/${this.roomId}`)}getList(){return(this.form.get("taskList")?.value??"").split("\n").map(r=>r.trim()).filter(r=>r.length>0)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zh),c.Y36(tg),c.Y36(Wr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tasks"]],decls:12,vars:2,consts:[["class","pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center",4,"ngIf"],[1,"container",3,"formGroup"],[1,"row"],[1,"col-12","text-center","btn-command"],["formControlName","taskList","rows","15",1,"task-list-field"],[1,"col-md-6","text-center","btn-command"],["type","button",1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"pricing-header","px-3","py-3","pt-md-5","pb-md-4","mx-auto","text-center"],[1,"display-4"]],template:function(t,r){1&t&&(c.YNc(0,xV,3,1,"div",0),c.TgZ(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"textarea",4),c.qZA()(),c.TgZ(5,"div",2)(6,"div",5)(7,"button",6),c.NdJ("click",function(){return r.saveAndGoVote()}),c._uU(8,"Enviar Nova Lista"),c.qZA()(),c.TgZ(9,"div",5)(10,"button",6),c.NdJ("click",function(){return r.goVote()}),c._uU(11,"Entrar"),c.qZA()()()()),2&t&&(c.Q6J("ngIf",r.room),c.xp6(1),c.Q6J("formGroup",r.form))},dependencies:[dr,uw,DS,TS,pw,tb],styles:["textarea.task-list-field[_ngcontent-%COMP%]{width:100%;border:1px solid rgba(0,0,0,.125);border-radius:.25rem;padding:10px 18px;outline:none}"]}),n})()},{path:"votes/:id",component:TV},{path:"risk",component:XR}]}];let RV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[jM.forRoot(MV,{useHash:!0}),jM]}),n})(),OV=(()=>{class n{constructor(){this.title="Planning Poker"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[PI]}),n})();const t1="firebasestorage.googleapis.com",n1="storageBucket";class vr extends Ot.ZR{constructor(e,t,r=0){super(ZS(e),`Firebase Storage: ${t} (${ZS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ZS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Kn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Kn||(Kn={})),Kn))();function ZS(n){return"storage/"+n}function WS(){return new vr(Kn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function r1(){return new vr(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function i1(){return new vr(Kn.CANCELED,"User canceled the upload/download.")}function s1(){return new vr(Kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Z_(n){return new vr(Kn.INVALID_ARGUMENT,n)}function o1(){return new vr(Kn.APP_DELETED,"The Firebase app was deleted.")}function a1(n){return new vr(Kn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gw(n,e){return new vr(Kn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function mw(n){throw new vr(Kn.INTERNAL_ERROR,"Internal error: "+n)}class Xi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Xi.makeFromUrl(e,t)}catch{return new Xi(e,"")}if(""===r.path)return r;throw function $V(n){return new vr(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function E(wt){wt.path_=decodeURIComponent(wt.path)}const O=t.replace(/[.]/g,"\\."),at=[{regex:m,indices:{bucket:1,path:3},postModify:function u(wt){"/"===wt.path.charAt(wt.path.length-1)&&(wt.path_=wt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${O}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===t1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let wt=0;wt<at.length;wt++){const Bt=at[wt],Zt=Bt.regex.exec(e);if(Zt){let Gs=Zt[Bt.indices.path];Gs||(Gs=""),r=new Xi(Zt[Bt.indices.bucket],Gs),Bt.postModify(r);break}}if(null==r)throw function jV(n){return new vr(Kn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class ZV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ab(n){return"string"==typeof n||n instanceof String}function u1(n){return KS()&&n instanceof Blob}function KS(){return typeof Blob<"u"&&!(0,Ot.UG)()}function YS(n,e,t,r){if(r<e)throw Z_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Z_(`Invalid value for '${n}'. Expected ${t} or less.`)}function sd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function c1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Jh||(Jh={})),Jh))();function l1(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class XV{constructor(e,t,r,s,u,d,m,v,E,T,O,V=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=v,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=O,this.retry=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,ie)=>{this.resolve_=W,this.reject_=ie,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,d=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function YV(n){return void 0!==n}(v)?u():u(v)}catch(v){d(v)}else if(null!==m){const v=WS();v.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,v):v)}else d(s.canceled?this.appDelete_?o1():i1():r1())};this.canceled_?t(0,new ub(!1,null,!0)):this.backoffId_=function WV(n,e,t){let r=1,s=null,u=null,d=!1,m=0;function v(){return 2===m}let E=!1;function T(...xe){E||(E=!0,e.apply(null,xe))}function O(xe){s=setTimeout(()=>{s=null,n(W,v())},xe)}function V(){u&&clearTimeout(u)}function W(xe,...Et){if(E)return void V();if(xe)return V(),void T.call(null,xe,...Et);if(v()||d)return V(),void T.call(null,xe,...Et);let at;r<64&&(r*=2),1===m?(m=2,at=0):at=1e3*(r+Math.random()),O(at)}let ie=!1;function Ae(xe){ie||(ie=!0,V(),!E&&(null!==s?(xe||(m=2),clearTimeout(s),O(0)):xe||(m=1)))}return O(0),u=setTimeout(()=>{d=!0,Ae(!0)},t),Ae}((r,s)=>{if(s)return void r(!1,new ub(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===Jh.NO_ERROR,v=u.getStatus();if(!m||l1(v,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===Jh.ABORT;return void r(!1,new ub(!1,null,T))}const E=-1!==this.successCodes_.indexOf(v);r(!0,new ub(E,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function KV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ub{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oU(...n){const e=function sU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(KS())return new Blob(n);throw new vr(Kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const bo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class QS{constructor(e,t){this.data=e,this.contentType=t||null}}function JS(n,e){switch(n){case bo.RAW:return new QS(d1(e));case bo.BASE64:case bo.BASE64URL:return new QS(h1(n,e));case bo.DATA_URL:return new QS(function lU(n){const e=new f1(n);return e.base64?h1(bo.BASE64,e.rest):function cU(n){let e;try{e=decodeURIComponent(n)}catch{throw gw(bo.DATA_URL,"Malformed data URL.")}return d1(e)}(e.rest)}(e),function dU(n){return new f1(n).contentType}(e))}throw WS()}function d1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function h1(n,e){switch(n){case bo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw gw(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case bo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw gw(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function uU(n){if(typeof atob>"u")throw function qV(n){return new vr(Kn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:gw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class f1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gw(bo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function hU(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ac{constructor(e,t){let r=0,s="";u1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(u1(this.data_)){const s=function aU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Ac(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ac(r,!0)}}static getBlob(...e){if(KS()){const t=e.map(r=>r instanceof Ac?r.data_:r);return new Ac(oU.apply(null,t))}{const t=e.map(d=>ab(d)?JS(bo.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)s[u++]=d[m]}),new Ac(s,!0)}}uploadData(){return this.data_}}function XS(n){let e;try{e=JSON.parse(n)}catch{return null}return function JV(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function p1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function gU(n,e){return e}class ys{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||gU}}let cb=null;function _w(){if(cb)return cb;const n=[];n.push(new ys("bucket")),n.push(new ys("generation")),n.push(new ys("metageneration")),n.push(new ys("name","fullPath",!0));const t=new ys("name");t.xform=function e(u,d){return function mU(n){return!ab(n)||n.length<2?n:p1(n)}(d)},n.push(t);const s=new ys("size");return s.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(s),n.push(new ys("timeCreated")),n.push(new ys("updated")),n.push(new ys("md5Hash",null,!0)),n.push(new ys("cacheControl",null,!0)),n.push(new ys("contentDisposition",null,!0)),n.push(new ys("contentEncoding",null,!0)),n.push(new ys("contentLanguage",null,!0)),n.push(new ys("contentType",null,!0)),n.push(new ys("metadata","customMetadata",!0)),cb=n,cb}function g1(n,e,t){const r=XS(e);return null===r?null:function yU(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function _U(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Xi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function eA(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const m1="prefixes",_1="items";class xc{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Mc(n){if(!n)throw WS()}function lb(n,e){return function t(r,s){const u=g1(n,s,e);return Mc(null!==u),u}}function W_(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function UV(){return new vr(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function VV(){return new vr(Kn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function LV(n){return new vr(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function BV(n){return new vr(Kn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function yw(n){const e=W_(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function FV(n){return new vr(Kn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function y1(n,e,t){const s=sd(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new xc(s,"GET",lb(n,t),d);return m.errorHandler=yw(e),m}function bU(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=sd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,T=new xc(m,"GET",function EU(n,e){return function t(r,s){const u=function CU(n,e,t){const r=XS(t);return null===r?null:function wU(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[m1])for(const s of t[m1]){const u=s.replace(/\/$/,""),d=n._makeStorageReference(new Xi(e,u));r.prefixes.push(d)}if(t[_1])for(const s of t[_1]){const u=n._makeStorageReference(new Xi(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return Mc(null!==u),u}}(n,e.bucket),E);return T.urlParams=u,T.errorHandler=W_(e),T}function w1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function AU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class db{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function tA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Mc(!1)}return Mc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const OU={STATE_CHANGED:"state_changed"},vs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nA(n){switch(n){case"running":case"pausing":case"canceling":return vs.RUNNING;case"paused":return vs.PAUSED;case"success":return vs.SUCCESS;case"canceled":return vs.CANCELED;default:return vs.ERROR}}class PU{constructor(e,t,r){if(function QV(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function K_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let I1=null;class kU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw mw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class NU extends kU{initXhr(){this.xhr_.responseType="text"}}function hu(){return I1?I1():new NU}class b1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=_w(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Kn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(l1(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=r1()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Kn.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function xU(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d=w1(e,r,s),m={name:d.fullPath},v=sd(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},O=eA(d,t),ie=new xc(v,"POST",function W(Ae){let xe;tA(Ae);try{xe=Ae.getResponseHeader("X-Goog-Upload-URL")}catch{Mc(!1)}return Mc(ab(xe)),xe},n.maxUploadRetryTime);return ie.urlParams=m,ie.headers=T,ie.body=O,ie.errorHandler=W_(e),ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,hu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function MU(n,e,t,r){const v=new xc(t,"POST",function u(E){const T=tA(E,["active","final"]);let O=null;try{O=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Mc(!1)}O||Mc(!1);const V=Number(O);return Mc(!isNaN(V)),new db(V,r.size(),"final"===T)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=W_(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,hu,t,r);this._request=u,u.getPromise().then(d=>{this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new db(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let d;try{d=function RU(n,e,t,r,s,u,d,m){const v=new db(0,0);if(d?(v.current=d.current,v.total=d.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function zV(){return new vr(Kn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const E=v.total-v.current;let T=E;s>0&&(T=Math.min(T,s));const O=v.current;let W="";W=0===T?"finalize":E===T?"upload, finalize":"upload";const ie={"X-Goog-Upload-Command":W,"X-Goog-Upload-Offset":`${v.current}`},Ae=r.slice(O,O+T);if(null===Ae)throw s1();const at=new xc(t,"POST",function xe(wt,Bt){const Zt=tA(wt,["active","final"]),fi=v.current+T,Gs=r.size();let sA;return sA="final"===Zt?lb(e,u)(wt,Bt):null,new db(fi,Gs,"final"===Zt,sA)},e.maxUploadRetryTime);return at.headers=ie,at.body=Ae.uploadData(),at.progressCallback=m||null,at.errorHandler=W_(n),at}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(d,hu,s,u,!1);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=y1(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,hu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function C1(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let at="";for(let wt=0;wt<2;wt++)at+=Math.random().toString().slice(2);return at}();d["Content-Type"]="multipart/related; boundary="+v;const E=w1(e,r,s),T=eA(E,t),W=Ac.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+v+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===W)throw s1();const ie={name:E.fullPath},Ae=sd(u,n.host,n._protocol),Et=n.maxUploadRetryTime,Mt=new xc(Ae,"POST",lb(n,t),Et);return Mt.urlParams=ie,Mt.headers=d,Mt.body=W.uploadData(),Mt.errorHandler=W_(e),Mt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,hu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=i1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=nA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new PU(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(nA(this._state)){case vs.SUCCESS:K_(this._resolve.bind(null,this.snapshot))();break;case vs.CANCELED:case vs.ERROR:K_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(nA(this._state)){case vs.RUNNING:case vs.PAUSED:e.next&&K_(e.next.bind(e,this.snapshot))();break;case vs.SUCCESS:e.complete&&K_(e.complete.bind(e))();break;default:e.error&&K_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ug{constructor(e,t){this._service=e,this._location=t instanceof Xi?t:Xi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ug(e,t)}get root(){const e=new Xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return p1(this._location.path)}get storage(){return this._service}get parent(){const e=function fU(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Xi(this._location.bucket,e);return new ug(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw a1(e)}}function T1(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,ue.Z)(function*(n,e,t){const s=yield S1(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield T1(n,e,s.nextPageToken))}),rA.apply(this,arguments)}function S1(n,e){null!=e&&"number"==typeof e.maxResults&&YS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=bU(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,hu)}function ZU(n){n._throwIfRoot("getDownloadURL");const e=function DU(n,e,t){const s=sd(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new xc(s,"GET",function IU(n,e){return function t(r,s){const u=g1(n,s,e);return Mc(null!==u),function vU(n,e,t,r){const s=XS(e);if(null===s||!ab(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(E=>{const O=n.fullPath;return sd("/b/"+d(n.bucket)+"/o/"+d(O),t,r)+c1({alt:"media",token:E})})[0]}(u,s,n.host,n._protocol)}}(n,t),d);return m.errorHandler=yw(e),m}(n.storage,n._location,_w());return n.storage.makeRequestWithTokens(e,hu).then(t=>{if(null===t)throw function GV(){return new vr(Kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function A1(n,e){const t=function pU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Xi(n._location.bucket,t);return new ug(n.storage,r)}function x1(n,e){if(n instanceof iA){const t=n;if(null==t._bucket)throw function HV(){return new vr(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+n1+"' property when initializing the app?")}();const r=new ug(t,t._bucket);return null!=e?x1(r,e):r}return void 0!==e?A1(n,e):n}function QU(n,e){if(e&&function KU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof iA)return function YU(n,e){return new ug(n,e)}(n,e);throw Z_("To use ref(service, url), the first argument must be a Storage instance.")}return x1(n,e)}function M1(n,e){const t=e?.[n1];return null==t?null:Xi.makeFromBucketSpec(t,n)}class iA{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=t1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Xi.makeFromBucketSpec(s,this._host):M1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Xi.makeFromBucketSpec(this._url,e):M1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){YS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){YS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ue.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ue.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ug(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new ZV(o1());{const d=function iU(n,e,t,r,s,u,d=!0){const m=c1(n.urlParams),v=n.url+m,E=Object.assign({},n.headers);return function nU(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function eU(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function tU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(E,u),function rU(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,r),new XV(v,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,d)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}makeRequestWithTokens(e,t){var r=this;return(0,ue.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const R1="@firebase/storage";function k1(n,e){return QU(n=(0,Ot.m9)(n),e)}function a2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new iA(t,r,s,e,wr.SDK_VERSION)}!function u2(){(0,wr._registerComponent)(new Gn.wA("storage",a2,"PUBLIC").setMultipleInstances(!0)),(0,wr.registerVersion)(R1,"0.11.2",""),(0,wr.registerVersion)(R1,"0.11.2","esm2017")}();class hb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class F1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new hb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new hb(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?d=>t(new hb(d,this,this._ref)):{next:t.next?d=>t.next(new hb(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class L1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new od(e,this._service))}get items(){return this._delegate.items.map(e=>new od(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class od{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function o2(n,e){return A1(n,e)}(this._delegate,e);return new od(t,this.storage)}get root(){return new od(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new od(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new F1(function XU(n,e,t){return function $U(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new b1(n,new Ac(e),t)}(n=(0,Ot.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=bo.RAW,r){this._throwIfRoot("putString");const s=JS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new F1(new b1(this._delegate,new Ac(s.data,!0),u),this)}listAll(){return function r2(n){return function zU(n){const e={prefixes:[],items:[]};return T1(n,e).then(()=>e)}(n=(0,Ot.m9)(n))}(this._delegate).then(e=>new L1(e,this.storage))}list(e){return function n2(n,e){return S1(n=(0,Ot.m9)(n),e)}(this._delegate,e||void 0).then(t=>new L1(t,this.storage))}getMetadata(){return function e2(n){return function GU(n){n._throwIfRoot("getMetadata");const e=y1(n.storage,n._location,_w());return n.storage.makeRequestWithTokens(e,hu)}(n=(0,Ot.m9)(n))}(this._delegate)}updateMetadata(e){return function t2(n,e){return function qU(n,e){n._throwIfRoot("updateMetadata");const t=function TU(n,e,t,r){const u=sd(e.fullServerUrl(),n.host,n._protocol),m=eA(t,r),E=n.maxOperationRetryTime,T=new xc(u,"PATCH",lb(n,r),E);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=m,T.errorHandler=yw(e),T}(n.storage,n._location,e,_w());return n.storage.makeRequestWithTokens(t,hu)}(n=(0,Ot.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function i2(n){return ZU(n=(0,Ot.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function s2(n){return function WU(n){n._throwIfRoot("deleteObject");const e=function SU(n,e){const r=sd(e.fullServerUrl(),n.host,n._protocol),m=new xc(r,"DELETE",function d(v,E){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=yw(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,hu)}(n=(0,Ot.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw a1(e)}}class V1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(U1(e))throw Z_("ref() expected a child path but got a URL, use refFromURL instead.");return new od(k1(this._delegate,e),this)}refFromURL(e){if(!U1(e))throw Z_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xi.makeFromUrl(e,this._delegate.host)}catch{throw Z_("refFromUrl() expected a valid full URL but got an invalid one.")}return new od(k1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function N1(n,e,t,r={}){!function JU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Ot.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function U1(n){return/^[A-Za-z]+:\/\//.test(n)}function h2(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new V1(t,r)}function B1(n){const e=function p2(n){return new Di.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(qR(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ft.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function fb(n){return{getDownloadURL:()=>D(void 0).pipe(x.fc,Zr(()=>n.getDownloadURL()),x.iC),getMetadata:()=>D(void 0).pipe(x.fc,Zr(()=>n.getMetadata()),x.iC),delete:()=>(0,Jt.D)(n.delete()),child:e=>fb(n.child(e)),updateMetadata:e=>(0,Jt.D)(n.updateMetadata(e)),put:(e,t)=>B1(n.put(e,t)),putString:(e,t,r)=>B1(n.putString(e,t,r)),list:e=>(0,Jt.D)(n.list(e)),listAll:()=>(0,Jt.D)(n.listAll())}}!function f2(n){const e={TaskState:vs,TaskEvent:OU,StringFormat:bo,Storage:V1,Reference:od};n.INTERNAL.registerComponent(new Gn.wA("storage-compat",h2,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Fa.Z);const g2=new c.OlP("angularfire2.storageBucket"),m2=new c.OlP("angularfire2.storage.maxUploadRetryTime"),_2=new c.OlP("angularfire2.storage.maxOperationRetryTime"),y2=new c.OlP("angularfire2.storage.use-emulator");let v2=(()=>{class n{constructor(t,r,s,u,d,m,v,E,T,O){const V=(0,ln.on)(t,d,r);this.storage=(0,ln.cc)(`${V.name}.storage.${s}`,"AngularFireStorage",V.name,()=>{const W=d.runOutsideAngular(()=>V.storage(s||void 0)),ie=T;return ie&&W.useEmulator(...ie),v&&W.setMaxUploadRetryTime(v),E&&W.setMaxOperationRetryTime(E),W},[v,E])}ref(t){return fb(this.storage.ref(t))}refFromURL(t){return fb(this.storage.refFromURL(t))}upload(t,r,s){return fb(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ln.Dh),c.LFG(ln.xv,8),c.LFG(g2,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(x.HU),c.LFG(m2,8),c.LFG(_2,8),c.LFG(y2,8),c.LFG(vI,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),w2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),C2=(()=>{class n{constructor(){wI.Z.registerVersion("angularfire",x.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[v2],imports:[w2]}),n})();const E2={apiKey:"AIzaSyDEMf3XzmfjVr8jt7XgUikz3w9Xwgt15XM",authDomain:"planningpoker-ed055.firebaseapp.com",projectId:"planningpoker-ed055",storageBucket:"planningpoker-ed055.appspot.com",messagingSenderId:"1082193721806",appId:"1:1082193721806:web:2e7ec1a52c7708783b539f",measurementId:"G-1EDZYEV0EL"};let I2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[OV]}),n.\u0275inj=c.cJS({imports:[Rs,RV,ln.hO.initializeApp(E2),oP,JO,C2,$F]}),n})();zo().bootstrapModule(I2).catch(n=>console.error(n))},9751:(gt,Ie,k)=>{k.d(Ie,{y:()=>ce});var c=k(2961),K=k(727),P=k(8822),ee=k(9635),te=k(2416),ne=k(576),de=k(2806);let ce=(()=>{class q{constructor(we){we&&(this._subscribe=we)}lift(we){const ze=new q;return ze.source=this,ze.operator=we,ze}subscribe(we,ze,st){const he=function $(q){return q&&q instanceof c.Lv||function j(q){return q&&(0,ne.m)(q.next)&&(0,ne.m)(q.error)&&(0,ne.m)(q.complete)}(q)&&(0,K.Nn)(q)}(we)?we:new c.Hp(we,ze,st);return(0,de.x)(()=>{const{operator:Ce,source:Ee}=this;he.add(Ce?Ce.call(he,Ee):Ee?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(we){try{return this._subscribe(we)}catch(ze){we.error(ze)}}forEach(we,ze){return new(ze=ae(ze))((st,he)=>{const Ce=new c.Hp({next:Ee=>{try{we(Ee)}catch(Ne){he(Ne),Ce.unsubscribe()}},error:he,complete:st});this.subscribe(Ce)})}_subscribe(we){var ze;return null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(we)}[P.L](){return this}pipe(...we){return(0,ee.U)(we)(this)}toPromise(we){return new(we=ae(we))((ze,st)=>{let he;this.subscribe(Ce=>he=Ce,Ce=>st(Ce),()=>ze(he))})}}return q.create=Be=>new q(Be),q})();function ae(q){var Be;return null!==(Be=q??te.v.Promise)&&void 0!==Be?Be:Promise}},7579:(gt,Ie,k)=>{k.d(Ie,{x:()=>de});var c=k(9751),K=k(727);const ee=(0,k(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=k(8737),ne=k(2806);let de=(()=>{class ae extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const q=new ce(this,this);return q.operator=$,q}_throwIfClosed(){if(this.closed)throw new ee}next($){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next($)}})}error($){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:q}=this;for(;q.length;)q.shift().error($)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:q,isStopped:Be,observers:we}=this;return q||Be?K.Lc:(this.currentObservers=null,we.push($),new K.w0(()=>{this.currentObservers=null,(0,te.P)(we,$)}))}_checkFinalizedStatuses($){const{hasError:q,thrownError:Be,isStopped:we}=this;q?$.error(Be):we&&$.complete()}asObservable(){const $=new c.y;return $.source=this,$}}return ae.create=(j,$)=>new ce(j,$),ae})();class ce extends de{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===q||q.call($,j)}error(j){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===q||q.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,q;return null!==(q=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==q?q:K.Lc}}},2961:(gt,Ie,k)=>{k.d(Ie,{Hp:()=>st,Lv:()=>q});var c=k(576),K=k(727),P=k(2416),ee=k(7849);function te(){}const ne=ae("C",void 0,void 0);function ae(ve,_e,Te){return{kind:ve,value:_e,error:Te}}var j=k(3410),$=k(2806);class q extends K.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,K.Nn)(_e)&&_e.add(this)):this.destination=Ne}static create(_e,Te,Fe){return new st(_e,Te,Fe)}next(_e){this.isStopped?Ee(function ce(ve){return ae("N",ve,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ee(function de(ve){return ae("E",void 0,ve)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ee(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function we(ve,_e){return Be.call(ve,_e)}class ze{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Te}=this;if(Te.next)try{Te.next(_e)}catch(Fe){he(Fe)}}error(_e){const{partialObserver:Te}=this;if(Te.error)try{Te.error(_e)}catch(Fe){he(Fe)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Te){he(Te)}}}class st extends q{constructor(_e,Te,Fe){let Pe;if(super(),(0,c.m)(_e)||!_e)Pe={next:_e??void 0,error:Te??void 0,complete:Fe??void 0};else{let U;this&&P.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),Pe={next:_e.next&&we(_e.next,U),error:_e.error&&we(_e.error,U),complete:_e.complete&&we(_e.complete,U)}):Pe=_e}this.destination=new ze(Pe)}}function he(ve){P.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(ve):(0,ee.h)(ve)}function Ee(ve,_e){const{onStoppedNotification:Te}=P.v;Te&&j.z.setTimeout(()=>Te(ve,_e))}const Ne={closed:!0,next:te,error:function Ce(ve){throw ve},complete:te}},727:(gt,Ie,k)=>{k.d(Ie,{Lc:()=>ne,w0:()=>te,Nn:()=>de});var c=k(576);const P=(0,k(3888).d)(ae=>function($){ae(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((q,Be)=>`${Be+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ee=k(8737);class te{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const we of $)we.remove(this);else $.remove(this);const{initialTeardown:q}=this;if((0,c.m)(q))try{q()}catch(we){j=we instanceof P?we.errors:[we]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const we of Be)try{ce(we)}catch(ze){j=j??[],ze instanceof P?j=[...j,...ze.errors]:j.push(ze)}}if(j)throw new P(j)}}add(j){var $;if(j&&j!==this)if(this.closed)ce(j);else{if(j instanceof te){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,ee.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,ee.P)($,j),j instanceof te&&j._removeParent(this)}}te.EMPTY=(()=>{const ae=new te;return ae.closed=!0,ae})();const ne=te.EMPTY;function de(ae){return ae instanceof te||ae&&"closed"in ae&&(0,c.m)(ae.remove)&&(0,c.m)(ae.add)&&(0,c.m)(ae.unsubscribe)}function ce(ae){(0,c.m)(ae)?ae():ae.unsubscribe()}},2416:(gt,Ie,k)=>{k.d(Ie,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,Ie,k)=>{k.d(Ie,{E:()=>K});const K=new(k(9751).y)(te=>te.complete())},8996:(gt,Ie,k)=>{k.d(Ie,{D:()=>_e});var c=k(8421),K=k(5363),P=k(9468),ne=k(9751),ce=k(2202),ae=k(576),j=k(9672);function q(Te,Fe){if(!Te)throw new Error("Iterable cannot be null");return new ne.y(Pe=>{(0,j.f)(Pe,Fe,()=>{const U=Te[Symbol.asyncIterator]();(0,j.f)(Pe,Fe,()=>{U.next().then(pe=>{pe.done?Pe.complete():Pe.next(pe.value)})},0,!0)})})}var Be=k(3670),we=k(8239),ze=k(1144),st=k(6495),he=k(2206),Ce=k(4532),Ee=k(3260);function _e(Te,Fe){return Fe?function ve(Te,Fe){if(null!=Te){if((0,Be.c)(Te))return function ee(Te,Fe){return(0,c.Xf)(Te).pipe((0,P.R)(Fe),(0,K.Q)(Fe))}(Te,Fe);if((0,ze.z)(Te))return function de(Te,Fe){return new ne.y(Pe=>{let U=0;return Fe.schedule(function(){U===Te.length?Pe.complete():(Pe.next(Te[U++]),Pe.closed||this.schedule())})})}(Te,Fe);if((0,we.t)(Te))return function te(Te,Fe){return(0,c.Xf)(Te).pipe((0,P.R)(Fe),(0,K.Q)(Fe))}(Te,Fe);if((0,he.D)(Te))return q(Te,Fe);if((0,st.T)(Te))return function $(Te,Fe){return new ne.y(Pe=>{let U;return(0,j.f)(Pe,Fe,()=>{U=Te[ce.h](),(0,j.f)(Pe,Fe,()=>{let pe,Ve;try{({value:pe,done:Ve}=U.next())}catch(qe){return void Pe.error(qe)}Ve?Pe.complete():Pe.next(pe)},0,!0)}),()=>(0,ae.m)(U?.return)&&U.return()})}(Te,Fe);if((0,Ee.L)(Te))return function Ne(Te,Fe){return q((0,Ee.Q)(Te),Fe)}(Te,Fe)}throw(0,Ce.z)(Te)}(Te,Fe):(0,c.Xf)(Te)}},8421:(gt,Ie,k)=>{k.d(Ie,{Xf:()=>Be});var c=k(655),K=k(1144),P=k(8239),ee=k(9751),te=k(3670),ne=k(2206),de=k(4532),ce=k(6495),ae=k(3260),j=k(576),$=k(7849),q=k(8822);function Be(ve){if(ve instanceof ee.y)return ve;if(null!=ve){if((0,te.c)(ve))return function we(ve){return new ee.y(_e=>{const Te=ve[q.L]();if((0,j.m)(Te.subscribe))return Te.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,K.z)(ve))return function ze(ve){return new ee.y(_e=>{for(let Te=0;Te<ve.length&&!_e.closed;Te++)_e.next(ve[Te]);_e.complete()})}(ve);if((0,P.t)(ve))return function st(ve){return new ee.y(_e=>{ve.then(Te=>{_e.closed||(_e.next(Te),_e.complete())},Te=>_e.error(Te)).then(null,$.h)})}(ve);if((0,ne.D)(ve))return Ce(ve);if((0,ce.T)(ve))return function he(ve){return new ee.y(_e=>{for(const Te of ve)if(_e.next(Te),_e.closed)return;_e.complete()})}(ve);if((0,ae.L)(ve))return function Ee(ve){return Ce((0,ae.Q)(ve))}(ve)}throw(0,de.z)(ve)}function Ce(ve){return new ee.y(_e=>{(function Ne(ve,_e){var Te,Fe,Pe,U;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Te=(0,c.KL)(ve);!(Fe=yield Te.next()).done;)if(_e.next(Fe.value),_e.closed)return}catch(pe){Pe={error:pe}}finally{try{Fe&&!Fe.done&&(U=Te.return)&&(yield U.call(Te))}finally{if(Pe)throw Pe.error}}_e.complete()})})(ve,_e).catch(Te=>_e.error(Te))})}},6451:(gt,Ie,k)=>{k.d(Ie,{T:()=>ne});var c=k(8189),K=k(8421),P=k(515),ee=k(7669),te=k(8996);function ne(...de){const ce=(0,ee.yG)(de),ae=(0,ee._6)(de,1/0),j=de;return j.length?1===j.length?(0,K.Xf)(j[0]):(0,c.J)(ae)((0,te.D)(j,ce)):P.E}},5403:(gt,Ie,k)=>{k.d(Ie,{x:()=>K});var c=k(2961);function K(ee,te,ne,de,ce){return new P(ee,te,ne,de,ce)}class P extends c.Lv{constructor(te,ne,de,ce,ae,j){super(te),this.onFinalize=ae,this.shouldUnsubscribe=j,this._next=ne?function($){try{ne($)}catch(q){te.error(q)}}:super._next,this._error=ce?function($){try{ce($)}catch(q){te.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch($){te.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(gt,Ie,k)=>{k.d(Ie,{U:()=>P});var c=k(4482),K=k(5403);function P(ee,te){return(0,c.e)((ne,de)=>{let ce=0;ne.subscribe((0,K.x)(de,ae=>{de.next(ee.call(te,ae,ce++))}))})}},8189:(gt,Ie,k)=>{k.d(Ie,{J:()=>P});var c=k(5577),K=k(4671);function P(ee=1/0){return(0,c.z)(K.y,ee)}},5577:(gt,Ie,k)=>{k.d(Ie,{z:()=>ce});var c=k(4004),K=k(8421),P=k(4482),ee=k(9672),te=k(5403),de=k(576);function ce(ae,j,$=1/0){return(0,de.m)(j)?ce((q,Be)=>(0,c.U)((we,ze)=>j(q,we,Be,ze))((0,K.Xf)(ae(q,Be))),$):("number"==typeof j&&($=j),(0,P.e)((q,Be)=>function ne(ae,j,$,q,Be,we,ze,st){const he=[];let Ce=0,Ee=0,Ne=!1;const ve=()=>{Ne&&!he.length&&!Ce&&j.complete()},_e=Fe=>Ce<q?Te(Fe):he.push(Fe),Te=Fe=>{we&&j.next(Fe),Ce++;let Pe=!1;(0,K.Xf)($(Fe,Ee++)).subscribe((0,te.x)(j,U=>{Be?.(U),we?_e(U):j.next(U)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Ce--;he.length&&Ce<q;){const U=he.shift();ze?(0,ee.f)(j,ze,()=>Te(U)):Te(U)}ve()}catch(U){j.error(U)}}))};return ae.subscribe((0,te.x)(j,_e,()=>{Ne=!0,ve()})),()=>{st?.()}}(q,Be,ae,$)))}},5363:(gt,Ie,k)=>{k.d(Ie,{Q:()=>ee});var c=k(9672),K=k(4482),P=k(5403);function ee(te,ne=0){return(0,K.e)((de,ce)=>{de.subscribe((0,P.x)(ce,ae=>(0,c.f)(ce,te,()=>ce.next(ae),ne),()=>(0,c.f)(ce,te,()=>ce.complete(),ne),ae=>(0,c.f)(ce,te,()=>ce.error(ae),ne)))})}},3099:(gt,Ie,k)=>{k.d(Ie,{B:()=>te});var c=k(8421),K=k(7579),P=k(2961),ee=k(4482);function te(de={}){const{connector:ce=(()=>new K.x),resetOnError:ae=!0,resetOnComplete:j=!0,resetOnRefCountZero:$=!0}=de;return q=>{let Be,we,ze,st=0,he=!1,Ce=!1;const Ee=()=>{we?.unsubscribe(),we=void 0},Ne=()=>{Ee(),Be=ze=void 0,he=Ce=!1},ve=()=>{const _e=Be;Ne(),_e?.unsubscribe()};return(0,ee.e)((_e,Te)=>{st++,!Ce&&!he&&Ee();const Fe=ze=ze??ce();Te.add(()=>{st--,0===st&&!Ce&&!he&&(we=ne(ve,$))}),Fe.subscribe(Te),!Be&&st>0&&(Be=new P.Hp({next:Pe=>Fe.next(Pe),error:Pe=>{Ce=!0,Ee(),we=ne(Ne,ae,Pe),Fe.error(Pe)},complete:()=>{he=!0,Ee(),we=ne(Ne,j),Fe.complete()}}),(0,c.Xf)(_e).subscribe(Be))})(q)}}function ne(de,ce,...ae){if(!0===ce)return void de();if(!1===ce)return;const j=new P.Hp({next:()=>{j.unsubscribe(),de()}});return(0,c.Xf)(ce(...ae)).subscribe(j)}},9468:(gt,Ie,k)=>{k.d(Ie,{R:()=>K});var c=k(4482);function K(P,ee=0){return(0,c.e)((te,ne)=>{ne.add(P.schedule(()=>te.subscribe(ne),ee))})}},8505:(gt,Ie,k)=>{k.d(Ie,{b:()=>te});var c=k(576),K=k(4482),P=k(5403),ee=k(4671);function te(ne,de,ce){const ae=(0,c.m)(ne)||de||ce?{next:ne,error:de,complete:ce}:ne;return ae?(0,K.e)((j,$)=>{var q;null===(q=ae.subscribe)||void 0===q||q.call(ae);let Be=!0;j.subscribe((0,P.x)($,we=>{var ze;null===(ze=ae.next)||void 0===ze||ze.call(ae,we),$.next(we)},()=>{var we;Be=!1,null===(we=ae.complete)||void 0===we||we.call(ae),$.complete()},we=>{var ze;Be=!1,null===(ze=ae.error)||void 0===ze||ze.call(ae,we),$.error(we)},()=>{var we,ze;Be&&(null===(we=ae.unsubscribe)||void 0===we||we.call(ae)),null===(ze=ae.finalize)||void 0===ze||ze.call(ae)}))}):ee.y}},4408:(gt,Ie,k)=>{k.d(Ie,{o:()=>te});var c=k(727);class K extends c.w0{constructor(de,ce){super()}schedule(de,ce=0){return this}}const P={setInterval(ne,de,...ce){const{delegate:ae}=P;return ae?.setInterval?ae.setInterval(ne,de,...ce):setInterval(ne,de,...ce)},clearInterval(ne){const{delegate:de}=P;return(de?.clearInterval||clearInterval)(ne)},delegate:void 0};var ee=k(8737);class te extends K{constructor(de,ce){super(de,ce),this.scheduler=de,this.work=ce,this.pending=!1}schedule(de,ce=0){var ae;if(this.closed)return this;this.state=de;const j=this.id,$=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId($,j,ce)),this.pending=!0,this.delay=ce,this.id=null!==(ae=this.id)&&void 0!==ae?ae:this.requestAsyncId($,this.id,ce),this}requestAsyncId(de,ce,ae=0){return P.setInterval(de.flush.bind(de,this),ae)}recycleAsyncId(de,ce,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return ce;null!=ce&&P.clearInterval(ce)}execute(de,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(de,ce);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ce){let j,ae=!1;try{this.work(de)}catch($){ae=!0,j=$||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:de,scheduler:ce}=this,{actions:ae}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(ae,this),null!=de&&(this.id=this.recycleAsyncId(ce,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,Ie,k)=>{k.d(Ie,{v:()=>P});var c=k(6063);class K{constructor(te,ne=K.now){this.schedulerActionCtor=te,this.now=ne}schedule(te,ne=0,de){return new this.schedulerActionCtor(this,te).schedule(de,ne)}}K.now=c.l.now;class P extends K{constructor(te,ne=K.now){super(te,ne),this.actions=[],this._active=!1}flush(te){const{actions:ne}=this;if(this._active)return void ne.push(te);let de;this._active=!0;do{if(de=te.execute(te.state,te.delay))break}while(te=ne.shift());if(this._active=!1,de){for(;te=ne.shift();)te.unsubscribe();throw de}}}},4986:(gt,Ie,k)=>{k.d(Ie,{z:()=>P});var c=k(4408);const P=new(k(7565).v)(c.o)},6063:(gt,Ie,k)=>{k.d(Ie,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(gt,Ie,k)=>{k.d(Ie,{z:()=>c});const c={setTimeout(K,P,...ee){const{delegate:te}=c;return te?.setTimeout?te.setTimeout(K,P,...ee):setTimeout(K,P,...ee)},clearTimeout(K){const{delegate:P}=c;return(P?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(gt,Ie,k)=>{k.d(Ie,{h:()=>K});const K=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,Ie,k)=>{k.d(Ie,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,Ie,k)=>{k.d(Ie,{_6:()=>ne,jO:()=>ee,yG:()=>te});var c=k(576);function P(de){return de[de.length-1]}function ee(de){return(0,c.m)(P(de))?de.pop():void 0}function te(de){return function K(de){return de&&(0,c.m)(de.schedule)}(P(de))?de.pop():void 0}function ne(de,ce){return"number"==typeof P(de)?de.pop():ce}},8737:(gt,Ie,k)=>{function c(K,P){if(K){const ee=K.indexOf(P);0<=ee&&K.splice(ee,1)}}k.d(Ie,{P:()=>c})},3888:(gt,Ie,k)=>{function c(K){const ee=K(te=>{Error.call(te),te.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}k.d(Ie,{d:()=>c})},2806:(gt,Ie,k)=>{k.d(Ie,{O:()=>ee,x:()=>P});var c=k(2416);let K=null;function P(te){if(c.v.useDeprecatedSynchronousErrorHandling){const ne=!K;if(ne&&(K={errorThrown:!1,error:null}),te(),ne){const{errorThrown:de,error:ce}=K;if(K=null,de)throw ce}}else te()}function ee(te){c.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=te)}},9672:(gt,Ie,k)=>{function c(K,P,ee,te=0,ne=!1){const de=P.schedule(function(){ee(),ne?K.add(this.schedule(null,te)):this.unsubscribe()},te);if(K.add(de),!ne)return de}k.d(Ie,{f:()=>c})},4671:(gt,Ie,k)=>{function c(K){return K}k.d(Ie,{y:()=>c})},1144:(gt,Ie,k)=>{k.d(Ie,{z:()=>c});const c=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(gt,Ie,k)=>{k.d(Ie,{D:()=>K});var c=k(576);function K(P){return Symbol.asyncIterator&&(0,c.m)(P?.[Symbol.asyncIterator])}},576:(gt,Ie,k)=>{function c(K){return"function"==typeof K}k.d(Ie,{m:()=>c})},3670:(gt,Ie,k)=>{k.d(Ie,{c:()=>P});var c=k(8822),K=k(576);function P(ee){return(0,K.m)(ee[c.L])}},6495:(gt,Ie,k)=>{k.d(Ie,{T:()=>P});var c=k(2202),K=k(576);function P(ee){return(0,K.m)(ee?.[c.h])}},8239:(gt,Ie,k)=>{k.d(Ie,{t:()=>K});var c=k(576);function K(P){return(0,c.m)(P?.then)}},3260:(gt,Ie,k)=>{k.d(Ie,{L:()=>ee,Q:()=>P});var c=k(655),K=k(576);function P(te){return(0,c.FC)(this,arguments,function*(){const de=te.getReader();try{for(;;){const{value:ce,done:ae}=yield(0,c.qq)(de.read());if(ae)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ce)}}finally{de.releaseLock()}})}function ee(te){return(0,K.m)(te?.getReader)}},4482:(gt,Ie,k)=>{k.d(Ie,{A:()=>K,e:()=>P});var c=k(576);function K(ee){return(0,c.m)(ee?.lift)}function P(ee){return te=>{if(K(te))return te.lift(function(ne){try{return ee(ne,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(gt,Ie,k)=>{k.d(Ie,{U:()=>P,z:()=>K});var c=k(4671);function K(...ee){return P(ee)}function P(ee){return 0===ee.length?c.y:1===ee.length?ee[0]:function(ne){return ee.reduce((de,ce)=>ce(de),ne)}}},7849:(gt,Ie,k)=>{k.d(Ie,{h:()=>P});var c=k(2416),K=k(3410);function P(ee){K.z.setTimeout(()=>{const{onUnhandledError:te}=c.v;if(!te)throw ee;te(ee)})}},4532:(gt,Ie,k)=>{function c(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ie,{z:()=>c})},655:(gt,Ie,k)=>{function ee(se,le){var ge={};for(var Me in se)Object.prototype.hasOwnProperty.call(se,Me)&&le.indexOf(Me)<0&&(ge[Me]=se[Me]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(Me=Object.getOwnPropertySymbols(se);ke<Me.length;ke++)le.indexOf(Me[ke])<0&&Object.prototype.propertyIsEnumerable.call(se,Me[ke])&&(ge[Me[ke]]=se[Me[ke]])}return ge}function q(se,le,ge,Me){return new(ge||(ge=Promise))(function(je,Je){function Ke(en){try{Ct(Me.next(en))}catch(Xe){Je(Xe)}}function rn(en){try{Ct(Me.throw(en))}catch(Xe){Je(Xe)}}function Ct(en){en.done?je(en.value):function ke(je){return je instanceof ge?je:new ge(function(Je){Je(je)})}(en.value).then(Ke,rn)}Ct((Me=Me.apply(se,le||[])).next())})}function ve(se){return this instanceof ve?(this.v=se,this):new ve(se)}function _e(se,le,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,Me=ge.apply(se,le||[]),je=[];return ke={},Je("next"),Je("throw"),Je("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function Je(Dt){Me[Dt]&&(ke[Dt]=function(Yn){return new Promise(function(hn,bn){je.push([Dt,Yn,hn,bn])>1||Ke(Dt,Yn)})})}function Ke(Dt,Yn){try{!function rn(Dt){Dt.value instanceof ve?Promise.resolve(Dt.value.v).then(Ct,en):Xe(je[0][2],Dt)}(Me[Dt](Yn))}catch(hn){Xe(je[0][3],hn)}}function Ct(Dt){Ke("next",Dt)}function en(Dt){Ke("throw",Dt)}function Xe(Dt,Yn){Dt(Yn),je.shift(),je.length&&Ke(je[0][0],je[0][1])}}function Fe(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,le=se[Symbol.asyncIterator];return le?le.call(se):(se=function st(se){var le="function"==typeof Symbol&&Symbol.iterator,ge=le&&se[le],Me=0;if(ge)return ge.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Me>=se.length&&(se=void 0),{value:se&&se[Me++],done:!se}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),ge={},Me("next"),Me("throw"),Me("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function Me(je){ge[je]=se[je]&&function(Je){return new Promise(function(Ke,rn){!function ke(je,Je,Ke,rn){Promise.resolve(rn).then(function(Ct){je({value:Ct,done:Ke})},Je)}(Ke,rn,(Je=se[je](Je)).done,Je.value)})}}}k.d(Ie,{FC:()=>_e,KL:()=>Fe,_T:()=>ee,mG:()=>q,qq:()=>ve})},4650:(gt,Ie,k)=>{k.d(Ie,{$8M:()=>Nu,$WT:()=>Es,$Z:()=>yo,AFp:()=>y0,ALo:()=>qv,AaK:()=>ce,AsE:()=>da,CHM:()=>Tu,CRH:()=>l_,CZH:()=>Bp,CqO:()=>Gy,D6c:()=>vT,DdM:()=>t_,EJc:()=>qE,EpF:()=>ac,F4k:()=>Ll,FYo:()=>my,FiY:()=>ho,Gf:()=>c_,GfV:()=>Zf,Gpc:()=>$,Gre:()=>Sh,JOm:()=>An,KtG:()=>uf,LFG:()=>$e,LSH:()=>ay,Lbi:()=>GE,Lck:()=>Fv,MMx:()=>Dp,MT6:()=>uv,NdJ:()=>bm,OlP:()=>_n,Oqu:()=>sv,P3R:()=>Gg,PXZ:()=>Hp,Q6J:()=>wm,QGY:()=>Im,Qsj:()=>Bw,R0b:()=>Hs,RDi:()=>qd,Rgc:()=>xp,SBq:()=>th,Sil:()=>XD,Suo:()=>OE,TTD:()=>no,TgZ:()=>Fl,VKq:()=>wE,WLB:()=>n_,X6Q:()=>cT,XFs:()=>mt,Xpm:()=>fu,Xts:()=>jf,Y36:()=>Sl,YKP:()=>Zl,YNc:()=>Ht,Yjl:()=>Pc,Yz7:()=>Xe,Z0I:()=>bn,ZZ4:()=>O_,_Bn:()=>Nh,_UZ:()=>Hy,_Vd:()=>eh,_c5:()=>aI,_uU:()=>iv,aQg:()=>U0,c2e:()=>$n,cJS:()=>Yn,cg1:()=>gv,dDg:()=>au,dqk:()=>kt,eFA:()=>JE,eJc:()=>Np,ekj:()=>jl,eoX:()=>oT,f3M:()=>rt,g9A:()=>C0,h0i:()=>yc,hGG:()=>uI,hij:()=>dp,iGM:()=>RE,ifc:()=>Q,ip1:()=>C_,jDz:()=>ha,kEZ:()=>CE,kL8:()=>Ah,lG2:()=>Oc,lcZ:()=>IE,lqb:()=>Mi,lri:()=>KE,n5z:()=>Id,oAB:()=>gu,oxw:()=>ap,q4F:()=>qi,qLn:()=>Wf,qOj:()=>_m,qZA:()=>Em,rWj:()=>Eo,sBO:()=>Cc,s_b:()=>s_,soG:()=>hs,tb:()=>$p,tp0:()=>Jt,uIk:()=>li,vHH:()=>he,vpe:()=>$s,wAp:()=>bt,xp6:()=>Ww,z2F:()=>ed,zSh:()=>Kg,zs3:()=>Ka});var c=k(7579),K=k(727),P=k(9751),ee=k(6451),te=k(3099);function ne(i){for(let o in i)if(i[o]===ne)return o;throw Error("Could not find renamed property on target object.")}function de(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ae(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=ne({__forward_ref__:ne});function $(i){return i.__forward_ref__=$,i.toString=function(){return ce(this())},i}function q(i){return Be(i)?i():i}function Be(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}function we(i){return i&&!!i.\u0275providers}const st="https://g.co/ng/security#xss";class he extends Error{constructor(o,a){super(Ce(o,a)),this.code=o}}function Ce(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function Ee(i){return"string"==typeof i?i:null==i?"":String(i)}function Fe(i,o){throw new he(-201,!1)}function Je(i,o){null==i&&function Ke(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Xe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Yn(i){return{providers:i.providers||[],imports:i.imports||[]}}function hn(i){return Mn(i,Kr)||Mn(i,Dn)}function bn(i){return null!==hn(i)}function Mn(i,o){return i.hasOwnProperty(o)?i[o]:null}function gi(i){return i&&(i.hasOwnProperty(ws)||i.hasOwnProperty(Yr))?i[ws]:null}const Kr=ne({\u0275prov:ne}),ws=ne({\u0275inj:ne}),Dn=ne({ngInjectableDef:ne}),Yr=ne({ngInjectorDef:ne});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Cs;function Rn(i){const o=Cs;return Cs=i,o}function Sr(i,o,a){const l=hn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&mt.Optional?null:void 0!==o?o:void Fe(ce(i))}const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wn={},Qn="__NG_DI_FLAG__",Br="ngTempTokenPath",Ar="ngTokenPath",ma=/\n/gm,an="\u0275",es="__source";let Kt;function jr(i){const o=Kt;return Kt=i,o}function Fi(i,o=mt.Default){if(void 0===Kt)throw new he(-203,!1);return null===Kt?Sr(i,void 0,o):Kt.get(i,o&mt.Optional?null:void 0,o)}function $e(i,o=mt.Default){return(function Si(){return Cs}()||Fi)(q(i),o)}function rt(i,o=mt.Default){return $e(i,It(o))}function It(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Rt(i){const o=[];for(let a=0;a<i.length;a++){const l=q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new he(900,!1);let h,g=mt.Default;for(let y=0;y<l.length;y++){const C=l[y],I=xr(C);"number"==typeof I?-1===I?h=C.token:g|=I:h=C}o.push($e(h,g))}else o.push($e(l))}return o}function Ut(i,o){return i[Qn]=o,i.prototype[Qn]=o,i}function xr(i){return i[Qn]}function G(i){return{toString:i}.toString()}var fe=(()=>((fe=fe||{})[fe.OnPush=0]="OnPush",fe[fe.Default=1]="Default",fe))(),Q=(()=>{return(i=Q||(Q={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Q;var i})();const et={},Ze=[],cn=ne({\u0275cmp:ne}),On=ne({\u0275dir:ne}),Ln=ne({\u0275pipe:ne}),ir=ne({\u0275mod:ne}),Nt=ne({\u0275fac:ne}),$r=ne({__NG_ELEMENT_ID__:ne});let Li=0;function fu(i){return G(()=>{const o=Mr(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===fe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||Q.Emulated,id:"c"+Li++,styles:i.styles||Ze,_:null,schemas:i.schemas||null,tView:null};mu(a);const l=i.dependencies;return a.directiveDefs=Ks(l,!1),a.pipeDefs=Ks(l,!0),a})}function Rc(i){return Yt(i)||Jn(i)}function pu(i){return null!==i}function gu(i){return G(()=>({type:i.type,bootstrap:i.bootstrap||Ze,declarations:i.declarations||Ze,imports:i.imports||Ze,exports:i.exports||Ze,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Vn(i,o){if(null==i)return et;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=l,o&&(o[h]=g)}return a}function Oc(i){return G(()=>{const o=Mr(i);return mu(o),o})}function Pc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Yt(i){return i[cn]||null}function Jn(i){return i[On]||null}function lr(i){return i[Ln]||null}function Es(i){const o=Yt(i)||Jn(i)||lr(i);return null!==o&&o.standalone}function sr(i,o){const a=i[ir]||null;if(!a&&!0===o)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Mr(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Ze,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vn(i.inputs,o),outputs:Vn(i.outputs)}}function mu(i){i.features?.forEach(o=>o(i))}function Ks(i,o){if(!i)return null;const a=o?lr:Rc;return()=>("function"==typeof i?i():i).map(l=>a(l)).filter(pu)}const mi=0,He=1,Ft=2,gn=3,Qr=4,Vi=5,mn=6,Ys=7,Tn=8,dr=9,_a=10,jt=11,Do=12,To=13,Qs=14,ya=15,hr=16,So=17,Js=18,Jr=19,_i=20,kc=21,qt=22,Nc=1,_u=2,Xs=7,Xr=8,Is=9,fr=10;function ei(i){return Array.isArray(i)&&"object"==typeof i[Nc]}function ti(i){return Array.isArray(i)&&!0===i[Nc]}function ns(i){return 0!=(4&i.flags)}function yu(i){return i.componentOffset>-1}function Ao(i){return 1==(1&i.flags)}function Rr(i){return!!i.template}function ad(i){return 0!=(256&i[Ft])}function ni(i,o){return i.hasOwnProperty(Nt)?i[Nt]:null}class cd{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function no(){return wa}function wa(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ro),Mo}function Mo(){const i=Bc(this),o=i?.current;if(o){const a=i.previous;if(a===et)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Ro(i,o,a,l){const h=this.declaredInputs[a],g=Bc(i)||function Cu(i,o){return i[Ca]=o}(i,{previous:et,current:null}),y=g.current||(g.current={}),C=g.previous,I=C[h];y[h]=new cd(I&&I.currentValue,o,C===et),i[l]=o}no.ngInherit=!0;const Ca="__ngSimpleChanges__";function Bc(i){return i[Ca]||null}const nn=function(i,o,a){};function Pn(i){for(;Array.isArray(i);)i=i[mi];return i}function Bi(i,o){return Pn(o[i])}function Or(i,o){return Pn(o[i.index])}function jc(i,o){return i.data[o]}function Xn(i,o){const a=o[i];return ei(a)?a:a[mi]}function Oo(i){return 64==(64&i[Ft])}function is(i,o){return null==o?null:i[o]}function Po(i){i[Js]=0}function Hc(i,o){i[Vi]+=o;let a=i,l=i[gn];for(;null!==l&&(1===o&&1===a[Vi]||-1===o&&0===a[Vi]);)l[Vi]+=o,a=l,l=l[gn]}const St={lFrame:Y_(null),bindingsEnabled:!0};function Du(){return St.bindingsEnabled}function be(){return St.lFrame.lView}function Qt(){return St.lFrame.tView}function Tu(i){return St.lFrame.contextLView=i,i[Tn]}function uf(i){return St.lFrame.contextLView=null,i}function or(){let i=zc();for(;null!==i&&64===i.type;)i=i.parent;return i}function zc(){return St.lFrame.currentTNode}function ri(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function fd(){return St.lFrame.isParent}function Un(){const i=St.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Sa(){return St.lFrame.bindingIndex++}function vi(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function md(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,xu(o)}function xu(i){St.lFrame.currentDirectiveIndex=i}function Zc(){return St.lFrame.currentQueryIndex}function Mu(i){St.lFrame.currentQueryIndex=i}function fg(i){const o=i[He];return 2===o.type?o.declTNode:1===o.type?i[mn]:null}function Wc(i,o,a){if(a&mt.SkipSelf){let h=o,g=i;for(;!(h=h.parent,null!==h||a&mt.Host||(h=fg(g),null===h||(g=g[ya],10&h.type))););if(null===h)return!1;o=h,i=g}const l=St.lFrame=pg();return l.currentTNode=o,l.lView=i,!0}function _d(i){const o=pg(),a=i[He];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function pg(){const i=St.lFrame,o=null===i?null:i.child;return null===o?Y_(i):o}function Y_(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Kc(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const gg=Kc;function cf(){const i=Kc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Hr(){return St.lFrame.selectedIndex}function Aa(i){St.lFrame.selectedIndex=i}function Cn(){const i=St.lFrame;return jc(i.tView,i.selectedIndex)}function Yc(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:M}=g;y&&(i.contentHooks??(i.contentHooks=[])).push(-a,y),C&&((i.contentHooks??(i.contentHooks=[])).push(a,C),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,C)),I&&(i.viewHooks??(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks??(i.viewHooks=[])).push(a,A),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,A)),null!=M&&(i.destroyHooks??(i.destroyHooks=[])).push(a,M)}}function Qc(i,o,a){Ts(i,o,3,a)}function Fo(i,o,a,l){(3&i[Ft])===a&&Ts(i,o,a,l)}function io(i,o){let a=i[Ft];(3&a)===o&&(a&=2047,a+=1,i[Ft]=a)}function Ts(i,o,a,l){const g=l??-1,y=o.length-1;let C=0;for(let I=void 0!==l?65535&i[Js]:0;I<y;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=l&&C>=l)break}else o[I]<0&&(i[Js]+=65536),(C<g||-1==g)&&(Ru(i,a,o,I),i[Js]=(4294901760&i[Js])+I+2),I++}function Ru(i,o,a,l){const h=a[l]<0,g=a[l+1],C=i[h?-a[l]:a[l]];if(h){if(i[Ft]>>11<i[Js]>>16&&(3&i[Ft])===o){i[Ft]+=2048,nn(4,C,g);try{g.call(C)}finally{nn(5,C,g)}}}else{nn(4,C,g);try{g.call(C)}finally{nn(5,C,g)}}}const wi=-1;class xa{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function $i(i,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const g=a[l++],y=a[l++],C=a[l++];i.setAttribute(o,y,C,g)}else{const g=h,y=a[++l];En(g)?i.setProperty(o,g,y):i.setAttribute(o,g,y),l++}}return l}function Lo(i){return 3===i||4===i||6===i}function En(i){return 64===i.charCodeAt(0)}function Ss(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||so(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function so(i,o,a,l,h){let g=0,y=i.length;if(-1===o)y=-1;else for(;g<i.length;){const C=i[g++];if("number"==typeof C){if(C===o){y=-1;break}if(C>o){y=g-1;break}}}for(;g<i.length;){const C=i[g];if("number"==typeof C)break;if(C===a){if(null===l)return void(null!==h&&(i[g+1]=h));if(l===i[g+1])return void(i[g+2]=h)}g++,null!==l&&g++,null!==h&&g++}-1!==y&&(i.splice(y,0,o),g=y+1),i.splice(g++,0,a),null!==l&&i.splice(g++,0,l),null!==h&&i.splice(g++,0,h)}function el(i){return i!==wi}function Vo(i){return 32767&i}function Uo(i,o){let a=function df(i){return i>>16}(i),l=o;for(;a>0;)l=l[ya],a--;return l}let Ma=!0;function Bo(i){const o=Ma;return Ma=i,o}const jo=255,oo=5;let As=0;const Ei={};function $o(i,o){const a=Ou(i,o);if(-1!==a)return a;const l=o[He];l.firstCreatePass&&(i.injectorIndex=o.length,xs(l.data,i),xs(o,null),xs(l.blueprint,null));const h=Ms(i,o),g=i.injectorIndex;if(el(h)){const y=Vo(h),C=Uo(h,o),I=C[He].data;for(let A=0;A<8;A++)o[g+A]=C[y+A]|I[y+A]}return o[g+8]=h,g}function xs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ou(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ms(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=Dd(h),null===l)return wi;if(a++,h=h[ya],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return wi}function Ho(i,o,a){!function Ra(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty($r)&&(l=a[$r]),null==l&&(l=a[$r]=As++);const h=l&jo;o.data[i+(h>>oo)]|=1<<h}(i,o,a)}function Oa(i,o,a){if(a&mt.Optional||void 0!==i)return i;Fe()}function ff(i,o,a,l){if(a&mt.Optional&&void 0===l&&(l=null),!(a&(mt.Self|mt.Host))){const h=i[dr],g=Rn(void 0);try{return h?h.get(o,l,a&mt.Optional):Sr(o,l,a&mt.Optional)}finally{Rn(g)}}return Oa(l,0,a)}function ss(i,o,a,l=mt.Default,h){if(null!==i){if(1024&o[Ft]){const y=function bd(i,o,a,l,h){let g=i,y=o;for(;null!==g&&null!==y&&1024&y[Ft]&&!(256&y[Ft]);){const C=Cd(g,y,a,l|mt.Self,Ei);if(C!==Ei)return C;let I=g.parent;if(!I){const A=y[kc];if(A){const M=A.get(a,Ei,l);if(M!==Ei)return M}I=Dd(y),y=y[ya]}g=I}return h}(i,o,a,l,Ei);if(y!==Ei)return y}const g=Cd(i,o,a,l,Ei);if(g!==Ei)return g}return ff(o,a,l,h)}function Cd(i,o,a,l,h){const g=function uo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty($r)?i[$r]:void 0;return"number"==typeof o?o>=0?o&jo:nl:o}(a);if("function"==typeof g){if(!Wc(o,i,l))return l&mt.Host?Oa(h,0,l):ff(o,a,l,h);try{const y=g(l);if(null!=y||l&mt.Optional)return y;Fe()}finally{gg()}}else if("number"==typeof g){let y=null,C=Ou(i,o),I=wi,A=l&mt.Host?o[hr][mn]:null;for((-1===C||l&mt.SkipSelf)&&(I=-1===C?Ms(i,o):o[C+8],I!==wi&&ku(l,!1)?(y=o[He],C=Vo(I),o=Uo(I,o)):C=-1);-1!==C;){const M=o[He];if(Ed(g,C,M.data)){const N=Ai(C,o,a,y,l,A);if(N!==Ei)return N}I=o[C+8],I!==wi&&ku(l,o[He].data[C+8]===A)&&Ed(g,C,o)?(y=M,C=Vo(I),o=Uo(I,o)):C=-1}}return h}function Ai(i,o,a,l,h,g){const y=o[He],C=y.data[i+8],M=Pu(C,y,a,null==l?yu(C)&&Ma:l!=y&&0!=(3&C.type),h&mt.Host&&g===C);return null!==M?ao(o,y,M,C):Ei}function Pu(i,o,a,l,h){const g=i.providerIndexes,y=o.data,C=1048575&g,I=i.directiveStart,M=g>>20,H=h?C+M:i.directiveEnd;for(let Y=l?C:C+M;Y<H;Y++){const me=y[Y];if(Y<I&&a===me||Y>=I&&me.type===a)return Y}if(h){const Y=y[I];if(Y&&Rr(Y)&&Y.type===a)return I}return null}function ao(i,o,a,l){let h=i[a];const g=o.data;if(function vd(i){return i instanceof xa}(h)){const y=h;y.resolving&&function ve(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ne(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ee(i)}(g[a]));const C=Bo(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Rn(y.injectImpl):null;Wc(i,l,mt.Default);try{h=i[a]=y.factory(void 0,g,i,l),o.firstCreatePass&&a>=l.directiveStart&&function vg(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(l){const y=wa(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,y)}h&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,h),g&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],o)}finally{null!==I&&Rn(I),Bo(C),y.resolving=!1,gg()}}return h}function Ed(i,o,a){return!!(a[o+(i>>oo)]&1<<i)}function ku(i,o){return!(i&mt.Self||i&mt.Host&&o)}class Pr{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return ss(this._tNode,this._lView,o,It(l),a)}}function nl(){return new Pr(or(),be())}function Id(i){return G(()=>{const o=i.prototype.constructor,a=o[Nt]||zo(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const g=h[Nt]||zo(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function zo(i){return Be(i)?()=>{const o=zo(q(i));return o&&o()}:ni(i)}function Dd(i){const o=i[He],a=o.type;return 2===a?o.declTNode:1===a?i[mn]:null}function Nu(i){return function hf(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const g=a[h];if(Lo(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(or(),i)}const co="__parameters__";function Go(i,o,a){return G(()=>{const l=function Td(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...g){if(this instanceof h)return l.apply(this,g),this;const y=new h(...g);return C.annotation=y,C;function C(I,A,M){const N=I.hasOwnProperty(co)?I[co]:Object.defineProperty(I,co,{value:[]})[co];for(;N.length<=M;)N.push(null);return(N[M]=N[M]||[]).push(y),I}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class _n{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xe({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ps(i,o){i.forEach(a=>Array.isArray(a)?Ps(a,o):o(a))}function rl(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Na(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function un(i,o,a){let l=os(i,o);return l>=0?i[1|l]=a:(l=~l,function sl(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Lu(i,o){const a=os(i,o);if(a>=0)return i[1|a]}function os(i,o){return function yn(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const g=l+(h-l>>1),y=i[g<<a];if(o===y)return g<<a;y>o?h=g:l=g+1}return~(h<<a)}(i,o,1)}const ho=Ut(Go("Optional"),8),Jt=Ut(Go("SkipSelf"),4);var An=(()=>((An=An||{})[An.Important=1]="Important",An[An.DashCase=2]="DashCase",An))();const Bu=new Map;let Ns=0;const kd="__ngContext__";function Er(i,o){ei(o)?(i[kd]=o[_i],function Sf(i){Bu.set(i[_i],i)}(o)):i[kd]=o}let Rf;function xg(i,o){return Rf(i,o)}function Va(i){const o=i[gn];return ti(o)?o[gn]:o}function Fd(i){return Ld(i[To])}function Qo(i){return Ld(i[Qr])}function Ld(i){for(;null!==i&&!ti(i);)i=i[Qr];return i}function Jo(i,o,a,l,h){if(null!=l){let g,y=!1;ti(l)?g=l:ei(l)&&(y=!0,l=l[mi]);const C=Pn(l);0===i&&null!==a?null==h?Pf(o,a,C):Ba(o,a,C,h||null,!0):1===i&&null!==a?Ba(o,a,C,h||null,!0):2===i?function Zu(i,o,a){const l=Gu(i,o);l&&function Lg(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,C,y):3===i&&o.destroyNode(C),null!=g&&function iy(i,o,a,l,h){const g=a[Xs];g!==Pn(a)&&Jo(o,i,l,g,h);for(let C=fr;C<a.length;C++){const I=a[C];Ha(I[He],I,i,o,l,g)}}(o,i,g,a,h)}}function Hu(i,o,a){return i.createElement(o,a)}function zu(i,o){const a=i[Is],l=a.indexOf(o),h=o[gn];512&o[Ft]&&(o[Ft]&=-513,Hc(h,-1)),a.splice(l,1)}function cl(i,o){if(i.length<=fr)return;const a=fr+o,l=i[a];if(l){const h=l[So];null!==h&&h!==i&&zu(h,l),o>0&&(i[a-1][Qr]=l[Qr]);const g=Na(i,fr+o);!function ty(i,o){Ha(i,o,o[jt],2,null,null),o[mi]=null,o[mn]=null}(l[He],l);const y=g[Jr];null!==y&&y.detachView(g[He]),l[gn]=null,l[Qr]=null,l[Ft]&=-65}return l}function Ud(i,o){if(!(128&o[Ft])){const a=o[jt];a.destroyNode&&Ha(i,o,a,3,null,null),function Of(i){let o=i[To];if(!o)return qn(i[He],i);for(;o;){let a=null;if(ei(o))a=o[To];else{const l=o[fr];l&&(a=l)}if(!a){for(;o&&!o[Qr]&&o!==i;)ei(o)&&qn(o[He],o),o=o[gn];null===o&&(o=i),ei(o)&&qn(o[He],o),a=o&&o[Qr]}o=a}}(o)}}function qn(i,o){if(!(128&o[Ft])){o[Ft]&=-65,o[Ft]|=128,function Bd(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof xa)){const g=a[l+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const C=h[g[y]],I=g[y+1];nn(4,C,I);try{I.call(C)}finally{nn(5,C,I)}}else{nn(4,h,g);try{g.call(h)}finally{nn(5,h,g)}}}}}(i,o),function mr(i,o){const a=i.cleanup,l=o[Ys];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const y=a[g+3];y>=0?l[h=y]():l[h=-y].unsubscribe(),g+=2}else{const y=l[h=a[g+1]];a[g].call(y)}if(null!==l){for(let g=h+1;g<l.length;g++)(0,l[g])();o[Ys]=null}}(i,o),1===o[He].type&&o[jt].destroy();const a=o[So];if(null!==a&&ti(o[gn])){a!==o[gn]&&zu(a,o);const l=o[Jr];null!==l&&l.detachView(i)}!function Yo(i){Bu.delete(i[_i])}(o)}}function jd(i,o,a){return function ll(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[mi];{const{componentOffset:h}=l;if(h>-1){const{encapsulation:g}=i.data[l.directiveStart+h];if(g===Q.None||g===Q.Emulated)return null}return Or(l,a)}}(i,o.parent,a)}function Ba(i,o,a,l,h){i.insertBefore(o,a,l,h)}function Pf(i,o,a){i.appendChild(o,a)}function Fg(i,o,a,l,h){null!==l?Ba(i,o,a,l,h):Pf(i,o,a)}function Gu(i,o){return i.parentNode(o)}let $a,qa,Za,Vg=function ja(i,o,a){return 40&i.type?Or(i,a):null};function qu(i,o,a,l){const h=jd(i,l,o),g=o[jt],C=function $d(i,o,a){return Vg(i,o,a)}(l.parent||o[mn],l,o);if(null!=h)if(Array.isArray(a))for(let I=0;I<a.length;I++)Fg(g,h,a[I],C,!1);else Fg(g,h,a,C,!1);void 0!==$a&&$a(g,l,o,a,h)}function dl(i,o){if(null!==o){const a=o.type;if(3&a)return Or(o,i);if(4&a)return Xo(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return dl(i,l);{const h=i[o.index];return ti(h)?Xo(-1,h):Pn(h)}}if(32&a)return xg(o,i)()||Pn(i[o.index]);{const l=Ug(i,o);return null!==l?Array.isArray(l)?l[0]:dl(Va(i[hr]),l):dl(i,o.next)}}return null}function Ug(i,o){return null!==o?i[hr][mn].projection[o.projection]:null}function Xo(i,o){const a=fr+i+1;if(a<o.length){const l=o[a],h=l[He].firstChild;if(null!==h)return dl(l,h)}return o[Xs]}function Wu(i,o,a,l,h,g,y){for(;null!=a;){const C=l[a.index],I=a.type;if(y&&0===o&&(C&&Er(Pn(C),l),a.flags|=2),32!=(32&a.flags))if(8&I)Wu(i,o,a.child,l,h,g,!1),Jo(o,i,h,C,g);else if(32&I){const A=xg(a,l);let M;for(;M=A();)Jo(o,i,h,M,g);Jo(o,i,h,C,g)}else 16&I?Gd(i,o,l,a,h,g):Jo(o,i,h,C,g);a=y?a.projectionNext:a.next}}function Ha(i,o,a,l,h,g){Wu(a,l,i.firstChild,o,h,g,!1)}function Gd(i,o,a,l,h,g){const y=a[hr],I=y[mn].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Jo(o,i,h,I[A],g);else Wu(i,o,I,y[gn],h,g,!0)}function kf(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function ea(i,o,a){const{mergedAttrs:l,classes:h,styles:g}=a;null!==l&&$i(i,o,l),null!==h&&kf(i,o,h),null!==g&&function hl(i,o,a){i.setAttribute(o,"style",a)}(i,o,g)}function qd(i){qa=i}function Zd(i){return function Fr(){if(void 0===Za&&(Za=null,kt.trustedTypes))try{Za=kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Za}()?.createScriptURL(i)||i}class zi{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${st})`}}function Ls(i){return i instanceof zi?i.changingThisBreaksApplicationSecurity:i}function ra(i,o){const a=function Vf(i){return i instanceof zi&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${st})`)}return a===o}const Ue=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function ay(i){const o=Qd();return o?o.sanitize(_r.URL,i)||"":ra(i,"URL")?Ls(i):function nt(i){return(i=String(i)).match(Ue)?i:"unsafe:"+i}(Ee(i))}function Tw(i){const o=Qd();if(o)return Zd(o.sanitize(_r.RESOURCE_URL,i)||"");if(ra(i,"ResourceURL"))return Zd(Ls(i));throw new he(904,!1)}function Gg(i,o,a){return function xw(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Tw:ay}(o,a)(i)}function Qd(){const i=be();return i&&i[Do]}const jf=new _n("ENVIRONMENT_INITIALIZER"),Rw=new _n("INJECTOR",-1),Ow=new _n("INJECTOR_DEF_TYPES");class Pw{get(o,a=wn){if(a===wn){const l=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw l.name="NullInjectorError",l}return a}}function $f(...i){return{\u0275providers:Hf(0,i),\u0275fromNgModule:!0}}function Hf(i,...o){const a=[],l=new Set;let h;return Ps(o,g=>{const y=g;Zg(y,a,[],l)&&(h||(h=[]),h.push(y))}),void 0!==h&&qg(h,a),a}function qg(i,o){for(let a=0;a<i.length;a++){const{providers:h}=i[a];yl(h,g=>{o.push(g)})}}function Zg(i,o,a,l){if(!(i=q(i)))return!1;let h=null,g=gi(i);const y=!g&&Yt(i);if(g||y){if(y&&!y.standalone)return!1;h=i}else{const I=i.ngModule;if(g=gi(I),!g)return!1;h=I}const C=l.has(h);if(y){if(C)return!1;if(l.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of I)Zg(A,o,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let A;l.add(h);try{Ps(g.imports,M=>{Zg(M,o,a,l)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&qg(A,o)}if(!C){const A=ni(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:Ze},{provide:Ow,useValue:h,multi:!0},{provide:jf,useValue:()=>$e(h),multi:!0})}const I=g.providers;null==I||C||yl(I,M=>{o.push(M)})}}return h!==i&&void 0!==i.providers}function yl(i,o){for(let a of i)we(a)&&(a=a.\u0275providers),Array.isArray(a)?yl(a,o):o(a)}const mb=ne({provide:String,useValue:ne});function Zn(i){return null!==i&&"object"==typeof i&&mb in i}function vl(i){return"function"==typeof i}const Kg=new _n("Set Injector scope."),zf={},Nw={};let Jd;function Gf(){return void 0===Jd&&(Jd=new Pw),Jd}class Mi{}class ly extends Mi{get destroyed(){return this._destroyed}constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fy(o,y=>this.processProvider(y)),this.records.set(Rw,Qu(void 0,this)),h.has("environment")&&this.records.set(Mi,Qu(void 0,this));const g=this.records.get(Kg);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ow.multi,Ze,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=jr(this),l=Rn(void 0);try{return o()}finally{jr(a),Rn(l)}}get(o,a=wn,l=mt.Default){this.assertNotDestroyed(),l=It(l);const h=jr(this),g=Rn(void 0);try{if(!(l&mt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function Jg(i){return"function"==typeof i||"object"==typeof i&&i instanceof _n}(o)&&hn(o);C=I&&this.injectableDefInScope(I)?Qu(Yg(o),zf):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(l&mt.Self?Gf():this.parent).get(o,a=l&mt.Optional&&a===wn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Br]=y[Br]||[]).unshift(ce(o)),h)throw y;return function B(i,o,a,l){const h=i[Br];throw o[es]&&h.unshift(o[es]),i.message=function L(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==an?i.slice(2):i;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let C=o[y];g.push(y+":"+("string"==typeof C?JSON.stringify(C):ce(C)))}h=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(ma,"\n  ")}`}("\n"+i.message,h,a,l),i[Ar]=h,i[Br]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{Rn(g),jr(h)}}resolveInjectorInitializers(){const o=jr(this),a=Rn(void 0);try{const l=this.get(jf.multi,Ze,mt.Self);for(const h of l)h()}finally{jr(o),Rn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(ce(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(o){let a=vl(o=q(o))?o:q(o&&o.provide);const l=function qf(i){return Zn(i)?Qu(void 0,i.useValue):Qu(hy(i),zf)}(o);if(vl(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Qu(void 0,zf,!0),h.factory=()=>Rt(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===zf&&(a.value=Nw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Fw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Yg(i){const o=hn(i),a=null!==o?o.factory:ni(i);if(null!==a)return a;if(i instanceof _n)throw new he(204,!1);if(i instanceof Function)return function dy(i){const o=i.length;if(o>0)throw function ks(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new he(204,!1);const a=function pi(i){const o=i&&(i[Kr]||i[Dn]);return o?(function qs(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),o):null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new he(204,!1)}function hy(i,o,a){let l;if(vl(i)){const h=q(i);return ni(h)||Yg(h)}if(Zn(i))l=()=>q(i.useValue);else if(function kw(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Rt(i.deps||[]));else if(function cy(i){return!(!i||!i.useExisting)}(i))l=()=>$e(q(i.useExisting));else{const h=q(i&&(i.useClass||i.provide));if(!function Qg(i){return!!i.deps}(i))return ni(h)||Yg(h);l=()=>new h(...Rt(i.deps))}return l}function Qu(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function fy(i,o){for(const a of i)Array.isArray(a)?fy(a,o):a&&we(a)?fy(a.\u0275providers,o):o(a)}class Lw{}class Xd{}class gy{resolveComponentFactory(o){throw function Vw(i){const o=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let eh=(()=>{class i{}return i.NULL=new gy,i})();function Xg(){return wl(or(),be())}function wl(i,o){return new th(Or(i,o))}let th=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Xg,i})();function Cl(i){return i instanceof th?i.nativeElement:i}class my{}let Bw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function jw(){const i=be(),a=Xn(or().index,i);return(ei(a)?a:i)[jt]}(),i})(),$w=(()=>{class i{}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:()=>null}),i})();class Zf{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const qi=new Zf("15.2.7"),em={},tm="ngOriginalError";function _y(i){return i[tm]}class Wf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&_y(o);for(;a&&_y(a);)a=_y(a);return a||null}}function kn(i){return i instanceof Function?i():i}function mo(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const g=o.length;if(h+g===l||i.charCodeAt(h+g)<=32)return h}a=h+1}}const rm="ng-template";function it(i,o,a){let l=0,h=!0;for(;l<i.length;){let g=i[l++];if("string"==typeof g&&h){const y=i[l++];if(a&&"class"===g&&-1!==mo(y.toLowerCase(),o,0))return!0}else{if(1===g){for(;l<i.length&&"string"==typeof(g=i[l++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(h=!1)}}return!1}function _t(i){return 4===i.type&&i.value!==rm}function Eb(i,o,a){return o===(4!==i.type||a?i.value:rm)}function Qe(i,o,a){let l=4;const h=i.attrs||[],g=function Ib(i){for(let o=0;o<i.length;o++)if(Lo(i[o]))return o;return i.length}(h);let y=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!Eb(i,I,a)||""===I&&1===o.length){if(X(l))return!1;y=!0}}else{const A=8&l?I:o[++C];if(8&l&&null!==i.attrs){if(!it(i.attrs,A,a)){if(X(l))return!1;y=!0}continue}const N=De(8&l?"class":I,h,_t(i),a);if(-1===N){if(X(l))return!1;y=!0;continue}if(""!==A){let H;H=N>g?"":h[N+1].toLowerCase();const Y=8&l?H:null;if(Y&&-1!==mo(Y,A,0)||2&l&&A!==H){if(X(l))return!1;y=!0}}}}else{if(!y&&!X(l)&&!X(I))return!1;if(y&&X(I))continue;y=!1,l=I|1&l}}return X(l)||y}function X(i){return 0==(1&i)}function De(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let g=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function bb(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function Dr(i,o,a=!1){for(let l=0;l<o.length;l++)if(Qe(i,o[l],a))return!0;return!1}function qw(i,o){return i?":not("+o.trim()+")":o}function Tb(i){let o=i[0],a=1,l=2,h="",g=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const C=i[++a];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!X(y)&&(o+=qw(g,h),h=""),l=y,g=g||!X(l);a++}return""!==h&&(o+=qw(g,h)),o}const $t={};function Ww(i){vy(Qt(),be(),Hr()+i,!1)}function vy(i,o,a,l){if(!l)if(3==(3&o[Ft])){const g=i.preOrderCheckHooks;null!==g&&Qc(o,g,a)}else{const g=i.preOrderHooks;null!==g&&Fo(o,g,0,a)}Aa(a)}function Ge(i,o=null,a=null,l){const h=Kf(i,o,a,l);return h.resolveInjectorInitializers(),h}function Kf(i,o=null,a=null,l,h=new Set){const g=[a||Ze,$f(i)];return l=l||("object"==typeof i?void 0:ce(i)),new ly(g,o||Gf(),l||null,h)}let Ka=(()=>{class i{static create(a,l){if(Array.isArray(a))return Ge({name:""},l,a,"");{const h=a.name??"";return Ge({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=wn,i.NULL=new Pw,i.\u0275prov=Xe({token:i,providedIn:"any",factory:()=>$e(Rw)}),i.__NG_ELEMENT_ID__=-1,i})();function Sl(i,o=mt.Default){const a=be();return null===a?$e(i,o):ss(or(),a,q(i),o)}function yo(){throw new Error("invalid")}function Qf(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const g=a[l+1];if(-1!==g){const y=i.data[g];Mu(a[l]),y.contentQueries(2,o[g],g)}}}function cm(i,o,a,l,h,g,y,C,I,A,M){const N=o.blueprint.slice();return N[mi]=h,N[Ft]=76|l,(null!==M||i&&1024&i[Ft])&&(N[Ft]|=1024),Po(N),N[gn]=N[ya]=i,N[Tn]=a,N[_a]=y||i&&i[_a],N[jt]=C||i&&i[jt],N[Do]=I||i&&i[Do]||null,N[dr]=A||i&&i[dr]||null,N[mn]=g,N[_i]=function Tf(){return Ns++}(),N[kc]=M,N[hr]=2==o.type?i[hr]:N,N}function ah(i,o,a,l,h){let g=i.data[o];if(null===g)g=function Ey(i,o,a,l,h){const g=zc(),y=fd(),I=i.data[o]=function Vb(i,o,a,l,h,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I,I.prev=g)),I}(i,o,a,l,h),function Au(){return St.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=l,g.attrs=h;const y=function ko(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return ri(g,!0),g}function Jf(i,o,a,l){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function Iy(i,o,a){_d(o);try{const l=i.viewQuery;null!==l&&rp(1,l,a);const h=i.template;null!==h&&nC(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Qf(i,o),i.staticViewQueries&&rp(2,i.viewQuery,a);const g=i.components;null!==g&&function Nb(i,o){for(let a=0;a<o.length;a++)tp(i,o[a])}(o,g)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[Ft]&=-5,cf()}}function lm(i,o,a,l){const h=o[Ft];if(128!=(128&h)){_d(o);try{Po(o),function Ta(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&nC(i,o,a,2,l);const y=3==(3&h);if(y){const A=i.preOrderCheckHooks;null!==A&&Qc(o,A,null)}else{const A=i.preOrderHooks;null!==A&&Fo(o,A,0,null),io(o,0)}if(function hm(i){for(let o=Fd(i);null!==o;o=Qo(o)){if(!o[_u])continue;const a=o[Is];for(let l=0;l<a.length;l++){const h=a[l];512&h[Ft]||Hc(h[gn],1),h[Ft]|=512}}}(o),function tc(i){for(let o=Fd(i);null!==o;o=Qo(o))for(let a=fr;a<o.length;a++){const l=o[a],h=l[He];Oo(l)&&lm(h,l,h.template,l[Tn])}}(o),null!==i.contentQueries&&Qf(i,o),y){const A=i.contentCheckHooks;null!==A&&Qc(o,A)}else{const A=i.contentHooks;null!==A&&Fo(o,A,1),io(o,1)}!function eC(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)Aa(~h);else{const g=h,y=a[++l],C=a[++l];md(y,g),C(2,o[g])}}}finally{Aa(-1)}}(i,o);const C=i.components;null!==C&&function tC(i,o){for(let a=0;a<o.length;a++)Rl(i,o[a])}(o,C);const I=i.viewQuery;if(null!==I&&rp(2,I,l),y){const A=i.viewCheckHooks;null!==A&&Qc(o,A)}else{const A=i.viewHooks;null!==A&&Fo(o,A,2),io(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Ft]&=-41,512&o[Ft]&&(o[Ft]&=-513,Hc(o[gn],-1))}finally{cf()}}}function nC(i,o,a,l,h){const g=Hr(),y=2&l;try{Aa(-1),y&&o.length>qt&&vy(i,o,qt,!1),nn(y?2:0,h),a(l,h)}finally{Aa(g),nn(y?3:1,h)}}function by(i,o,a){if(ns(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const y=i.data[g];y.contentQueries&&y.contentQueries(1,a[g],g)}}}function Dy(i,o,a){Du()&&(function sC(i,o,a,l){const h=a.directiveStart,g=a.directiveEnd;yu(a)&&function Ml(i,o,a){const l=Or(o,i),h=rC(a),g=i[_a],y=np(i,cm(i,h,null,a.onPush?32:16,l,o,g,g.createRenderer(l,a),null,null,null));i[o.index]=y}(o,a,i.data[h+a.componentOffset]),i.firstCreatePass||$o(a,o),Er(l,o);const y=a.initialInputs;for(let C=h;C<g;C++){const I=i.data[C],A=ao(o,i,C,a);Er(A,o),null!==y&&ep(0,C-h,A,I,0,y),Rr(I)&&(Xn(a.index,o)[Tn]=ao(o,i,C,a))}}(i,o,a,Or(a,o)),64==(64&a.flags)&&xl(i,o,a))}function Ty(i,o,a=Or){const l=o.localNames;if(null!==l){let h=o.index+1;for(let g=0;g<l.length;g+=2){const y=l[g+1],C=-1===y?a(o,i):i[y];i[h++]=C}}}function rC(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Sy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Sy(i,o,a,l,h,g,y,C,I,A){const M=qt+l,N=M+h,H=function Fb(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:$t);return a}(M,N),Y="function"==typeof A?A():A;return H[He]={type:i,blueprint:H,template:a,queries:null,viewQuery:C,declTNode:o,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function Ay(i,o,a,l){const h=Py(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&ky(i).push(l,h.length-1))}function xy(i,o,a,l){for(let h in i)if(i.hasOwnProperty(h)){a=null===a?{}:a;const g=i[h];null===l?My(a,o,h,g):l.hasOwnProperty(h)&&My(a,o,l[h],g)}return a}function My(i,o,a,l){i.hasOwnProperty(a)?i[a].push(o,l):i[a]=[o,l]}function Wn(i,o,a,l){if(Du()){const h=null===l?null:{"":-1},g=function jb(i,o){const a=i.directiveRegistry;let l=null,h=null;if(a)for(let g=0;g<a.length;g++){const y=a[g];if(Dr(o,y.selectors,!1))if(l||(l=[]),Rr(y))if(null!==y.findHostDirectiveDefs){const C=[];h=h||new Map,y.findHostDirectiveDefs(y,C,h),l.unshift(...C,y),Oy(i,o,C.length)}else l.unshift(y),Oy(i,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,l,h),l.push(y)}return null===l?null:[l,h]}(i,a);let y,C;null===g?y=C=null:[y,C]=g,null!==y&&Xf(i,o,a,y,h,C),h&&function Lr(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new he(-301,!1);l.push(o[h],g)}}}(a,l,h)}a.mergedAttrs=Ss(a.mergedAttrs,a.attrs)}function Xf(i,o,a,l,h,g){for(let A=0;A<l.length;A++)Ho($o(a,o),i,l[A].type);!function ec(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let A=0;A<l.length;A++){const M=l[A];M.providersResolver&&M.providersResolver(M)}let y=!1,C=!1,I=Jf(i,o,l.length,null);for(let A=0;A<l.length;A++){const M=l[A];a.mergedAttrs=Ss(a.mergedAttrs,M.hostAttrs),ar(i,a,o,I,M),$b(I,M,h),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const N=M.type.prototype;!y&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),y=!0),!C&&(N.ngOnChanges||N.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),C=!0),I++}!function Ub(i,o,a){const h=o.directiveEnd,g=i.data,y=o.attrs,C=[];let I=null,A=null;for(let M=o.directiveStart;M<h;M++){const N=g[M],H=a?a.get(N):null,me=H?H.outputs:null;I=xy(N.inputs,M,I,H?H.inputs:null),A=xy(N.outputs,M,A,me);const Le=null===I||null===y||_t(o)?null:Hb(I,M,y);C.push(Le)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=C,o.inputs=I,o.outputs=A}(i,a,g)}function xl(i,o,a){const l=a.directiveStart,h=a.directiveEnd,g=a.index,y=function qc(){return St.lFrame.currentDirectiveIndex}();try{Aa(g);for(let C=l;C<h;C++){const I=i.data[C],A=o[C];xu(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Wi(I,A)}}finally{Aa(-1),xu(y)}}function Wi(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Oy(i,o,a){o.componentOffset=a,(i.components??(i.components=[])).push(o.index)}function $b(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Rr(o)&&(a[""]=i)}}function ar(i,o,a,l,h){i.data[l]=h;const g=h.factory||(h.factory=ni(h.type)),y=new xa(g,Rr(h),Sl);i.blueprint[l]=y,a[l]=y,function ci(i,o,a,l,h){const g=h.hostBindings;if(g){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const C=~o.index;(function In(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=C&&y.push(C),y.push(a,l,g)}}(i,o,l,Jf(i,a,h.hostVars,$t),h)}function Vs(i,o,a,l,h,g){const y=Or(i,o);!function dm(i,o,a,l,h,g,y){if(null==g)i.removeAttribute(o,h,a);else{const C=null==y?Ee(g):y(g,l||"",h);i.setAttribute(o,h,C,a)}}(o[jt],y,g,i.value,a,l,h)}function ep(i,o,a,l,h,g){const y=g[o];if(null!==y){const C=l.setInput;for(let I=0;I<y.length;){const A=y[I++],M=y[I++],N=y[I++];null!==C?l.setInput(a,N,A,M):a[M]=N}}}function Hb(i,o,a){let l=null,h=0;for(;h<a.length;){const g=a[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(i.hasOwnProperty(g)){null===l&&(l=[]);const y=i[g];for(let C=0;C<y.length;C+=2)if(y[C]===o){l.push(g,y[C+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return l}function Ya(i,o,a,l){return[i,!0,!1,o,null,0,l,a,null,null]}function Rl(i,o){const a=Xn(o,i);if(Oo(a)){const l=a[He];48&a[Ft]?lm(l,a,l.template,a[Tn]):a[Vi]>0&&Us(a)}}function Us(i){for(let l=Fd(i);null!==l;l=Qo(l))for(let h=fr;h<l.length;h++){const g=l[h];if(Oo(g))if(512&g[Ft]){const y=g[He];lm(y,g,y.template,g[Tn])}else g[Vi]>0&&Us(g)}const a=i[He].components;if(null!==a)for(let l=0;l<a.length;l++){const h=Xn(a[l],i);Oo(h)&&h[Vi]>0&&Us(h)}}function tp(i,o){const a=Xn(o,i),l=a[He];(function nc(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Iy(l,a,a[Tn])}function np(i,o){return i[To]?i[Qs][Qr]=o:i[To]=o,i[Qs]=o,o}function Qa(i){for(;i;){i[Ft]|=32;const o=Va(i);if(ad(i)&&!o)return i;i=o}return null}function uh(i,o,a,l=!0){const h=o[_a];h.begin&&h.begin();try{lm(i,o,i.template,a)}catch(y){throw l&&lh(o,y),y}finally{h.end&&h.end()}}function rp(i,o,a){Mu(0),o(i,a)}function Py(i){return i[Ys]||(i[Ys]=[])}function ky(i){return i.cleanup||(i.cleanup=[])}function lh(i,o){const a=i[dr],l=a?a.get(Wf,null):null;l&&l.handleError(o)}function pm(i,o,a,l,h){for(let g=0;g<a.length;){const y=a[g++],C=a[g++],I=o[y],A=i.data[y];null!==A.setInput?A.setInput(I,h,l,C):I[C]=h}}function Ja(i,o,a){const l=Bi(o,i);!function Vd(i,o,a){i.setValue(o,a)}(i[jt],l,a)}function gm(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?g=C:1==g?h=ae(h,C):2==g&&(l=ae(l,C+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}function sp(i,o,a,l,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(Pn(g)),ti(g))for(let C=fr;C<g.length;C++){const I=g[C],A=I[He].firstChild;null!==A&&sp(I[He],I,A,l)}const y=a.type;if(8&y)sp(i,o,a.child,l);else if(32&y){const C=xg(a,o);let I;for(;I=C();)l.push(I)}else if(16&y){const C=Ug(o,a);if(Array.isArray(C))l.push(...C);else{const I=Va(o[hr]);sp(I[He],I,C,l,!0)}}a=h?a.projectionNext:a.next}return l}class dh{get rootNodes(){const o=this._lView,a=o[He];return sp(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tn]}set context(o){this._lView[Tn]=o}get destroyed(){return 128==(128&this._lView[Ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[gn];if(ti(o)){const a=o[Xr],l=a?a.indexOf(this):-1;l>-1&&(cl(o,l),Na(a,l))}this._attachedToViewContainer=!1}Ud(this._lView[He],this._lView)}onDestroy(o){Ay(this._lView[He],this._lView,null,o)}markForCheck(){Qa(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ft]&=-65}reattach(){this._lView[Ft]|=64}detectChanges(){uh(this._lView[He],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pg(i,o){Ha(i,o,o[jt],2,null,null)}(this._lView[He],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=o}}class zr extends dh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;uh(o[He],o,o[Tn],!1)}checkNoChanges(){}get context(){return null}}class Ny extends eh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Yt(o);return new hh(a,this.ngModule)}}function Nn(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class oC{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=It(l);const h=this.injector.get(o,em,l);return h!==em||a===em?h:this.parentInjector.get(o,a,l)}}class hh extends Xd{get inputs(){return Nn(this.componentDef.inputs)}get outputs(){return Nn(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Zw(i){return i.map(Tb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,h){let g=(h=h||this.ngModule)instanceof Mi?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new oC(o,g):o,C=y.get(my,null);if(null===C)throw new he(407,!1);const I=y.get($w,null),A=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",N=l?function Lb(i,o,a){return i.selectRootElement(o,a===Q.ShadowDom)}(A,l,this.componentDef.encapsulation):Hu(A,M,function rc(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),H=this.componentDef.onPush?288:272,Y=Sy(0,null,null,1,0,null,null,null,null,null),me=cm(null,Y,null,H,null,null,C,A,I,y,null);let Le,We;_d(me);try{const ot=this.componentDef;let xt,Re=null;ot.findHostDirectiveDefs?(xt=[],Re=new Map,ot.findHostDirectiveDefs(ot,xt,Re),xt.push(ot)):xt=[ot];const Vt=function aC(i,o){const a=i[He],l=qt;return i[l]=o,ah(a,l,2,"#host",null)}(me,N),Hn=function tn(i,o,a,l,h,g,y,C){const I=h[He];!function vn(i,o,a,l){for(const h of i)o.mergedAttrs=Ss(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(gm(o,o.mergedAttrs,!0),null!==a&&ea(l,a,o))}(l,i,o,y);const A=g.createRenderer(o,a),M=cm(h,rC(a),null,a.onPush?32:16,h[i.index],i,g,A,C||null,null,null);return I.firstCreatePass&&Oy(I,i,l.length-1),np(h,M),h[i.index]=M}(Vt,N,ot,xt,me,C,A);We=jc(Y,qt),N&&function Fy(i,o,a,l){if(l)$i(i,a,["ng-version",qi.full]);else{const{attrs:h,classes:g}=function Sb(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let g=i[l];if("string"==typeof g)2===h?""!==g&&o.push(g,i[++l]):8===h&&a.push(g);else{if(!X(h))break;h=g}l++}return{attrs:o,classes:a}}(o.selectors[0]);h&&$i(i,a,h),g&&g.length>0&&kf(i,a,g.join(" "))}}(A,ot,N,l),void 0!==a&&function Ly(i,o,a){const l=i.projection=[];for(let h=0;h<o.length;h++){const g=a[h];l.push(null!=g?Array.from(g):null)}}(We,this.ngContentSelectors,a),Le=function ph(i,o,a,l,h,g){const y=or(),C=h[He],I=Or(y,h);Xf(C,h,y,a,null,l);for(let M=0;M<a.length;M++)Er(ao(h,C,y.directiveStart+M,y),h);xl(C,h,y),I&&Er(I,h);const A=ao(h,C,y.directiveStart+y.componentOffset,y);if(i[Tn]=h[Tn]=A,null!==g)for(const M of g)M(A,o);return by(C,y,i),A}(Hn,ot,xt,Re,me,[uC]),Iy(Y,me,null)}finally{cf()}return new fh(this.componentType,Le,wl(We,me),me,We)}}class fh extends Lw{constructor(o,a,l,h,g){super(),this.location=l,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new zr(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const g=this._rootLView;pm(g[He],g,h,o,a),Qa(Xn(this._tNode.index,g))}}get injector(){return new Pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function uC(){const i=or();Yc(be()[He],i)}function _m(i){let o=function mm(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if(Rr(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new he(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const y=i;y.inputs=ym(i.inputs),y.declaredInputs=ym(i.declaredInputs),y.outputs=ym(i.outputs);const C=h.hostBindings;C&&qb(i,C);const I=h.viewQuery,A=h.contentQueries;if(I&&zb(i,I),A&&Gb(i,A),de(i.inputs,h.inputs),de(i.declaredInputs,h.declaredInputs),de(i.outputs,h.outputs),Rr(h)&&h.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const C=g[y];C&&C.ngInherit&&C(i),C===_m&&(a=!1)}}o=Object.getPrototypeOf(o)}!function cC(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Ss(h.hostAttrs,a=Ss(a,h.hostAttrs))}}(l)}function ym(i){return i===et?{}:i===Ze?[]:i}function zb(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function Gb(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,g)=>{o(l,h,g),a(l,h,g)}:o}function qb(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}function Ol(i){return!!vo(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function vo(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Oi(i,o,a){return i[o]=a}function Gr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function oa(i,o,a,l){const h=Gr(i,o,a);return Gr(i,o+1,l)||h}function li(i,o,a,l){const h=be();return Gr(h,Sa(),o)&&(Qt(),Vs(Cn(),h,i,o,a,l)),li}function Xa(i,o,a,l){return Gr(i,Sa(),a)?o+Ee(a)+l:$t}function aa(i,o,a,l,h,g){const C=oa(i,function ii(){return St.lFrame.bindingIndex}(),a,h);return vi(2),C?o+Ee(a)+l+Ee(h)+g:$t}function Ht(i,o,a,l,h,g,y,C){const I=be(),A=Qt(),M=i+qt,N=A.firstCreatePass?function Yb(i,o,a,l,h,g,y,C,I){const A=o.consts,M=ah(o,i,4,y||null,is(A,C));Wn(o,a,M,is(A,I)),Yc(o,M);const N=M.tView=Sy(2,M,l,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),N.queries=o.queries.embeddedTView(M)),M}(M,A,I,o,a,l,h,g,y):A.data[M];ri(N,!1);const H=I[jt].createComment("");qu(A,I,H,N),Er(H,I),np(I,I[M]=Ya(H,I,H,N)),Ao(N)&&Dy(A,I,N),null!=y&&Ty(I,N,C)}function wm(i,o,a){const l=be();return Gr(l,Sa(),o)&&function pn(i,o,a,l,h,g,y,C){const I=Or(o,a);let M,A=o.inputs;!C&&null!=A&&(M=A[l])?(pm(i,a,M,l,h),yu(o)&&function iC(i,o){const a=Xn(o,i);16&a[Ft]||(a[Ft]|=32)}(a,o.index)):3&o.type&&(l=function Ry(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=y?y(h,o.value||"",l):h,g.setProperty(I,l,h))}(Qt(),Cn(),l,i,o,l[jt],a,!1),wm}function Cm(i,o,a,l,h){const y=h?"class":"style";pm(i,a,o.inputs[y],y,l)}function Fl(i,o,a,l){const h=be(),g=Qt(),y=qt+i,C=h[jt],I=g.firstCreatePass?function yC(i,o,a,l,h,g){const y=o.consts,I=ah(o,i,2,l,is(y,h));return Wn(o,a,I,is(y,g)),null!==I.attrs&&gm(I,I.attrs,!1),null!==I.mergedAttrs&&gm(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(y,g,h,o,a,l):g.data[y],A=h[y]=Hu(C,o,function yg(){return St.lFrame.currentNamespace}()),M=Ao(I);return ri(I,!0),ea(C,A,I),32!=(32&I.flags)&&qu(g,h,A,I),0===function hd(){return St.lFrame.elementDepthCount}()&&Er(A,h),function Da(){St.lFrame.elementDepthCount++}(),M&&(Dy(g,h,I),by(g,I,h)),null!==l&&Ty(h,I),Fl}function Em(){let i=or();fd()?function No(){St.lFrame.isParent=!1}():(i=i.parent,ri(i,!1));const o=i;!function sf(){St.lFrame.elementDepthCount--}();const a=Qt();return a.firstCreatePass&&(Yc(a,i),ns(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Cg(i){return 0!=(8&i.flags)}(o)&&Cm(a,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ci(i){return 0!=(16&i.flags)}(o)&&Cm(a,o,be(),o.stylesWithoutHost,!1),Em}function Hy(i,o,a,l){return Fl(i,o,a,l),Em(),Hy}function ac(){return be()}function Im(i){return!!i&&"function"==typeof i.then}function Ll(i){return!!i&&"function"==typeof i.subscribe}const Gy=Ll;function bm(i,o,a,l){const h=be(),g=Qt(),y=or();return function wC(i,o,a,l,h,g,y){const C=Ao(l),A=i.firstCreatePass&&ky(i),M=o[Tn],N=Py(o);let H=!0;if(3&l.type||y){const Le=Or(l,o),We=y?y(Le):Le,ot=N.length,xt=y?Vt=>y(Pn(Vt[l.index])):l.index;let Re=null;if(!y&&C&&(Re=function Jb(i,o,a,l){const h=i.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===a&&h[g+1]===l){const C=o[Ys],I=h[g+2];return C.length>I?C[I]:null}"string"==typeof y&&(g+=2)}return null}(i,o,h,l.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=g,Re.__ngLastListenerFn__=g,H=!1;else{g=op(l,o,M,g,!1);const Vt=a.listen(We,h,g);N.push(g,Vt),A&&A.push(h,xt,ot,ot+1)}}else g=op(l,o,M,g,!1);const Y=l.outputs;let me;if(H&&null!==Y&&(me=Y[h])){const Le=me.length;if(Le)for(let We=0;We<Le;We+=2){const Hn=o[me[We]][me[We+1]].subscribe(g),zn=N.length;N.push(g,Hn),A&&A.push(h,l.index,zn,-(zn+1))}}}(g,h,h[jt],y,i,o,l),bm}function jn(i,o,a,l){try{return nn(6,o,a),!1!==a(l)}catch(h){return lh(i,h),!1}finally{nn(7,o,a)}}function op(i,o,a,l,h){return function g(y){if(y===Function)return l;Qa(i.componentOffset>-1?Xn(i.index,o):o);let I=jn(o,a,l,y),A=g.__ngNextListenerFn__;for(;A;)I=jn(o,a,A,y)&&I,A=A.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function ap(i=1){return function yd(i){return(St.lFrame.contextLView=function mg(i,o){for(;i>0;)o=o[ya],i--;return o}(i,St.lFrame.contextLView))[Tn]}(i)}function Ih(i,o){return i<<17|o<<2}function la(i){return i>>17&32767}function Yy(i){return 2|i}function Bl(i){return(131068&i)>>2}function ur(i,o){return-131069&i|o<<2}function Am(i){return 1|i}function bh(i,o,a,l,h){const g=i[a+1],y=null===o;let C=l?la(g):Bl(g),I=!1;for(;0!==C&&(!1===I||y);){const M=i[C+1];Mm(i[C],o)&&(I=!0,i[C+1]=l?Am(M):Yy(M)),C=l?la(M):Bl(M)}I&&(i[a+1]=l?Yy(g):Am(g))}function Mm(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&os(i,o)>=0}const Tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qy(i){return i.substring(Tr.key,Tr.keyEnd)}function Jy(i,o){const a=Tr.textEnd;return a===o?-1:(o=Tr.keyEnd=function rD(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,Tr.key=o,a),Dh(i,o,a))}function Dh(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function jl(i,o){return function Bs(i,o,a,l){const h=be(),g=Qt(),y=vi(2);g.firstUpdatePass&&MC(g,i,y,l),o!==$t&&Gr(h,y,o)&&kC(g,g.data[Hr()],h,h[jt],i,h[y+1]=function uc(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ce(Ls(i)))),i}(o,a),l,y)}(i,o,null,!0),jl}function Ki(i,o){for(let a=function nD(i){return function SC(i){Tr.key=0,Tr.keyEnd=0,Tr.value=0,Tr.valueEnd=0,Tr.textEnd=i.length}(i),Jy(i,Dh(i,0,Tr.textEnd))}(o);a>=0;a=Jy(o,a))un(i,Qy(o),!0)}function js(i,o,a,l){const h=Qt(),g=vi(2);h.firstUpdatePass&&MC(h,null,g,l);const y=be();if(a!==$t&&Gr(y,g,a)){const C=h.data[Hr()];if(Hl(C,l)&&!nv(h,g)){let I=l?C.classesWithoutHost:C.stylesWithoutHost;null!==I&&(a=ae(I,a||"")),Cm(h,C,y,a,l)}else!function PC(i,o,a,l,h,g,y,C){h===$t&&(h=Ze);let I=0,A=0,M=0<h.length?h[0]:null,N=0<g.length?g[0]:null;for(;null!==M||null!==N;){const H=I<h.length?h[I+1]:void 0,Y=A<g.length?g[A+1]:void 0;let Le,me=null;M===N?(I+=2,A+=2,H!==Y&&(me=N,Le=Y)):null===N||null!==M&&M<N?(I+=2,me=M):(A+=2,me=N,Le=Y),null!==me&&kC(i,o,a,l,me,Le,y,C),M=I<h.length?h[I]:null,N=A<g.length?g[A]:null}}(h,C,y,y[jt],y[g+1],y[g+1]=function RC(i,o,a){if(null==a||""===a)return Ze;const l=[],h=Ls(a);if(Array.isArray(h))for(let g=0;g<h.length;g++)i(l,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&i(l,g,h[g]);else"string"==typeof h&&o(l,h);return l}(i,o,a),l,g)}}function nv(i,o){return o>=i.expandoStartIndex}function MC(i,o,a,l){const h=i.data;if(null===h[a+1]){const g=h[Hr()],y=nv(i,a);Hl(g,l)&&null===o&&!y&&(o=!1),o=function sD(i,o,a,l){const h=function ro(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let g=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=$l(a=Rm(null,i,o,a,l),o.attrs,l),g=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=Rm(h,i,o,a,l),null===g){let I=function lp(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Bl(l))return i[la(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=Rm(null,i,o,I[1],l),I=$l(I,o.attrs,l),function rv(i,o,a,l){i[la(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else g=function oD(i,o,a){let l;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)l=$l(l,i[g].hostAttrs,a);return $l(l,o.attrs,a)}(i,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,l),function xm(i,o,a,l,h,g){let y=g?o.classBindings:o.styleBindings,C=la(y),I=Bl(y);i[l]=a;let M,A=!1;if(Array.isArray(a)?(M=a[1],(null===M||os(a,M)>0)&&(A=!0)):M=a,h)if(0!==I){const H=la(i[C+1]);i[l+1]=Ih(H,C),0!==H&&(i[H+1]=ur(i[H+1],l)),i[C+1]=function Ky(i,o){return 131071&i|o<<17}(i[C+1],l)}else i[l+1]=Ih(C,0),0!==C&&(i[C+1]=ur(i[C+1],l)),C=l;else i[l+1]=Ih(I,0),0===C?C=l:i[I+1]=ur(i[I+1],l),I=l;A&&(i[l+1]=Yy(i[l+1])),bh(i,M,l,!0),bh(i,M,l,!1),function cp(i,o,a,l,h){const g=h?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof o&&os(g,o)>=0&&(a[l+1]=Am(a[l+1]))}(o,M,i,l,g),y=Ih(C,I),g?o.classBindings=y:o.styleBindings=y}(h,g,o,a,y,l)}}function Rm(i,o,a,l,h){let g=null;const y=a.directiveEnd;let C=a.directiveStylingLast;for(-1===C?C=a.directiveStart:C++;C<y&&(g=o[C],l=$l(l,g.hostAttrs,h),g!==i);)C++;return null!==i&&(a.directiveStylingLast=C),l}function $l(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?h=y:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),un(i,y,!!a||o[++g]))}return void 0===i?null:i}function kC(i,o,a,l,h,g,y,C){if(!(3&o.type))return;const I=i.data,A=I[C+1],M=function on(i){return 1==(1&i)}(A)?NC(I,o,a,h,Bl(A),y):void 0;Om(M)||(Om(g)||function eD(i){return 2==(2&i)}(A)&&(g=NC(I,null,a,h,C,y)),function Ir(i,o,a,l,h){if(o)h?i.addClass(a,l):i.removeClass(a,l);else{let g=-1===l.indexOf("-")?void 0:An.DashCase;null==h?i.removeStyle(a,l,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=An.Important),i.setStyle(a,l,h,g))}}(l,y,Bi(Hr(),a),h,g))}function NC(i,o,a,l,h,g){const y=null===o;let C;for(;h>0;){const I=i[h],A=Array.isArray(I),M=A?I[1]:I,N=null===M;let H=a[h+1];H===$t&&(H=N?Ze:void 0);let Y=N?Lu(H,l):M===l?H:void 0;if(A&&!Om(Y)&&(Y=Lu(I,l)),Om(Y)&&(C=Y,y))return C;const me=i[h+1];h=y?la(me):Bl(me)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(C=Lu(I,l))}return C}function Om(i){return void 0!==i}function Hl(i,o){return 0!=(i.flags&(o?8:16))}function iv(i,o=""){const a=be(),l=Qt(),h=i+qt,g=l.firstCreatePass?ah(l,h,1,o,null):l.data[h],y=a[h]=function Ua(i,o){return i.createText(o)}(a[jt],o);qu(l,a,y,g),ri(g,!1)}function sv(i){return dp("",i,""),sv}function dp(i,o,a){const l=be(),h=Xa(l,i,o,a);return h!==$t&&Ja(l,Hr(),h),dp}function da(i,o,a,l,h){const g=be(),y=aa(g,i,o,a,l,h);return y!==$t&&Ja(g,Hr(),y),da}function Sh(i,o,a){js(un,Ki,Xa(be(),i,o,a),!0)}function uv(i,o,a,l,h){js(un,Ki,aa(be(),i,o,a,l,h),!0)}const fc=void 0;var hD=["en",[["a","p"],["AM","PM"],fc],[["AM","PM"],fc,fc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fc,"{1} 'at' {0}",fc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Vm(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let pc={};function gv(i){const o=function zC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=gp(o);if(a)return a;const l=o.split("-")[0];if(a=gp(l),a)return a;if("en"===l)return hD;throw new he(701,!1)}function Ah(i){return gv(i)[bt.PluralCase]}function gp(i){return i in pc||(pc[i]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[i]),pc[i]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const ru="en-US";let gc=ru;function Km(i,o,a,l,h){if(i=q(i),Array.isArray(i))for(let g=0;g<i.length;g++)Km(i[g],o,a,l,h);else{const g=Qt(),y=be();let C=vl(i)?i:q(i.provide),I=hy(i);const A=or(),M=1048575&A.providerIndexes,N=A.directiveStart,H=A.providerIndexes>>20;if(vl(i)||!i.multi){const Y=new xa(I,h,Sl),me=Pv(C,o,h?M:M+H,N);-1===me?(Ho($o(A,y),g,C),Ov(g,i,o.length),o.push(C),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(Y),y.push(Y)):(a[me]=Y,y[me]=Y)}else{const Y=Pv(C,o,M+H,N),me=Pv(C,o,M,M+H),We=me>=0&&a[me];if(h&&!We||!h&&!(Y>=0&&a[Y])){Ho($o(A,y),g,C);const ot=function MD(i,o,a,l,h){const g=new xa(i,a,Sl);return g.multi=[],g.index=o,g.componentProviders=0,gE(g,h,l&&!a),g}(h?kv:xD,a.length,h,l,I);!h&&We&&(a[me].providerFactory=ot),Ov(g,i,o.length,0),o.push(C),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(ot),y.push(ot)}else Ov(g,i,Y>-1?Y:me,gE(a[h?me:Y],I,!h&&l));!h&&l&&We&&a[me].componentProviders++}}}function Ov(i,o,a,l){const h=vl(o),g=function _b(i){return!!i.useClass}(o);if(h||g){const I=(g?q(o.useClass):o).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const M=A.indexOf(a);-1===M?A.push(a,[l,I]):A[M+1].push(l,I)}else A.push(a,I)}}}function gE(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Pv(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function xD(i,o,a,l){return Nv(this.multi,[])}function kv(i,o,a,l){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=ao(a,a[He],this.providerFactory.index,l);g=C.slice(0,y),Nv(h,g);for(let I=y;I<C.length;I++)g.push(C[I])}else g=[],Nv(h,g);return g}function Nv(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Nh(i,o=[]){return a=>{a.providersResolver=(l,h)=>function Rv(i,o,a){const l=Qt();if(l.firstCreatePass){const h=Rr(i);Km(a,l.data,l.blueprint,h,!0),Km(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class yc{}class Zl{}function Fv(i,o){return new Fh(i,o??null)}class Fh extends yc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ny(this);const l=sr(o);this._bootstrapComponents=kn(l.bootstrap),this._r3Injector=Kf(o,a,[{provide:yc,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],ce(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class bp extends Zl{constructor(o){super(),this.moduleType=o}create(o){return new Fh(this.moduleType,o)}}class mE extends yc{constructor(o,a,l){super(),this.componentFactoryResolver=new Ny(this),this.instance=null;const h=new ly([...o,{provide:yc,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],a||Gf(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Dp(i,o,a=null){return new mE(i,o,a).injector}let Vv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=Hf(0,a.type),h=l.length>0?Dp([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Xe({token:i,providedIn:"environment",factory:()=>new i($e(Mi))}),i})();function ha(i){i.getStandaloneInjector=o=>o.get(Vv).getOrCreateStandaloneInjector(i)}function t_(i,o,a){const l=Un()+i,h=be();return h[l]===$t?Oi(h,l,a?o.call(a):o()):function _h(i,o){return i[o]}(h,l)}function wE(i,o,a,l){return Kl(be(),Un(),i,o,a,l)}function n_(i,o,a,l,h){return function su(i,o,a,l,h,g,y){const C=o+a;return oa(i,C,h,g)?Oi(i,C+2,y?l.call(y,h,g):l(h,g)):Wl(i,C+2)}(be(),Un(),i,o,a,l,h)}function CE(i,o,a,l,h,g){return function r_(i,o,a,l,h,g,y,C){const I=o+a;return function yh(i,o,a,l,h){const g=oa(i,o,a,l);return Gr(i,o+2,h)||g}(i,I,h,g,y)?Oi(i,I+3,C?l.call(C,h,g,y):l(h,g,y)):Wl(i,I+3)}(be(),Un(),i,o,a,l,h,g)}function Wl(i,o){const a=i[o];return a===$t?void 0:a}function Kl(i,o,a,l,h,g){const y=o+a;return Gr(i,y,h)?Oi(i,y+1,g?l.call(g,h):l(h)):Wl(i,y+1)}function qv(i,o){const a=Qt();let l;const h=i+qt;a.firstCreatePass?(l=function Lh(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks??(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const g=l.factory||(l.factory=ni(l.type)),y=Rn(Sl);try{const C=Bo(!1),I=g();return Bo(C),function Qb(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,be(),h,I),I}finally{Rn(y)}}function IE(i,o,a){const l=i+qt,h=be(),g=function ji(i,o){return i[o]}(h,l);return function Sp(i,o){return i[He].data[o].pure}(h,l)?Kl(h,Un(),o,g.transform,a,g):g.transform(a)}function Ap(i){return o=>{setTimeout(i,void 0,o)}}const $s=class LD extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,g=a||(()=>null),y=l;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),g=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(g=Ap(g),h&&(h=Ap(h)),y&&(y=Ap(y)));const C=super.subscribe({next:h,error:g,complete:y});return o instanceof K.w0&&o.add(C),C}};function VD(){return this._results[Symbol.iterator]()}class i_{get changes(){return this._changes||(this._changes=new $s)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=i_.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=VD)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=function oi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function lo(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],g=o[l];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xp=(()=>{class i{}return i.__NG_ELEMENT_ID__=TE,i})();const bE=xp,DE=class extends bE{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tView,h=cm(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[So]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[Jr];return null!==y&&(h[Jr]=y.createEmbeddedView(l)),Iy(l,h,o),new dh(h)}};function TE(){return Mp(or(),be())}function Mp(i,o){return 4&i.type?new DE(o,i,wl(i,o)):null}let s_=(()=>{class i{}return i.__NG_ELEMENT_ID__=UD,i})();function UD(){return a_(or(),be())}const BD=s_,SE=class extends BD{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return wl(this._hostTNode,this._hostLView)}get injector(){return new Pr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ms(this._hostTNode,this._hostLView);if(el(o)){const a=Uo(o,this._hostLView),l=Vo(o);return new Pr(a[He].data[l+8],a)}return new Pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=o_(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(o,a,l){let h,g;"number"==typeof l?h=l:null!=l&&(h=l.index,g=l.injector);const y=o.createEmbeddedView(a||{},g);return this.insert(y,h),y}createComponent(o,a,l,h,g){const y=o&&!function xi(i){return"function"==typeof i}(o);let C;if(y)C=a;else{const N=a||{};C=N.index,l=N.injector,h=N.projectableNodes,g=N.environmentInjector||N.ngModuleRef}const I=y?o:new hh(Yt(o)),A=l||this.parentInjector;if(!g&&null==I.ngModule){const H=(y?A:this.parentInjector).get(Mi,null);H&&(g=H)}const M=I.create(A,h,void 0,g);return this.insert(M.hostView,C),M}insert(o,a){const l=o._lView,h=l[He];if(function ba(i){return ti(i[gn])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const N=l[gn],H=new SE(N,N[mn],N[gn]);H.detach(H.indexOf(o))}}const g=this._adjustIndex(a),y=this._lContainer;!function kg(i,o,a,l){const h=fr+l,g=a.length;l>0&&(a[h-1][Qr]=o),l<g-fr?(o[Qr]=a[h],rl(a,fr+l,o)):(a.push(o),o[Qr]=null),o[gn]=a;const y=o[So];null!==y&&a!==y&&function Ng(i,o){const a=i[Is];o[hr]!==o[gn][gn][hr]&&(i[_u]=!0),null===a?i[Is]=[o]:a.push(o)}(y,o);const C=o[Jr];null!==C&&C.insertView(i),o[Ft]|=64}(h,l,y,g);const C=Xo(g,y),I=l[jt],A=Gu(I,y[Xs]);return null!==A&&function Og(i,o,a,l,h,g){l[mi]=h,l[mn]=o,Ha(i,l,a,1,h,g)}(h,y[mn],I,l,A,C),o.attachToViewContainerRef(),rl(Rp(y),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=o_(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=cl(this._lContainer,a);l&&(Na(Rp(this._lContainer),a),Ud(l[He],l))}detach(o){const a=this._adjustIndex(o,-1),l=cl(this._lContainer,a);return l&&null!=Na(Rp(this._lContainer),a)?new dh(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function o_(i){return i[Xr]}function Rp(i){return i[Xr]||(i[Xr]=[])}function a_(i,o){let a;const l=o[i.index];if(ti(l))a=l;else{let h;if(8&i.type)h=Pn(l);else{const g=o[jt];h=g.createComment("");const y=Or(i,o);Ba(g,Gu(g,y),h,function ry(i,o){return i.nextSibling(o)}(g,y),!1)}o[i.index]=a=Ya(l,o,h,i),np(o,a)}return new SE(a,i,o)}class Qv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Qv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Op{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<l;g++){const y=a.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new Op(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==h_(o,a).matches&&this.queries[a].setDirty()}}class AE{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Pp{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,h);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Pp(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class u_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new u_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const g=l[h];this.matchTNodeWithReadOption(o,a,Jv(a,g)),this.matchTNodeWithReadOption(o,a,Pu(a,o,g,!1,!1))}else l===xp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Pu(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===th||h===s_||h===xp&&4&a.type)this.addMatch(a.index,-2);else{const g=Pu(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Jv(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function jD(i,o,a,l){return-1===a?function xE(i,o){return 11&i.type?wl(i,o):4&i.type?Mp(i,o):null}(o,i):-2===a?function Xv(i,o,a){return a===th?wl(o,i):a===xp?Mp(o,i):a===s_?a_(o,i):void 0}(i,o,l):ao(i,i[He],a,o)}function ME(i,o,a,l){const h=o[Jr].queries[l];if(null===h.matches){const g=i.data,y=a.matches,C=[];for(let I=0;I<y.length;I+=2){const A=y[I];C.push(A<0?null:jD(o,g[A],y[I+1],a.metadata.read))}h.matches=C}return h.matches}function kp(i,o,a,l){const h=i.queries.getByIndex(a),g=h.matches;if(null!==g){const y=ME(i,o,h,a);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)l.push(y[C/2]);else{const A=g[C+1],M=o[-I];for(let N=fr;N<M.length;N++){const H=M[N];H[So]===H[gn]&&kp(H[He],H,A,l)}if(null!==M[Is]){const N=M[Is];for(let H=0;H<N.length;H++){const Y=N[H];kp(Y[He],Y,A,l)}}}}}return l}function RE(i){const o=be(),a=Qt(),l=Zc();Mu(l+1);const h=h_(a,l);if(i.dirty&&function $c(i){return 4==(4&i[Ft])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const g=h.crossesNgTemplate?kp(a,o,l,[]):ME(a,o,h,l);i.reset(g,Cl),i.notifyOnChanges()}return!0}return!1}function c_(i,o,a){const l=Qt();l.firstCreatePass&&(Jl(l,new AE(i,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),d_(l,be(),o)}function OE(i,o,a,l){const h=Qt();if(h.firstCreatePass){const g=or();Jl(h,new AE(o,a,l),g.index),function PE(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}d_(h,be(),a)}function l_(){return function e0(i,o){return i[Jr].queries[o].queryList}(be(),Zc())}function d_(i,o,a){const l=new i_(4==(4&a));Ay(i,o,l,l.destroy),null===o[Jr]&&(o[Jr]=new Op),o[Jr].queries.push(new Qv(l))}function Jl(i,o,a){null===i.queries&&(i.queries=new Pp),i.queries.track(new u_(o,a))}function h_(i,o){return i.queries.getByIndex(o)}function Np(i){return!!sr(i)}function w_(...i){}const C_=new _n("Application Initializer");let Bp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=w_,this.reject=w_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Im(g))a.push(g);else if(Gy(g)){const y=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)($e(C_,8))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const y0=new _n("AppId",{providedIn:"root",factory:function v0(){return`${Wt()}${Wt()}${Wt()}`}});function Wt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const C0=new _n("Platform Initializer"),GE=new _n("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let $n=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const hs=new _n("LocaleId",{providedIn:"root",factory:()=>rt(hs,mt.Optional|mt.SkipSelf)||function hi(){return typeof $localize<"u"&&$localize.locale||ru}()}),qE=new _n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class I0{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let XD=(()=>{class i{compileModuleSync(a){return new bp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=kn(sr(a).declarations).reduce((y,C)=>{const I=Yt(C);return I&&y.push(new hh(I)),y},[]);return new I0(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ZE=(()=>Promise.resolve(0))();function D0(i){typeof Zone>"u"?ZE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Hs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $s(!1),this.onMicrotaskEmpty=new $s(!1),this.onStable=new $s(!1),this.onError=new $s(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function nT(){let i=kt.requestAnimationFrame,o=kt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function EA(i){const o=()=>{!function sT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,S0(i),i.isCheckStableRunning=!0,T0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),S0(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,g,y,C)=>{try{return WE(i),a.invokeTask(h,g,y,C)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&o(),A0(i)}},onInvoke:(a,l,h,g,y,C,I)=>{try{return WE(i),a.invoke(h,g,y,C,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),A0(i)}},onHasTask:(a,l,h,g)=>{a.hasTask(h,g),l===h&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,S0(i),T0(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,h,g)=>(a.handleError(h,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hs.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(Hs.isInAngularZone())throw new he(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,o,iT,w_,w_);try{return g.runTask(y,a,l)}finally{g.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const iT={};function T0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function S0(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function WE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function A0(i){i._nesting--,T0(i)}class jp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $s,this.onMicrotaskEmpty=new $s,this.onStable=new $s,this.onError=new $s}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const KE=new _n(""),Eo=new _n("");let Bh,au=(()=>{class i{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Bh||(function Xl(i){Bh=i}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hs.assertNotInAngularZone(),D0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())D0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)($e(Hs),$e(oT),$e(Eo))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac}),i})(),oT=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Bh?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const uu=!1;let wc=null;const x0=new _n("AllowMultipleToken"),I_=new _n("PlatformDestroyListeners"),$p=new _n("appBootstrapListener");class Hp{constructor(o,a){this.name=o,this.token=a}}function JE(i,o,a=[]){const l=`Platform: ${o}`,h=new _n(l);return(g=[])=>{let y=cu();if(!y||y.injector.get(x0,!1)){const C=[...a,...g,{provide:h,useValue:!0}];i?i(C):function YE(i){if(wc&&!wc.get(x0,!1))throw new he(400,!1);wc=i;const o=i.get(O0);(function QE(i){const o=i.get(C0,null);o&&o.forEach(a=>a())})(i)}(function D_(i=[],o){return Ka.create({name:o,providers:[{provide:Kg,useValue:"platform"},{provide:I_,useValue:new Set([()=>wc=null])},...i]})}(C,l))}return function R0(i){const o=cu();if(!o)throw new he(401,!1);return o}()}}function cu(){return wc?.get(O0)??null}let O0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function T_(i,o){let a;return a="noop"===i?new jp:("zone.js"===i?void 0:i)||new Hs(o),a}(l?.ngZone,function P0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:Hs,useValue:h}];return h.run(()=>{const y=Ka.create({providers:g,parent:this.injector,name:a.moduleType.name}),C=a.create(y),I=C.injector.get(Wf,null);if(!I)throw new he(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:M=>{I.handleError(M)}});C.onDestroy(()=>{td(this._modules,C),A.unsubscribe()})}),function $h(i,o,a){try{const l=a();return Im(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(I,h,()=>{const A=C.injector.get(Bp);return A.runInitializers(),A.donePromise.then(()=>(function qC(i){Je(i,"Expected localeId to be defined"),"string"==typeof i&&(gc=i.toLowerCase().replace(/_/g,"-"))}(C.injector.get(hs,ru)||ru),this._moduleDoBootstrap(C),C))})})}bootstrapModule(a,l=[]){const h=XE({},l);return function aT(i,o,a){const l=new bp(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const l=a.injector.get(ed);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new he(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(I_,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)($e(Ka))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function XE(i,o){return Array.isArray(o)?o.reduce(XE,i):{...i,...o}}let ed=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new P.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new P.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Hs.assertNotInAngularZone(),D0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ee.T)(g,y.pipe((0,te.B)()))}bootstrap(a,l){const h=a instanceof Xd;if(!this._injector.get(Bp).done){!h&&Es(a);throw new he(405,uu)}let y;y=h?a:this._injector.get(eh).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const C=function b_(i){return i.isBoundToModule}(y)?void 0:this._injector.get(yc),A=y.create(Ka.NULL,[],l||y.selector,C),M=A.location.nativeElement,N=A.injector.get(KE,null);return N?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),td(this.components,A),N?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;td(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get($p,[]);l.push(...this._bootstrapListeners),l.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>td(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new he(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)($e(Hs),$e(Mi),$e(Wf))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function td(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function cT(){return!1}let Cc=(()=>{class i{}return i.__NG_ELEMENT_ID__=Gp,i})();function Gp(i){return function dT(i,o,a){if(yu(i)&&!a){const l=Xn(i.index,o);return new dh(l,l)}return 47&i.type?new dh(o[hr],o):null}(or(),be(),16==(16&i))}class sI{constructor(){}supports(o){return Ol(o)}create(o){return new TA(o)}}const DA=(i,o)=>o;class TA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||DA}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,g=null;for(;a||l;){const y=!l||a&&a.currentIndex<Ec(l,h,g)?a:l,C=Ec(y,h,g),I=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{g||(g=[]);const A=C-h,M=I-h;if(A!=M){for(let H=0;H<A;H++){const Y=H<g.length?g[H]:g[H]=0,me=Y+H;M<=me&&me<A&&(g[H]=Y+1)}g[y.previousIndex]=M-A}}C!==I&&o(y,C,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ol(o))throw new he(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],y=this._trackByFn(C,g),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,g,y,C)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,y,C),l=!0),a=a._next}else h=0,function gC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,C=>{y=this._trackByFn(h,C),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,C,y,h)),Object.is(a.item,C)||this._addIdentityChange(a,C)):(a=this._mismatch(a,C,y,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new gT(a,l),g,h),o}_verifyReinsertion(o,a,l,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new mT),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class gT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class mT{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new SA,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ec(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class fa{constructor(){}supports(o){return o instanceof Map||vo(o)}create(){return new Kp}}class Kp{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||vo(o)))throw new he(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const l=new Ic(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Ic{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function oI(){return new O_([new sI])}let O_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||oI()),deps:[[i,new Jt,new ho]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new he(901,!1)}}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:oI}),i})();function lu(){return new U0([new fa])}let U0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||lu()),deps:[[i,new Jt,new ho]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new he(901,!1)}}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:lu}),i})();const aI=JE(null,"core",[]);let uI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)($e(ed))},i.\u0275mod=gu({type:i}),i.\u0275inj=Yn({}),i})();function vT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(gt,Ie,k)=>{k.d(Ie,{Z:()=>ze});var c=k(2090),K=k(4859),P=k(9681),ee=k(1877);class te{constructor(he,Ce){this._delegate=he,this.firebase=Ce,(0,P._addComponent)(he,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,Ce=P._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const Ne=this._delegate.container.getProvider(he);return!Ne.isInitialized()&&"EXPLICIT"===(null===(Ee=Ne.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&Ne.initialize(),Ne.getImmediate({identifier:Ce})}_removeServiceInstance(he,Ce=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ce)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ae(){const st=function ce(st){const he={},Ce={__esModule:!0,initializeApp:function ve(Pe,U={}){const pe=P.initializeApp(Pe,U);if((0,c.r3)(he,pe.name))return he[pe.name];const Ve=new st(pe,Ce);return he[pe.name]=Ve,Ve},app:Ne,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Te(Pe){const U=Pe.name,pe=U.replace("-compat","");if(P._registerComponent(Pe)&&"PUBLIC"===Pe.type){const Ve=(qe=Ne())=>{if("function"!=typeof qe[pe])throw de.create("invalid-app-argument",{appName:U});return qe[pe]()};void 0!==Pe.serviceProps&&(0,c.ZB)(Ve,Pe.serviceProps),Ce[pe]=Ve,st.prototype[pe]=function(...qe){return this._getService.bind(this,U).apply(this,Pe.multipleInstances?qe:[])}}return"PUBLIC"===Pe.type?Ce[pe]:null},removeApp:function Ee(Pe){delete he[Pe]},useAsService:function Fe(Pe,U){return"serverAuth"===U?null:U},modularAPIs:P}};function Ne(Pe){if(!(0,c.r3)(he,Pe=Pe||P._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Pe});return he[Pe]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function _e(){return Object.keys(he).map(Pe=>he[Pe])}}),Ne.App=st,Ce}(te);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function he(Ce){(0,c.ZB)(st,Ce)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),st}(),$=new ee.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ze=j;!function we(st){(0,P.registerVersion)("@firebase/app-compat","0.2.7",st)}()},9681:(gt,Ie,k)=>{k.r(Ie),k.d(Ie,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>pi,_DEFAULT_ENTRY_NAME:()=>ke,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Ct,_apps:()=>Je,_clearComponents:()=>Yn,_components:()=>Ke,_getProvider:()=>Xe,_registerComponent:()=>en,_removeServiceInstance:()=>Dt,deleteApp:()=>ws,getApp:()=>gi,getApps:()=>Kr,initializeApp:()=>qs,onLog:()=>mt,registerVersion:()=>Yr,setLogLevel:()=>Cs});var c=k(5861),K=k(4859),P=k(1877),ee=k(2090),te=k(8766);class ne{constructor(ye){this.container=ye}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function de($e){return"VERSION"===$e.getComponent()?.type}(rt)){const It=rt.getImmediate();return`${It.library}/${It.version}`}return null}).filter(rt=>rt).join(" ")}}const ce="@firebase/app",j=new P.Yd("@firebase/app"),ke="[DEFAULT]",je={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Je=new Map,Ke=new Map;function rn($e,ye){try{$e.container.addComponent(ye)}catch(rt){j.debug(`Component ${ye.name} failed to register with FirebaseApp ${$e.name}`,rt)}}function Ct($e,ye){$e.container.addOrOverwriteComponent(ye)}function en($e){const ye=$e.name;if(Ke.has(ye))return j.debug(`There were multiple attempts to register component ${ye}.`),!1;Ke.set(ye,$e);for(const rt of Je.values())rn(rt,$e);return!0}function Xe($e,ye){const rt=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),$e.container.getProvider(ye)}function Dt($e,ye,rt=ke){Xe($e,ye).clearInstance(rt)}function Yn(){Ke.clear()}const bn=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mn{constructor(ye,rt,It){this._isDeleted=!1,this._options=Object.assign({},ye),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this.checkDestroyed(),this._automaticDataCollectionEnabled=ye}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ye){this._isDeleted=ye}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}}const pi="9.19.1";function qs($e,ye={}){let rt=$e;"object"!=typeof ye&&(ye={name:ye});const It=Object.assign({name:ke,automaticDataCollectionEnabled:!1},ye),Rt=It.name;if("string"!=typeof Rt||!Rt)throw bn.create("bad-app-name",{appName:String(Rt)});if(rt||(rt=(0,ee.aH)()),!rt)throw bn.create("no-options");const Ut=Je.get(Rt);if(Ut){if((0,ee.vZ)(rt,Ut.options)&&(0,ee.vZ)(It,Ut.config))return Ut;throw bn.create("duplicate-app",{appName:Rt})}const xr=new K.H0(Rt);for(const L of Ke.values())xr.addComponent(L);const B=new Mn(rt,It,xr);return Je.set(Rt,B),B}function gi($e=ke){const ye=Je.get($e);if(!ye&&$e===ke)return qs();if(!ye)throw bn.create("no-app",{appName:$e});return ye}function Kr(){return Array.from(Je.values())}function ws($e){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*($e){const ye=$e.name;Je.has(ye)&&(Je.delete(ye),yield Promise.all($e.container.getProviders().map(rt=>rt.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function Yr($e,ye,rt){var It;let Rt=null!==(It=je[$e])&&void 0!==It?It:$e;rt&&(Rt+=`-${rt}`);const Ut=Rt.match(/\s|\//),xr=ye.match(/\s|\//);if(Ut||xr){const B=[`Unable to register library "${Rt}" with version "${ye}":`];return Ut&&B.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Ut&&xr&&B.push("and"),xr&&B.push(`version name "${ye}" contains illegal characters (whitespace or "/")`),void j.warn(B.join(" "))}en(new K.wA(`${Rt}-version`,()=>({library:Rt,version:ye}),"VERSION"))}function mt($e,ye){if(null!==$e&&"function"!=typeof $e)throw bn.create("invalid-log-argument");(0,P.Am)($e,ye)}function Cs($e){(0,P.Ub)($e)}const Si="firebase-heartbeat-database",Rn=1,Sr="firebase-heartbeat-store";let Zs=null;function kt(){return Zs||(Zs=(0,te.X3)(Si,Rn,{upgrade:($e,ye)=>{0===ye&&$e.createObjectStore(Sr)}}).catch($e=>{throw bn.create("idb-open",{originalErrorMessage:$e.message})})),Zs}function Tt(){return(Tt=(0,c.Z)(function*($e){try{return(yield kt()).transaction(Sr).objectStore(Sr).get(Qn($e))}catch(ye){if(ye instanceof ee.ZR)j.warn(ye.message);else{const rt=bn.create("idb-get",{originalErrorMessage:ye?.message});j.warn(rt.message)}}})).apply(this,arguments)}function Ws($e,ye){return wn.apply(this,arguments)}function wn(){return(wn=(0,c.Z)(function*($e,ye){try{const It=(yield kt()).transaction(Sr,"readwrite");return yield It.objectStore(Sr).put(ye,Qn($e)),It.done}catch(rt){if(rt instanceof ee.ZR)j.warn(rt.message);else{const It=bn.create("idb-set",{originalErrorMessage:rt?.message});j.warn(It.message)}}})).apply(this,arguments)}function Qn($e){return`${$e.name}!${$e.options.appId}`}class ma{constructor(ye){this.container=ye,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Kt(rt),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var ye=this;return(0,c.Z)(function*(){const It=ye.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=an();if(null===ye._heartbeatsCache&&(ye._heartbeatsCache=yield ye._heartbeatsCachePromise),ye._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!ye._heartbeatsCache.heartbeats.some(Ut=>Ut.date===Rt))return ye._heartbeatsCache.heartbeats.push({date:Rt,agent:It}),ye._heartbeatsCache.heartbeats=ye._heartbeatsCache.heartbeats.filter(Ut=>{const xr=new Date(Ut.date).valueOf();return Date.now()-xr<=2592e6}),ye._storage.overwrite(ye._heartbeatsCache)})()}getHeartbeatsHeader(){var ye=this;return(0,c.Z)(function*(){if(null===ye._heartbeatsCache&&(yield ye._heartbeatsCachePromise),null===ye._heartbeatsCache||0===ye._heartbeatsCache.heartbeats.length)return"";const rt=an(),{heartbeatsToSend:It,unsentEntries:Rt}=function es($e,ye=1024){const rt=[];let It=$e.slice();for(const Rt of $e){const Ut=rt.find(xr=>xr.agent===Rt.agent);if(Ut){if(Ut.dates.push(Rt.date),jr(rt)>ye){Ut.dates.pop();break}}else if(rt.push({agent:Rt.agent,dates:[Rt.date]}),jr(rt)>ye){rt.pop();break}It=It.slice(1)}return{heartbeatsToSend:rt,unsentEntries:It}}(ye._heartbeatsCache.heartbeats),Ut=(0,ee.L)(JSON.stringify({version:2,heartbeats:It}));return ye._heartbeatsCache.lastSentHeartbeatDate=rt,Rt.length>0?(ye._heartbeatsCache.heartbeats=Rt,yield ye._storage.overwrite(ye._heartbeatsCache)):(ye._heartbeatsCache.heartbeats=[],ye._storage.overwrite(ye._heartbeatsCache)),Ut})()}}function an(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(ye){this.app=ye,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ye=this;return(0,c.Z)(function*(){return(yield ye._canUseIndexedDBPromise)&&(yield function yt($e){return Tt.apply(this,arguments)}(ye.app))||{heartbeats:[]}})()}overwrite(ye){var rt=this;return(0,c.Z)(function*(){var It;if(yield rt._canUseIndexedDBPromise){const Ut=yield rt.read();return Ws(rt.app,{lastSentHeartbeatDate:null!==(It=ye.lastSentHeartbeatDate)&&void 0!==It?It:Ut.lastSentHeartbeatDate,heartbeats:ye.heartbeats})}})()}add(ye){var rt=this;return(0,c.Z)(function*(){var It;if(yield rt._canUseIndexedDBPromise){const Ut=yield rt.read();return Ws(rt.app,{lastSentHeartbeatDate:null!==(It=ye.lastSentHeartbeatDate)&&void 0!==It?It:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...ye.heartbeats]})}})()}}function jr($e){return(0,ee.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Fi($e){en(new K.wA("platform-logger",ye=>new ne(ye),"PRIVATE")),en(new K.wA("heartbeat",ye=>new ma(ye),"PRIVATE")),Yr(ce,"0.9.7",$e),Yr(ce,"0.9.7","esm2017"),Yr("fire-js","")}("")},4859:(gt,Ie,k)=>{k.d(Ie,{H0:()=>ce,wA:()=>P});var c=k(5861),K=k(2090);class P{constructor(j,$,q){this.name=j,this.instanceFactory=$,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ee="[DEFAULT]";class te{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const q=new K.BH;if(this.instancesDeferred.set($,q),this.isInitialized($)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:$});Be&&q.resolve(Be)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const q=this.normalizeInstanceIdentifier(j?.identifier),Be=null!==($=j?.optional)&&void 0!==$&&$;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(we){if(Be)return null;throw we}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function de(ae){return"EAGER"===ae.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[$,q]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier($);try{const we=this.getOrInitializeService({instanceIdentifier:Be});q.resolve(we)}catch{}}}}clearInstance(j=ee){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,c.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...$.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ee){return this.instances.has(j)}getOptions(j=ee){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:q,options:$});for(const[we,ze]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(we)&&ze.resolve(Be);return Be}onInit(j,$){var q;const Be=this.normalizeInstanceIdentifier($),we=null!==(q=this.onInitCallbacks.get(Be))&&void 0!==q?q:new Set;we.add(j),this.onInitCallbacks.set(Be,we);const ze=this.instances.get(Be);return ze&&j(ze,Be),()=>{we.delete(j)}}invokeOnInitCallbacks(j,$){const q=this.onInitCallbacks.get($);if(q)for(const Be of q)try{Be(j,$)}catch{}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let q=this.instances.get(j);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=j,ae===ee?void 0:ae),options:$}),this.instances.set(j,q),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,q)}catch{}var ae;return q||null}normalizeInstanceIdentifier(j=ee){return this.component?this.component.multipleInstances?j:ee:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new te(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,Ie,k)=>{k.d(Ie,{Am:()=>ae,Ub:()=>ce,Yd:()=>de,in:()=>K});const c=[];var K=(()=>{return(j=K||(K={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",K;var j})();const P={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ee=K.INFO,te={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},ne=(j,$,...q)=>{if($<j.logLevel)return;const Be=(new Date).toISOString(),we=te[$];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[we](`[${Be}]  ${j.name}:`,...q)};class de{constructor($){this.name=$,this._logLevel=ee,this._logHandler=ne,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in K))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?P[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...$),this._logHandler(this,K.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...$),this._logHandler(this,K.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,K.INFO,...$),this._logHandler(this,K.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,K.WARN,...$),this._logHandler(this,K.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...$),this._logHandler(this,K.ERROR,...$)}}function ce(j){c.forEach($=>{$.setLogLevel(j)})}function ae(j,$){for(const q of c){let Be=null;$&&$.level&&(Be=P[$.level]),q.userLogHandler=null===j?null:(we,ze,...st)=>{const he=st.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch{return null}}).filter(Ce=>Ce).join(" ");ze>=(Be??we.logLevel)&&j({level:K[ze].toLowerCase(),message:he,args:st,type:we.name})}}}},259:(gt,Ie,k)=>{k.d(Ie,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=k(9681);(0,c.registerVersion)("firebase","9.19.1","app")},9260:(gt,Ie,k)=>{k.d(Ie,{Z:()=>c.Z});var c=k(3942);c.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(gt,Ie,k)=>{k.r(Ie);var c=k(5861),K=k(3942),P=k(2090),ee=k(9681),te=k(1877),ne=k(655),de=k(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q_EMAIL_SIGNIN="EMAIL_SIGNIN",q_PASSWORD_RESET="PASSWORD_RESET",q_RECOVER_EMAIL="RECOVER_EMAIL",q_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",q_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",q_VERIFY_EMAIL="VERIFY_EMAIL";const ze=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},st=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new te.Yd("@firebase/auth");function Ne(_,...f){Ee.logLevel<=te.in.ERROR&&Ee.error(`Auth (${ee.SDK_VERSION}): ${_}`,...f)}function ve(_,...f){throw Pe(_,...f)}function _e(_,...f){return Pe(_,...f)}function Te(_,f,p){const w=Object.assign(Object.assign({},st()),{[f]:p});return new P.LL("auth","Firebase",w).create(f,{appName:_.name})}function Fe(_,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&ve(_,"argument-error"),Te(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(_,...f){if("string"!=typeof _){const p=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(p,...w)}return he.create(_,...f)}function U(_,f,...p){if(!_)throw Pe(f,...p)}function pe(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ne(f),new Error(f)}function Ve(_,f){_||pe(f)}const qe=new Map;function ht(_){Ve(_ instanceof Function,"Expected a class definition");let f=qe.get(_);return f?(Ve(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,qe.set(_,f),f)}function le(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ge(){return"http:"===Me()||"https:"===Me()}function Me(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Je{constructor(f,p){this.shortDelay=f,this.longDelay=p,Ve(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function ke(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ge()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ke(_,f){Ve(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class rn{static initialize(f,p,w){this.fetchImpl=f,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new Je(3e4,6e4);function Xe(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Dt(_,f,p,w){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,c.Z)(function*(_,f,p,w,S={}){return hn(_,S,(0,c.Z)(function*(){let R={},z={};w&&("GET"===f?z=w:R={body:JSON.stringify(w)});const oe=(0,P.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ue=yield _._getAdditionalHeaders();return Ue["Content-Type"]="application/json",_.languageCode&&(Ue["X-Firebase-Locale"]=_.languageCode),rn.fetch()(qs(_,_.config.apiHost,p,oe),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function hn(_,f,p){return bn.apply(this,arguments)}function bn(){return(bn=(0,c.Z)(function*(_,f,p){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ct),f);try{const S=new gi(_),R=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw Kr(_,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const oe=R.ok?z.errorMessage:z.error.message,[Ue,nt]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Kr(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw Kr(_,"email-already-in-use",z);if("USER_DISABLED"===Ue)throw Kr(_,"user-disabled",z);const pt=w[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw Te(_,pt,nt);ve(_,pt)}}catch(S){if(S instanceof P.ZR)throw S;ve(_,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function Mn(_,f,p,w){return pi.apply(this,arguments)}function pi(){return(pi=(0,c.Z)(function*(_,f,p,w,S={}){const R=yield Dt(_,f,p,w,S);return"mfaPendingCredential"in R&&ve(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function qs(_,f,p,w){const S=`${f}${p}?${w}`;return _.config.emulator?Ke(_.config,S):`${_.config.apiScheme}://${S}`}class gi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kr(_,f,p){const w={appName:_.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const S=_e(_,f,w);return S.customData._tokenResponse=p,S}function Dn(){return(Dn=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function mt(){return(mt=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Si(){return(Si=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Rn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function kt(){return(kt=(0,c.Z)(function*(_,f=!1){const p=(0,P.m9)(_),w=yield p.getIdToken(f),S=Tt(w);U(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,z=R?.sign_in_provider;return{claims:S,token:w,authTime:Rn(yt(S.auth_time)),issuedAtTime:Rn(yt(S.iat)),expirationTime:Rn(yt(S.exp)),signInProvider:z||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function yt(_){return 1e3*Number(_)}function Tt(_){const[f,p,w]=_.split(".");if(void 0===f||void 0===p||void 0===w)return Ne("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,P.tV)(p);return S?JSON.parse(S):(Ne("Failed to decode base64 JWT payload"),null)}catch(S){return Ne("Caught error parsing JWT payload as JSON",S?.toString()),null}}function wn(_,f){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,c.Z)(function*(_,f,p=!1){if(p)return f;try{return yield f}catch(w){throw w instanceof P.ZR&&function Br({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}class Ar{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield p.iteration()}),w)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class ma{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(_){return es.apply(this,arguments)}function es(){return es=(0,c.Z)(function*(_){var f;const p=_.auth,w=yield _.getIdToken(),S=yield wn(_,function Cs(_,f){return Si.apply(this,arguments)}(p,{idToken:w}));U(S?.users.length,p,"internal-error");const R=S.users[0];_._notifyReloadListener(R);const z=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?function $e(_){return _.map(f=>{var{providerId:p}=f,w=(0,ne._T)(f,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(R.providerUserInfo):[],oe=function Fi(_,f){return[..._.filter(w=>!f.some(S=>S.providerId===w.providerId)),...f]}(_.providerData,z),pt=!!_.isAnonymous&&!(_.email&&R.passwordHash||oe?.length),dt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:oe,metadata:new ma(R.createdAt,R.lastLoginAt),isAnonymous:pt};Object.assign(_,dt)}),es.apply(this,arguments)}function jr(){return(jr=(0,c.Z)(function*(_){const f=(0,P.m9)(_);yield an(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function rt(){return(rt=(0,c.Z)(function*(_,f){const p=yield hn(_,{},(0,c.Z)(function*(){const w=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:R}=_.config,z=qs(_,S,"/v1/token",`key=${R}`),oe=yield _._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(z,{method:"POST",headers:oe,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class It{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Ws(_){const f=Tt(_);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var w=this;return(0,c.Z)(function*(){return U(!w.accessToken||w.refreshToken,f,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var w=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:z}=yield function ye(_,f){return rt.apply(this,arguments)}(f,p);w.updateTokensAndExpiration(S,R,Number(z))})()}updateTokensAndExpiration(f,p,w){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,p){const{refreshToken:w,accessToken:S,expirationTime:R}=p,z=new It;return w&&(U("string"==typeof w,"internal-error",{appName:f}),z.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:f}),z.accessToken=S),R&&(U("number"==typeof R,"internal-error",{appName:f}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new It,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Rt(_,f){U("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class Ut{constructor(f){var{uid:p,auth:w,stsTokenManager:S}=f,R=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ar(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ma(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,c.Z)(function*(){const w=yield wn(p,p.stsTokenManager.getToken(p.auth,f));return U(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(f){return function Zs(_){return kt.apply(this,arguments)}(this,f)}reload(){return function Kt(_){return jr.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Ut(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var w=this;return(0,c.Z)(function*(){let S=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),S=!0),p&&(yield an(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,c.Z)(function*(){const p=yield f.getIdToken();return yield wn(f,function ws(_,f){return Dn.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var w,S,R,z,oe,Ue,nt,pt;const dt=null!==(w=p.displayName)&&void 0!==w?w:void 0,rr=null!==(S=p.email)&&void 0!==S?S:void 0,Gi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,cs=null!==(z=p.photoURL)&&void 0!==z?z:void 0,go=null!==(oe=p.tenantId)&&void 0!==oe?oe:void 0,gl=null!==(Ue=p._redirectEventId)&&void 0!==Ue?Ue:void 0,Wd=null!==(nt=p.createdAt)&&void 0!==nt?nt:void 0,ml=null!==(pt=p.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:fn,emailVerified:Kd,isAnonymous:_l,providerData:ia,stsTokenManager:$g}=p;U(fn&&$g,f,"internal-error");const Hg=It.fromJSON(this.name,$g);U("string"==typeof fn,f,"internal-error"),Rt(dt,f.name),Rt(rr,f.name),U("boolean"==typeof Kd,f,"internal-error"),U("boolean"==typeof _l,f,"internal-error"),Rt(Gi,f.name),Rt(cs,f.name),Rt(go,f.name),Rt(gl,f.name),Rt(Wd,f.name),Rt(ml,f.name);const Uf=new Ut({uid:fn,auth:f,email:rr,emailVerified:Kd,displayName:dt,isAnonymous:_l,photoURL:cs,phoneNumber:Gi,tenantId:go,stsTokenManager:Hg,createdAt:Wd,lastLoginAt:ml});return ia&&Array.isArray(ia)&&(Uf.providerData=ia.map(oy=>Object.assign({},oy))),gl&&(Uf._redirectEventId=gl),Uf}static _fromIdTokenResponse(f,p,w=!1){return(0,c.Z)(function*(){const S=new It;S.updateFromServerResponse(p);const R=new Ut({uid:p.localId,auth:f,stsTokenManager:S,isAnonymous:w});return yield an(R),R})()}}const B=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(p,w){var S=this;return(0,c.Z)(function*(){S.storage[p]=w})()}_get(p){var w=this;return(0,c.Z)(function*(){const S=w.storage[p];return void 0===S?null:S})()}_remove(p){var w=this;return(0,c.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return _.type="NONE",_})();function L(_,f,p){return`firebase:${_}:${f}:${p}`}class G{constructor(f,p,w){this.persistence=f,this.auth=p,this.userKey=w;const{config:S,name:R}=this.auth;this.fullUserKey=L(this.userKey,S.apiKey,R),this.fullPersistenceKey=L("persistence",S.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Ut._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,c.Z)(function*(){if(p.persistence===f)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,w="authUser"){return(0,c.Z)(function*(){if(!p.length)return new G(ht(B),f,w);const S=(yield Promise.all(p.map(function(){var nt=(0,c.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let R=S[0]||ht(B);const z=L(w,f.config.apiKey,f.name);let oe=null;for(const nt of p)try{const pt=yield nt._get(z);if(pt){const dt=Ut._fromJSON(f,pt);nt!==R&&(oe=dt),R=nt;break}}catch{}const Ue=S.filter(nt=>nt._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],oe&&(yield R._set(z,oe.toJSON())),yield Promise.all(p.map(function(){var nt=(0,c.Z)(function*(pt){if(pt!==R)try{yield pt._remove(z)}catch{}});return function(pt){return nt.apply(this,arguments)}}())),new G(R,f,w)):new G(R,f,w)})()}}function fe(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(cn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Q(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ln(f))return"Blackberry";if(ir(f))return"Webos";if(et(f))return"Safari";if((f.includes("chrome/")||Ze(f))&&!f.includes("edge/"))return"Chrome";if(On(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Q(_=(0,P.z$)()){return/firefox\//i.test(_)}function et(_=(0,P.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ze(_=(0,P.z$)()){return/crios\//i.test(_)}function cn(_=(0,P.z$)()){return/iemobile/i.test(_)}function On(_=(0,P.z$)()){return/android/i.test(_)}function Ln(_=(0,P.z$)()){return/blackberry/i.test(_)}function ir(_=(0,P.z$)()){return/webos/i.test(_)}function Nt(_=(0,P.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Xh(_=(0,P.z$)()){return Nt(_)||On(_)||ir(_)||Ln(_)||/windows phone/i.test(_)||cn(_)}function pu(_,f=[]){let p;switch(_){case"Browser":p=fe((0,P.z$)());break;case"Worker":p=`${fe((0,P.z$)())}-${_}`;break;default:p=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ee.SDK_VERSION}/${w}`}class gu{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const w=R=>new Promise((z,oe)=>{try{z(f(R))}catch(Ue){oe(Ue)}});w.onAbort=p,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,c.Z)(function*(){if(p.auth.currentUser===f)return;const w=[];try{for(const S of p.queue)yield S(f),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const R of w)try{R()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class ef{constructor(f,p,w){this.app=f,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oc(this),this.idTokenSubscription=new Oc(this),this.beforeStateQueue=new gu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,p){var w=this;return p&&(this._popupRedirectResolver=ht(p)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,R;if(!w._deleted&&(w.persistenceManager=yield G.create(w,f),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,c.Z)(function*(){var w;const S=yield p.assertedPersistence.getCurrentUser();let R=S,z=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const oe=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Ue=R?._redirectEventId,nt=yield p.tryRedirectSignIn(f);(!oe||oe===Ue)&&nt?.user&&(R=nt.user,z=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield p.beforeStateQueue.runMiddleware(R)}catch(oe){R=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(oe))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return U(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var p=this;return(0,c.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,c.Z)(function*(){try{yield an(f)}catch(w){if("auth/network-request-failed"!==w?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function je(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,c.Z)(function*(){const w=f?(0,P.m9)(f):null;return w&&U(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(f,p=!1){var w=this;return(0,c.Z)(function*(){if(!w._deleted)return f&&U(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,c.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,c.Z)(function*(){yield p.assertedPersistence.setPersistence(ht(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,p,w){return this.registerStateListener(this.authStateSubscription,f,p,w)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,w){return this.registerStateListener(this.idTokenSubscription,f,p,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var w=this;return(0,c.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(p);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,c.Z)(function*(){if(!p.redirectPersistenceManager){const w=f&&ht(f)||p._popupRedirectResolver;U(w,p,"argument-error"),p.redirectPersistenceManager=yield G.create(p,[ht(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,c.Z)(function*(){var w,S;return p._isInitialized&&(yield p.queue((0,c.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===f?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,c.Z)(function*(){if(f===p.currentUser)return p.queue((0,c.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,w,S){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof p?f.addObserver(p,w,S):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,c.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=pu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var p;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function Vn(_){return(0,P.m9)(_)}class Oc{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yt(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function lr(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class sr{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return pe("not implemented")}_getIdTokenResponse(f){return pe("not implemented")}_linkToIdToken(f,p){return pe("not implemented")}_getReauthenticationResolver(f){return pe("not implemented")}}function Mr(_,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:resetPassword",Xe(_,f))})).apply(this,arguments)}function Ks(_,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:update",Xe(_,f))})).apply(this,arguments)}function Qr(){return(Qr=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signInWithPassword",Xe(_,f))})).apply(this,arguments)}function Vi(_,f){return mn.apply(this,arguments)}function mn(){return(mn=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:sendOobCode",Xe(_,f))})).apply(this,arguments)}function Tn(){return(Tn=(0,c.Z)(function*(_,f){return Vi(_,f)})).apply(this,arguments)}function _a(){return(_a=(0,c.Z)(function*(_,f){return Vi(_,f)})).apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(_,f){return Vi(_,f)})).apply(this,arguments)}function Qs(){return(Qs=(0,c.Z)(function*(_,f){return Vi(_,f)})).apply(this,arguments)}function hr(){return(hr=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signInWithEmailLink",Xe(_,f))})).apply(this,arguments)}function Js(){return(Js=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signInWithEmailLink",Xe(_,f))})).apply(this,arguments)}class Jr extends sr{constructor(f,p,w,S=null){super("password",w),this._email=f,this._password=p,this._tenantId=S}static _fromEmailAndPassword(f,p){return new Jr(f,p,"password")}static _fromEmailAndCode(f,p,w=null){return new Jr(f,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,c.Z)(function*(){switch(p.signInMethod){case"password":return function gn(_,f){return Qr.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function ya(_,f){return hr.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:ve(f,"internal-error")}})()}_linkToIdToken(f,p){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return Ks(f,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function So(_,f){return Js.apply(this,arguments)}(f,{idToken:p,email:w._email,oobCode:w._password});default:ve(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function _i(_,f){return kc.apply(this,arguments)}function kc(){return(kc=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signInWithIdp",Xe(_,f))})).apply(this,arguments)}class ts extends sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new ts(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):ve("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:S}=p,R=(0,ne._T)(p,["providerId","signInMethod"]);if(!w||!S)return null;const z=new ts(w,S);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(f){return _i(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,_i(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,_i(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,P.xO)(p)}return f}}function _u(){return(_u=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:sendVerificationCode",Xe(_,f))})).apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signInWithPhoneNumber",Xe(_,f))})).apply(this,arguments)}function fr(){return(fr=(0,c.Z)(function*(_,f){const p=yield Mn(_,"POST","/v1/accounts:signInWithPhoneNumber",Xe(_,f));if(p.temporaryProof)throw Kr(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const cg={USER_NOT_FOUND:"user-not-found"};function ti(){return(ti=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signInWithPhoneNumber",Xe(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),cg)})).apply(this,arguments)}class ns extends sr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new ns({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new ns({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Xs(_,f){return Xr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Is(_,f){return fr.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ei(_,f){return ti.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:w,verificationCode:S}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:w,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:R}=f;return w||p||S||R?new ns({verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:R}):null}}class Rr{constructor(f){var p,w,S,R,z,oe;const Ue=(0,P.zd)((0,P.pd)(f)),nt=null!==(p=Ue.apiKey)&&void 0!==p?p:null,pt=null!==(w=Ue.oobCode)&&void 0!==w?w:null,dt=function yu(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ue.mode)&&void 0!==S?S:null);U(nt&&pt&&dt,"argument-error"),this.apiKey=nt,this.operation=dt,this.code=pt,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(oe=Ue.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const p=function Ao(_){const f=(0,P.zd)((0,P.pd)(_)).link,p=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,w=(0,P.zd)((0,P.pd)(_)).deep_link_id;return(w?(0,P.zd)((0,P.pd)(w)).link:null)||w||p||f||_}(f);try{return new Rr(p)}catch{return null}}}let ud=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,w){return Jr._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const S=Rr.parseLink(w);return U(S,"argument-error"),Jr._fromEmailAndCode(p,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class rs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class eo extends rs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class va extends eo{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return U("providerId"in p&&"signInMethod"in p,"argument-error"),ts._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return va.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return va.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:R,nonce:z,providerId:oe}=f;if(!w&&!S&&!p&&!R||!oe)return null;try{return new va(oe)._credential({idToken:p,accessToken:w,nonce:z,pendingToken:R})}catch{return null}}}let Fc=(()=>{class _ extends eo{constructor(){super("facebook.com")}static credential(p){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),tf=(()=>{class _ extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:S}=p;if(!w&&!S)return null;try{return _.credential(w,S)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),nf=(()=>{class _ extends eo{constructor(){super("github.com")}static credential(p){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class xo extends sr{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return _i(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,_i(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,_i(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:S,pendingToken:R}=p;return w&&S&&R&&w===S?new xo(w,R):null}static _create(f,p){return new xo(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ui extends rs{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ui.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ui.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=xo.fromJSON(f);return U(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:w}=f;if(!p||!w)return null;try{return xo._create(w,p)}catch{return null}}}let dg=(()=>{class _ extends eo{constructor(){super("twitter.com")}static credential(p,w){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=p;if(!w||!S)return null;try{return _.credential(w,S)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Lc(_,f){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signUp",Xe(_,f))})).apply(this,arguments)}class yi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,w,S=!1){return(0,c.Z)(function*(){const R=yield Ut._fromIdTokenResponse(f,w,S),z=Uc(w);return new yi({user:R,providerId:z,_tokenResponse:w,operationType:p})})()}static _forOperation(f,p,w){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const S=Uc(w);return new yi({user:f,providerId:S,_tokenResponse:w,operationType:p})})()}}function Uc(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function rf(){return(rf=(0,c.Z)(function*(_){var f;const p=Vn(_);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new yi({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield Lc(p,{returnSecureToken:!0}),S=yield yi._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class wu extends P.ZR{constructor(f,p,w,S){var R;super(p.code,p.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,p,w,S){return new wu(f,p,w,S)}}function hg(_,f,p,w){return("reauthenticate"===f?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?wu._fromErrorAndOperation(_,R,f,w):R})}function ni(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function no(){return no=(0,c.Z)(function*(_,f){const p=(0,P.m9)(_);yield Ro(!0,p,f);const{providerUserInfo:w}=yield function Yr(_,f){return mt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),S=ni(w||[]);return p.providerData=p.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),no.apply(this,arguments)}function wa(_,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,c.Z)(function*(_,f,p=!1){const w=yield wn(_,f._linkToIdToken(_.auth,yield _.getIdToken()),p);return yi._forOperation(_,"link",w)})).apply(this,arguments)}function Ro(_,f,p){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,c.Z)(function*(_,f,p){yield an(f);const S=!1===_?"provider-already-linked":"no-such-provider";U(ni(f.providerData).has(p)===_,f.auth,S)})).apply(this,arguments)}function Bc(_,f){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,c.Z)(function*(_,f,p=!1){const{auth:w}=_,S="reauthenticate";try{const R=yield wn(_,hg(w,S,f,_),p);U(R.idToken,w,"internal-error");const z=Tt(R.idToken);U(z,w,"internal-error");const{sub:oe}=z;return U(_.uid===oe,w,"user-mismatch"),yi._forOperation(_,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&ve(w,"user-mismatch"),R}})).apply(this,arguments)}function bs(_,f){return ld.apply(this,arguments)}function ld(){return(ld=(0,c.Z)(function*(_,f,p=!1){const w="signIn",S=yield hg(_,w,f),R=yield yi._fromIdTokenResponse(_,w,S);return p||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function nn(_,f){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,c.Z)(function*(_,f){return bs(Vn(_),f)})).apply(this,arguments)}function Ea(_,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,c.Z)(function*(_,f){const p=(0,P.m9)(_);return yield Ro(!1,p,f.providerId),wa(p,f)})).apply(this,arguments)}function Iu(_,f){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(_,f){return Bc((0,P.m9)(_),f)})).apply(this,arguments)}function Ia(){return(Ia=(0,c.Z)(function*(_,f){return Mn(_,"POST","/v1/accounts:signInWithCustomToken",Xe(_,f))})).apply(this,arguments)}function ji(){return ji=(0,c.Z)(function*(_,f){const p=Vn(_),w=yield function Or(_,f){return Ia.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),S=yield yi._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(S.user),S}),ji.apply(this,arguments)}class Xn{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?$c._fromServerResponse(f,p):"totpInfo"in p?Oo._fromServerResponse(f,p):ve(f,"internal-error")}}class $c extends Xn{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new $c(p)}}class Oo extends Xn{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new Oo(p)}}function ba(_,f,p){var w;U((null===(w=p.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),U(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(U(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(U(p.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function Po(){return Po=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_),S={requestType:"PASSWORD_RESET",email:f};p&&ba(w,S,p),yield function dr(_,f){return _a.apply(this,arguments)}(w,S)}),Po.apply(this,arguments)}function St(){return(St=(0,c.Z)(function*(_,f,p){yield Mr((0,P.m9)(_),{oobCode:f,newPassword:p})})).apply(this,arguments)}function bu(){return bu=(0,c.Z)(function*(_,f){yield function He(_,f){return Ft.apply(this,arguments)}((0,P.m9)(_),{oobCode:f})}),bu.apply(this,arguments)}function hd(_,f){return Da.apply(this,arguments)}function Da(){return(Da=(0,c.Z)(function*(_,f){const p=(0,P.m9)(_),w=yield Mr(p,{oobCode:f}),S=w.requestType;switch(U(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,p,"internal-error");default:U(w.email,p,"internal-error")}let R=null;return w.mfaInfo&&(R=Xn._fromServerResponse(Vn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(_,f){const{data:p}=yield hd((0,P.m9)(_),f);return p.email})).apply(this,arguments)}function Sn(){return(Sn=(0,c.Z)(function*(_,f,p){const w=Vn(_),S=yield Lc(w,{returnSecureToken:!0,email:f,password:p}),R=yield yi._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Tu(){return Tu=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_),S={requestType:"EMAIL_SIGNIN",email:f};U(p.handleCodeInApp,w,"argument-error"),p&&ba(w,S,p),yield function jt(_,f){return Do.apply(this,arguments)}(w,S)}),Tu.apply(this,arguments)}function zc(){return(zc=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_),S=ud.credentialWithLink(f,p||le());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),nn(w,S)})).apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:createAuthUri",Xe(_,f))})).apply(this,arguments)}function No(){return No=(0,c.Z)(function*(_,f){const w={identifier:f,continueUri:ge()?le():"http://localhost"},{signinMethods:S}=yield function ko(_,f){return ri.apply(this,arguments)}((0,P.m9)(_),w);return S||[]}),No.apply(this,arguments)}function Su(){return Su=(0,c.Z)(function*(_,f){const p=(0,P.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&ba(p.auth,S,f);const{email:R}=yield function Ys(_,f){return Tn.apply(this,arguments)}(p.auth,S);R!==_.email&&(yield _.reload())}),Su.apply(this,arguments)}function Un(){return Un=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};p&&ba(w.auth,R,p);const{email:z}=yield function To(_,f){return Qs.apply(this,arguments)}(w.auth,R);z!==_.email&&(yield _.reload())}),Un.apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(_,f){return Dt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function vi(){return vi=(0,c.Z)(function*(_,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const w=(0,P.m9)(_),R={idToken:yield w.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},z=yield wn(w,function ii(_,f){return Ta.apply(this,arguments)}(w.auth,R));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const oe=w.providerData.find(({providerId:Ue})=>"password"===Ue);oe&&(oe.displayName=w.displayName,oe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)}),vi.apply(this,arguments)}function md(_,f,p){return qc.apply(this,arguments)}function qc(){return(qc=(0,c.Z)(function*(_,f,p){const{auth:w}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(R.email=f),p&&(R.password=p);const z=yield wn(_,Ks(w,R));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class ro{constructor(f,p,w={}){this.isNewUser=f,this.providerId=p,this.profile=w}}class Zc extends ro{constructor(f,p,w,S){super(f,p,w),this.username=S}}class Mu extends ro{constructor(f,p){super(f,"facebook.com",p)}}class fg extends Zc{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Wc extends ro{constructor(f,p){super(f,"google.com",p)}}class _d extends Zc{constructor(f,p,w){super(f,"twitter.com",p,w)}}function pg(_){const{user:f,_tokenResponse:p}=_;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function xu(_){var f,p;if(!_)return null;const{providerId:w}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&_?.idToken){const z=null===(p=null===(f=Tt(_.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(z)return new ro(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new Mu(R,S);case"github.com":return new fg(R,S);case"google.com":return new Wc(R,S);case"twitter.com":return new _d(R,S,_.screenName||null);case"custom":case"anonymous":return new ro(R,null);default:return new ro(R,w,S)}}(p)}class Ds{constructor(f,p,w){this.type=f,this.credential=p,this.auth=w}static _fromIdtoken(f,p){return new Ds("enroll",f,p)}static _fromMfaPendingCredential(f){return new Ds("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,w;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Ds._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return Ds._fromIdtoken(f.multiFactorSession.idToken)}return null}}class er{constructor(f,p,w){this.session=f,this.hints=p,this.signInResolver=w}static _fromError(f,p){const w=Vn(f),S=p.customData._serverResponse,R=(S.mfaInfo||[]).map(oe=>Xn._fromServerResponse(w,oe));U(S.mfaPendingCredential,w,"internal-error");const z=Ds._fromMfaPendingCredential(S.mfaPendingCredential);return new er(z,R,function(){var oe=(0,c.Z)(function*(Ue){const nt=yield Ue._process(w,z);delete S.mfaInfo,delete S.mfaPendingCredential;const pt=Object.assign(Object.assign({},S),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(p.operationType){case"signIn":const dt=yield yi._fromIdTokenResponse(w,p.operationType,pt);return yield w._updateCurrentUser(dt.user),dt;case"reauthenticate":return U(p.user,w,"internal-error"),yi._forOperation(p.user,p.operationType,pt);default:ve(w,"internal-error")}});return function(Ue){return oe.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,c.Z)(function*(){return p.signInResolver(f)})()}}class Fo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Xn._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Fo(f)}getSession(){var f=this;return(0,c.Z)(function*(){return Ds._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var w=this;return(0,c.Z)(function*(){const S=f,R=yield w.getSession(),z=yield wn(w.user,S._process(w.user.auth,R,p));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(f){var p=this;return(0,c.Z)(function*(){const w="string"==typeof f?f:f.uid,S=yield p.user.getIdToken();try{const R=yield wn(p.user,function Qc(_,f){return Dt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(_,f))}(p.user.auth,{idToken:S,mfaEnrollmentId:w}));p.enrolledFactors=p.enrolledFactors.filter(({uid:z})=>z!==w),yield p.user._updateTokensIfNecessary(R),yield p.user.reload()}catch(R){throw R}})()}}const io=new WeakMap,Ru="__sak";class wi{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ru,"1"),this.storage.removeItem(Ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jc=(()=>{class _ extends wi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xa(){const _=(0,P.z$)();return et(_)||Nt(_)}()&&function Rc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Xh(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),R=this.localCache[w];S!==R&&p(w,R,S)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((oe,Ue,nt)=>{this.notifyListeners(oe,nt)});const S=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(p.newValue!==oe)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!w)return}const R=()=>{const oe=this.storage.getItem(S);!w&&this.localCache[S]===oe||this.notifyListeners(S,oe)},z=this.storage.getItem(S);!function fu(){return(0,P.w1)()&&10===document.documentMode}()||z===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var S=()=>super._set,R=this;return(0,c.Z)(function*(){yield S().call(R,p,w),R.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,S=this;return(0,c.Z)(function*(){const R=yield w().call(S,p);return S.localCache[p]=JSON.stringify(R),R})()}_remove(p){var w=()=>super._remove,S=this;return(0,c.Z)(function*(){yield w().call(S,p),delete S.localCache[p]})()}}return _.type="LOCAL",_})(),Ci=(()=>{class _ extends wi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return _.type="SESSION",_})();let lf=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(R=>R.isListeningto(p));if(w)return w;const S=new _(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,c.Z)(function*(){const S=p,{eventId:R,eventType:z,data:oe}=S.data,Ue=w.handlersMap[z];if(!Ue?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const nt=Array.from(Ue).map(function(){var dt=(0,c.Z)(function*(rr){return rr(S.origin,oe)});return function(rr){return dt.apply(this,arguments)}}()),pt=yield function Xc(_){return Promise.all(_.map(function(){var f=(0,c.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return f.apply(this,arguments)}}()))}(nt);S.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:pt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function $i(_="",f=10){let p="";for(let w=0;w<f;w++)p+=Math.floor(10*Math.random());return _+p}class Lo{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,w=50){var S=this;return(0,c.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,oe;return new Promise((Ue,nt)=>{const pt=$i("",20);R.port1.start();const dt=setTimeout(()=>{nt(new Error("unsupported_event"))},w);oe={messageChannel:R,onMessage(rr){const Gi=rr;if(Gi.data.eventId===pt)switch(Gi.data.status){case"ack":clearTimeout(dt),z=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(Gi.data.response);break;default:clearTimeout(dt),clearTimeout(z),nt(new Error("invalid_response"))}}},S.handlers.add(oe),R.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:f,eventId:pt,data:p},[R.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function En(){return window}function so(){return typeof En().WorkerGlobalScope<"u"&&"function"==typeof En().importScripts}function Vo(){return(Vo=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ma="firebaseLocalStorageDb",Bo=1,tl="firebaseLocalStorage",jo="fbase_key";class oo{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function As(_,f){return _.transaction([tl],f?"readwrite":"readonly").objectStore(tl)}function Ra(){const _=indexedDB.open(Ma,Bo);return new Promise((f,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(tl,{keyPath:jo})}catch(S){p(S)}}),_.addEventListener("success",(0,c.Z)(function*(){const w=_.result;w.objectStoreNames.contains(tl)?f(w):(w.close(),yield function Ei(){const _=indexedDB.deleteDatabase(Ma);return new oo(_).toPromise()}(),f(yield Ra()))}))})}function $o(_,f,p){return xs.apply(this,arguments)}function xs(){return(xs=(0,c.Z)(function*(_,f,p){const w=As(_,!0).put({[jo]:f,value:p});return new oo(w).toPromise()})).apply(this,arguments)}function Ms(){return(Ms=(0,c.Z)(function*(_,f){const p=As(_,!1).get(f),w=yield new oo(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ho(_,f){const p=As(_,!0).delete(f);return new oo(p).toPromise()}const ss=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,c.Z)(function*(){return p.db||(p.db=yield Ra()),p.db})()}_withRetries(p){var w=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const R=yield w._openDb();return yield p(R)}catch(R){if(S++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,c.Z)(function*(){return so()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,c.Z)(function*(){p.receiver=lf._getInstance(function Uo(){return so()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(S,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(S,R){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,c.Z)(function*(){var w,S;if(p.activeServiceWorker=yield function el(){return Vo.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Lo(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);R&&null!==(w=R[0])&&void 0!==w&&w.fulfilled&&null!==(S=R[0])&&void 0!==S&&S.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function df(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ra();return yield $o(p,Ru,"1"),yield Ho(p,Ru),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(R=>$o(R,p,w)),S.localCache[p]=w,S.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,c.Z)(function*(){const S=yield w._withRetries(R=>function Ou(_,f){return Ms.apply(this,arguments)}(R,p));return w.localCache[p]=S,S})()}_remove(p){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(S=>Ho(S,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,c.Z)(function*(){const w=yield p._withRetries(z=>{const oe=As(z,!1).getAll();return new oo(oe).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:z,value:oe}of w)R.add(z),JSON.stringify(p.localCache[z])!==JSON.stringify(oe)&&(p.notifyListeners(z,oe),S.push(z));for(const z of Object.keys(p.localCache))p.localCache[z]&&!R.has(z)&&(p.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function uo(){return(uo=(0,c.Z)(function*(_){return(yield Dt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ku(_){return new Promise((f,p)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=S=>{const R=_e("internal-error");R.customData=S,p(R)},w.type="text/javascript",w.charset="UTF-8",function Ed(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function Pr(_){return`__${_}${Math.floor(1e6*Math.random())}`}const zo=1e12;class bd{constructor(f){this.auth=f,this.counter=zo,this._widgets=new Map}render(f,p){const w=this.counter;return this._widgets.set(w,new Dd(f,this.auth.name,p||{})),this.counter++,w}reset(f){var p;const w=f||zo;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(f){var p;return(null===(p=this._widgets.get(f||zo))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,c.Z)(function*(){var w;return null===(w=p._widgets.get(f||zo))||void 0===w||w.execute(),""})()}}class Dd{constructor(f,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;U(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Nu(_){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rs=Pr("rcb"),co=new Je(3e4,6e4);class Eg{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=En().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return U(function Td(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(En().grecaptcha):new Promise((w,S)=>{const R=En().setTimeout(()=>{S(_e(f,"network-request-failed"))},co.get());En()[Rs]=()=>{En().clearTimeout(R),delete En()[Rs];const oe=En().grecaptcha;if(!oe)return void S(_e(f,"internal-error"));const Ue=oe.render;oe.render=(nt,pt)=>{const dt=Ue(nt,pt);return this.counter++,dt},this.hostLanguage=p,w(oe)},ku(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Rs,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),S(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=En().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Go{load(f){return(0,c.Z)(function*(){return new bd(f)})()}clearedOneInstance(){}}const pf="recaptcha",Os={theme:"light",type:"image"};class _n{constructor(f,p=Object.assign({},Os),w){this.parameters=p,this.type=pf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Go:new Eg,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(p)||new Promise(R=>{const z=oe=>{oe&&(f.tokenChangeListeners.delete(z),R(oe))};f.tokenChangeListeners.add(z),f.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof f)f(p);else if("string"==typeof f){const w=En()[f];"function"==typeof w&&w(p)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){U(ge()&&!so(),f.auth,"internal-error"),yield function gf(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function ao(_){return uo.apply(this,arguments)}(f.auth);U(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ka{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=ns._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function _f(){return(_f=(0,c.Z)(function*(_,f,p){const w=Vn(_),S=yield vf(w,f,(0,P.m9)(p));return new ka(S,R=>nn(w,R))})).apply(this,arguments)}function yf(){return(yf=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_);yield Ro(!1,w,"phone");const S=yield vf(w.auth,f,(0,P.m9)(p));return new ka(S,R=>Ea(w,R))})).apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_),S=yield vf(w.auth,f,(0,P.m9)(p));return new ka(S,R=>Iu(w,R))})).apply(this,arguments)}function vf(_,f,p){return wf.apply(this,arguments)}function wf(){return wf=(0,c.Z)(function*(_,f,p){var w;const S=yield p.verify();try{let R;if(U("string"==typeof S,_,"argument-error"),U(p.type===pf,_,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const z=R.session;if("phoneNumber"in R)return U("enroll"===z.type,_,"internal-error"),(yield function si(_,f){return Dt(_,"POST","/v2/accounts/mfaEnrollment:start",Xe(_,f))}(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===z.type,_,"internal-error");const oe=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return U(oe,_,"missing-multi-factor-info"),(yield function Cd(_,f){return Dt(_,"POST","/v2/accounts/mfaSignIn:start",Xe(_,f))}(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield function Nc(_,f){return _u.apply(this,arguments)}(_,{phoneNumber:R.phoneNumber,recaptchaToken:S});return z}}finally{p._reset()}}),wf.apply(this,arguments)}function Fu(){return(Fu=(0,c.Z)(function*(_,f){yield wa((0,P.m9)(_),f)})).apply(this,arguments)}let xi=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=Vn(p)}verifyPhoneNumber(p,w){return vf(this.auth,p,(0,P.m9)(w))}static credential(p,w){return ns._fromVerification(p,w)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:S}=p;return w&&S?ns._fromTokenResponse(w,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function lo(_,f){return f?ht(f):(U(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class oi extends sr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return _i(f,this._buildIdpRequest())}_linkToIdToken(f,p){return _i(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return _i(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Ps(_){return bs(_.auth,new oi(_),_.bypassAuthState)}function rl(_){const{auth:f,user:p}=_;return U(p,f,"internal-error"),Bc(p,new oi(_),_.bypassAuthState)}function Na(_){return ks.apply(this,arguments)}function ks(){return(ks=(0,c.Z)(function*(_){const{auth:f,user:p}=_;return U(p,f,"internal-error"),wa(p,new oi(_),_.bypassAuthState)})).apply(this,arguments)}class il{constructor(f,p,w,S,R=!1){this.auth=f,this.resolver=w,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,c.Z)(function*(w,S){f.pendingPromise={resolve:w,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(w,S){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:R,tenantId:z,error:oe,type:Ue}=f;if(oe)return void p.reject(oe);const nt={auth:p.auth,requestUri:w,sessionId:S,tenantId:z||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ue)(nt))}catch(pt){p.reject(pt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ps;case"linkViaPopup":case"linkViaRedirect":return Na;case"reauthViaPopup":case"reauthViaRedirect":return rl;default:ve(this.auth,"internal-error")}}resolve(f){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cf=new Je(2e3,1e4);function bg(){return(bg=(0,c.Z)(function*(_,f,p){const w=Vn(_);Fe(_,f,rs);const S=lo(w,p);return new yn(w,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Lu(){return(Lu=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_);Fe(w.auth,f,rs);const S=lo(w.auth,p);return new yn(w.auth,"reauthViaPopup",f,S,w).executeNotNull()})).apply(this,arguments)}function pr(){return(pr=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_);Fe(w.auth,f,rs);const S=lo(w.auth,p);return new yn(w.auth,"linkViaPopup",f,S,w).executeNotNull()})).apply(this,arguments)}let yn=(()=>{class _ extends il{constructor(p,w,S,R,z){super(p,w,R,z),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,c.Z)(function*(){const w=yield p.execute();return U(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,c.Z)(function*(){Ve(1===p.filter.length,"Popup operations only handle one event");const w=$i();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Cf.get())};p()}}return _.currentPopupAction=null,_})();const Ii="pendingRedirect",bi=new Map;class Zo extends il{constructor(f,p,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,c.Z)(function*(){let w=bi.get(p.auth._key());if(!w){try{const R=(yield function Hi(_,f){return Vu.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;w=()=>Promise.resolve(R)}catch(S){w=()=>Promise.reject(S)}bi.set(p.auth._key(),w)}return p.bypassAuthState||bi.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(w,f);if("unknown"!==f.type){if(f.eventId){const S=yield w.auth._redirectUserForId(f.eventId);if(S)return w.user=S,p().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Vu(){return(Vu=(0,c.Z)(function*(_,f){const p=Di(f),w=ho(_);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(p));return yield w._remove(p),S})).apply(this,arguments)}function as(_,f){return us.apply(this,arguments)}function us(){return(us=(0,c.Z)(function*(_,f){return ho(_)._set(Di(f),"true")})).apply(this,arguments)}function ft(_,f){bi.set(_._key(),f)}function ho(_){return ht(_._redirectPersistence)}function Di(_){return L(Ii,_.config.apiKey,_.name)}function Jt(_,f,p){return function b(_,f,p){return D.apply(this,arguments)}(_,f,p)}function D(){return(D=(0,c.Z)(function*(_,f,p){const w=Vn(_);Fe(_,f,rs),yield w._initializationPromise;const S=lo(w,p);return yield as(S,w),S._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function x(_,f,p){return function F(_,f,p){return Z.apply(this,arguments)}(_,f,p)}function Z(){return(Z=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_);Fe(w.auth,f,rs),yield w.auth._initializationPromise;const S=lo(w.auth,p);yield as(S,w.auth);const R=yield ln(w);return S._openRedirect(w.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function J(_,f,p){return function Se(_,f,p){return Ye.apply(this,arguments)}(_,f,p)}function Ye(){return(Ye=(0,c.Z)(function*(_,f,p){const w=(0,P.m9)(_);Fe(w.auth,f,rs),yield w.auth._initializationPromise;const S=lo(w.auth,p);yield Ro(!1,w,f.providerId),yield as(S,w.auth);const R=yield ln(w);return S._openRedirect(w.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(_,f){return yield Vn(_)._initializationPromise,zt(_,f,!1)})).apply(this,arguments)}function zt(_,f){return At.apply(this,arguments)}function At(){return(At=(0,c.Z)(function*(_,f,p=!1){const w=Vn(_),S=lo(w,f),z=yield new Zo(w,S,p).execute();return z&&!p&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,f)),z})).apply(this,arguments)}function ln(_){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(_){const f=$i(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class ue{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(p=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Cr(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gn(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var w;if(f.error&&!Gn(f)){const S=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,S))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const w=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wr(f))}saveEventToCache(f){this.cachedEventUids.add(wr(f)),this.lastProcessedEventTime=Date.now()}}function wr(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Gn({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function Ot(_){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,c.Z)(function*(_,f={}){return Dt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Wo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ct=/^https?/;function Pt(){return(Pt=(0,c.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Ot(_);for(const p of f)try{if(Ad(p))return}catch{}ve(_,"unauthorized-domain")})).apply(this,arguments)}function Ad(_){const f=le(),{protocol:p,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===w?"chrome-extension:"===p&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&z.hostname===w}if(!ct.test(p))return!1;if(Wo.test(_))return w===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Uu=new Je(3e4,6e4);function ol(){const _=En().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Ko=null;const Cw=new Je(5e3,15e3),Ew="__/auth/iframe",ui="emulator/auth/iframe",Ef={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fo(_){const f=_.config;U(f.authDomain,_,"auth-domain-config-required");const p=f.emulator?Ke(f,ui):`https://${_.config.authDomain}/${Ew}`,w={apiKey:f.apiKey,appName:_.name,v:ee.SDK_VERSION},S=kr.get(_.config.apiHost);S&&(w.eid=S);const R=_._getFrameworks();return R.length&&(w.fw=R.join(",")),`${p}?${(0,P.xO)(w).slice(1)}`}function al(){return al=(0,c.Z)(function*(_){const f=yield function ww(_){return Ko=Ko||function vw(_){return new Promise((f,p)=>{var w,S,R;function z(){ol(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ol(),p(_e(_,"network-request-failed"))},timeout:Uu.get()})}if(null!==(S=null===(w=En().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(R=En().gapi)||void 0===R||!R.load){const oe=Pr("iframefcb");return En()[oe]=()=>{gapi.load?z():p(_e(_,"network-request-failed"))},ku(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Ue=>p(Ue))}z()}}).catch(f=>{throw Ko=null,f})}(_),Ko}(_),p=En().gapi;return U(p,_,"internal-error"),f.open({where:document.body,url:fo(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ef,dontclear:!0},w=>new Promise(function(){var S=(0,c.Z)(function*(R,z){yield w.restyle({setHideOnLeave:!1});const oe=_e(_,"network-request-failed"),Ue=En().setTimeout(()=>{z(oe)},Cw.get());function nt(){En().clearTimeout(Ue),R(w)}w.ping(nt).then(nt,()=>{z(oe)})});return function(R,z){return S.apply(this,arguments)}}()))}),al.apply(this,arguments)}const xd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bf=500,An=600,J_="_blank",Md="http://localhost";class Df{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ns="__/auth/handler",Tf="emulator/auth/handler";function Sf(_,f,p,w,S,R){U(_.config.authDomain,_,"auth-domain-config-required"),U(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:w,v:ee.SDK_VERSION,eventId:S};if(f instanceof rs){f.setDefaultLanguage(_.languageCode),z.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,nt]of Object.entries(R||{}))z[Ue]=nt}if(f instanceof eo){const Ue=f.getScopes().filter(nt=>""!==nt);Ue.length>0&&(z.scopes=Ue.join(","))}_.tenantId&&(z.tid=_.tenantId);const oe=z;for(const Ue of Object.keys(oe))void 0===oe[Ue]&&delete oe[Ue];return`${function Tg({config:_}){return _.emulator?Ke(_,Tf):`https://${_.authDomain}/${Ns}`}(_)}?${(0,P.xO)(oe).slice(1)}`}const Yo="webStorageSupport",Nr=class Sg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ci,this._completeRedirectFn=zt,this._overrideRedirectResult=ft}_openPopup(f,p,w,S){var R=this;return(0,c.Z)(function*(){var z;Ve(null===(z=R.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const oe=Sf(f,p,w,le(),S);return function Rd(_,f,p,w=bf,S=An){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let oe="";const Ue=Object.assign(Object.assign({},xd),{width:w.toString(),height:S.toString(),top:R,left:z}),nt=(0,P.z$)().toLowerCase();p&&(oe=Ze(nt)?J_:p),Q(nt)&&(f=f||Md,Ue.scrollbars="yes");const pt=Object.entries(Ue).reduce((rr,[Gi,cs])=>`${rr}${Gi}=${cs},`,"");if(function Li(_=(0,P.z$)()){var f;return Nt(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(nt)&&"_self"!==oe)return function Bu(_,f){const p=document.createElement("a");p.href=_,p.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(f||"",oe),new Df(null);const dt=window.open(f||"",oe,pt);U(dt,_,"popup-blocked");try{dt.focus()}catch{}return new Df(dt)}(f,oe,$i())})()}_openRedirect(f,p,w,S){var R=this;return(0,c.Z)(function*(){return yield R._originValidation(f),function Ss(_){En().location.href=_}(Sf(f,p,w,le(),S)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:S,promise:R}=this.eventManagers[p];return S?Promise.resolve(S):(Ve(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(f);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(f){var p=this;return(0,c.Z)(function*(){const w=yield function If(_){return al.apply(this,arguments)}(f),S=new ue(f);return w.register("authEvent",R=>(U(R?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:S},p.iframes[f._key()]=w,S})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Yo,{type:Yo},S=>{var R;const z=null===(R=S?.[0])||void 0===R?void 0:R[Yo];void 0!==z&&p(!!z),ve(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Dg(_){return Pt.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Xh()||et()||Nt()}};class Od{constructor(f){this.factorId=f}_process(f,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,w);case"signin":return this._finalizeSignIn(f,p.credential);default:return pe("unexpected MultiFactorSessionType")}}}class Pd extends Od{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Pd(f)}_finalizeEnroll(f,p,w){return function yg(_,f){return Dt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(_,f))}(f,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Ai(_,f){return Dt(_,"POST","/v2/accounts/mfaSignIn:finalize",Xe(_,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kd=(()=>{class _{constructor(){}static assertion(p){return Pd._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Ag="@firebase/auth";class xf{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,c.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(w=>{f(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fs(){return window}(0,P.Pz)("authIdTokenMaxAge"),function X_(_){(0,ee._registerComponent)(new de.wA("auth",(f,{options:p})=>{const w=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:R,authDomain:z}=w.options;return((oe,Ue)=>{U(R&&!R.includes(":"),"invalid-api-key",{appName:oe.name}),U(!z?.includes(":"),"argument-error",{appName:oe.name});const nt={apiKey:R,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pu(_)},pt=new ef(oe,Ue,nt);return function se(_,f){const p=f?.persistence||[],w=(Array.isArray(p)?p:[p]).map(ht);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,f?.popupRedirectResolver)}(pt,p),pt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,w)=>{f.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new de.wA("auth-internal",f=>{const p=Vn(f.getProvider("auth").getImmediate());return new xf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Ag,"0.22.0",function Mf(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ee.registerVersion)(Ag,"0.22.0","esm2017")}("Browser");const Va=2e3;function Nd(){return Nd=(0,c.Z)(function*(_,f,p){var w;const{BuildInfo:S}=Fs();Ve(f.sessionId,"AuthEvent did not contain a session ID");const R=yield function Rg(_){return Hu.apply(this,arguments)}(f.sessionId),z={};return Nt()?z.ibi=S.packageName:On()?z.apn=S.packageName:ve(_,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=R,Sf(_,p,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,z)}),Nd.apply(this,arguments)}function Qo(){return(Qo=(0,c.Z)(function*(_){const{BuildInfo:f}=Fs(),p={};Nt()?p.iosBundleId=f.packageName:On()?p.androidPackageName=f.packageName:ve(_,"operation-not-supported-in-this-environment"),yield Ot(_,p)})).apply(this,arguments)}function Ua(){return(Ua=(0,c.Z)(function*(_,f,p){const{cordova:w}=Fs();let S=()=>{};try{yield new Promise((R,z)=>{let oe=null;function Ue(){var dt;R();const rr=null===(dt=w.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof rr&&rr(),"function"==typeof p?.close&&p.close()}function nt(){oe||(oe=window.setTimeout(()=>{z(_e(_,"redirect-cancelled-by-user"))},Va))}function pt(){"visible"===document?.visibilityState&&nt()}f.addPassiveListener(Ue),document.addEventListener("resume",nt,!1),On()&&document.addEventListener("visibilitychange",pt,!1),S=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",nt,!1),document.removeEventListener("visibilitychange",pt,!1),oe&&window.clearTimeout(oe)}})}finally{S()}})).apply(this,arguments)}function Hu(){return(Hu=(0,c.Z)(function*(_){const f=function ty(_){if(Ve(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),p=new Uint8Array(f);for(let w=0;w<_.length;w++)p[w]=_.charCodeAt(w);return p}(_),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Og=20;class Pg extends ue{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Ng(_){return zu.apply(this,arguments)}function zu(){return(zu=(0,c.Z)(function*(_){const f=yield qn()._get(mr(_));return f&&(yield qn()._remove(mr(_))),f})).apply(this,arguments)}function Ud(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<Og;p++){const w=Math.floor(Math.random()*f.length);_.push(f.charAt(w))}return _.join("")}function qn(){return ht(Jc)}function mr(_){return L("authEvent",_.config.apiKey,_.name)}function ll(_){if(!_?.includes("?"))return{};const[f,...p]=_.split("?");return(0,P.zd)(p.join("?"))}const Fg=class Pf{constructor(){this._redirectPersistence=Ci,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zt,this._overrideRedirectResult=ft}_initialize(f){var p=this;return(0,c.Z)(function*(){const w=f._key();let S=p.eventManagers.get(w);return S||(S=new Pg(f),p.eventManagers.set(w,S),p.attachCallbackListeners(f,S)),S})()}_openPopup(f){ve(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,w,S){var R=this;return(0,c.Z)(function*(){!function Vd(_){var f,p,w,S,R,z,oe,Ue,nt,pt;const dt=Fs();U("function"==typeof(null===(f=dt?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(p=dt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(R=null===(S=null===(w=dt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Ue=null===(oe=null===(z=dt?.cordova)||void 0===z?void 0:z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(pt=null===(nt=dt?.cordova)||void 0===nt?void 0:nt.InAppBrowser)||void 0===pt?void 0:pt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield R._initialize(f);yield z.initialized(),z.resetRedirect(),function ai(){bi.clear()}(),yield R._originValidation(f);const oe=function Of(_,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:Ud(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(f,w,S);yield function kg(_,f){return qn()._set(mr(_),f)}(f,oe);const Ue=yield function Mg(_,f,p){return Nd.apply(this,arguments)}(f,oe,p),nt=yield function Ld(_){const{cordova:f}=Fs();return new Promise(p=>{f.plugins.browsertab.isAvailable(w=>{let S=null;w?f.plugins.browsertab.openUrl(_):S=f.InAppBrowser.open(_,function $r(_=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(S)})})}(Ue);return function Jo(_,f,p){return Ua.apply(this,arguments)}(f,z,nt)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Fd(_){return Qo.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:w,handleOpenURL:S,BuildInfo:R}=Fs(),z=setTimeout((0,c.Z)(function*(){yield Ng(f),p.onEvent(Lg())}),500),oe=function(){var pt=(0,c.Z)(function*(dt){clearTimeout(z);const rr=yield Ng(f);let Gi=null;rr&&dt?.url&&(Gi=function cl(_,f){var p,w;const S=function jd(_){const f=ll(_),p=f.link?decodeURIComponent(f.link):void 0,w=ll(p).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ll(S).link||S||w||p||_}(f);if(S.includes("/__/auth/callback")){const R=ll(S),z=R.firebaseError?function Bd(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,oe=null===(w=null===(p=z?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Ue=oe?_e(oe):null;return Ue?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:S,postBody:null}}return null}(rr,dt.url)),p.onEvent(Gi||Lg())});return function(rr){return pt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,oe);const Ue=S,nt=`${R.packageName.toLowerCase()}://`;Fs().handleOpenURL=function(){var pt=(0,c.Z)(function*(dt){if(dt.toLowerCase().startsWith(nt)&&oe({url:dt}),"function"==typeof Ue)try{Ue(dt)}catch(rr){console.error(rr)}});return function(dt){return pt.apply(this,arguments)}}()}};function Lg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}const $d=1e3;function ja(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function $a(_=(0,P.z$)()){return!("file:"!==ja()&&"ionic:"!==ja()&&"capacitor:"!==ja()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xo(){try{const _=self.localStorage,f=$i();if(_)return _.setItem(f,"1"),_.removeItem(f),!function Ug(_=(0,P.z$)()){return function qu(){return(0,P.w1)()&&11===document?.documentMode}()||function dl(_=(0,P.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,P.hl)()}catch{return Zu()&&(0,P.hl)()}return!1}function Zu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wu(){return(function Vg(){return"http:"===ja()||"https:"===ja()}()||(0,P.ru)()||$a())&&!function Hd(){return(0,P.b$)()||(0,P.UG)()}()&&Xo()&&!Zu()}function Ha(){return $a()&&typeof document<"u"}function Gd(){return(Gd=(0,c.Z)(function*(){return!!Ha()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},$d);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Ir={LOCAL:"local",NONE:"none",SESSION:"session"},hl=U,kf="persistence";function za(_){return ta.apply(this,arguments)}function ta(){return(ta=(0,c.Z)(function*(_){yield _._initializationPromise;const f=Ku(),p=L(kf,_.config.apiKey,_.name);f&&f.setItem(p,_._getPersistence())})).apply(this,arguments)}function Ku(){var _;try{return(null===(_=function iy(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Bg=U;class nr{constructor(){this.browserResolver=ht(Nr),this.cordovaResolver=ht(Fg),this.underlyingResolver=null,this._redirectPersistence=Ci,this._completeRedirectFn=zt,this._overrideRedirectResult=ft}_initialize(f){var p=this;return(0,c.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,w,S){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,p,w,S)})()}_openRedirect(f,p,w,S){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,p,w,S)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ha()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const p=yield function zd(){return Gd.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function Nf(_){return _.unwrap()}function qd(_){return Za(_)}function Za(_){const{_tokenResponse:f}=_ instanceof P.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return xi.credentialFromResult(_);const p=f.providerId;if(!p||p===ae.PASSWORD)return null;let w;switch(p){case ae.GOOGLE:w=tf;break;case ae.FACEBOOK:w=Fc;break;case ae.GITHUB:w=nf;break;case ae.TWITTER:w=dg;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:oe,nonce:Ue}=f;return R||z||S||oe?oe?p.startsWith("saml.")?xo._create(p,oe):ts._fromParams({providerId:p,signInMethod:p,pendingToken:oe,idToken:S,accessToken:R}):new va(p).credential({idToken:S,accessToken:R,rawNonce:Ue}):null}return _ instanceof P.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function Fr(_,f){return f.catch(p=>{throw p instanceof P.ZR&&function Ff(_,f){var p;const w=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Zd(_,function _g(_,f){var p;const w=(0,P.m9)(_),S=f;return U(f.customData.operationType,w,"argument-error"),U(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),er._fromError(w,S)}(_,f));else if(w){const S=Za(f),R=f;S&&(R.credential=S,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(_,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:qd(p),additionalUserInfo:pg(p),user:zi.getOrCreate(S)}})}function fl(_,f){return na.apply(this,arguments)}function na(){return(na=(0,c.Z)(function*(_,f){const p=yield f;return{verificationId:p.verificationId,confirm:w=>Fr(_,p.confirm(w))}})).apply(this,arguments)}class Zd{constructor(f,p){this.resolver=p,this.auth=function qa(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Fr(Nf(this.auth),this.resolver.resolveSignIn(f))}}class zi{constructor(f){this._delegate=f,this.multiFactor=function Ts(_){const f=(0,P.m9)(_);return io.has(f)||io.set(f,Fo._fromUser(f)),io.get(f)}(f)}static getOrCreate(f){return zi.USER_MAP.has(f)||zi.USER_MAP.set(f,new zi(f)),zi.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,c.Z)(function*(){return Fr(p.auth,Ea(p._delegate,f))})()}linkWithPhoneNumber(f,p){var w=this;return(0,c.Z)(function*(){return fl(w.auth,function Q_(_,f,p){return yf.apply(this,arguments)}(w._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,c.Z)(function*(){return Fr(p.auth,function os(_,f,p){return pr.apply(this,arguments)}(p._delegate,f,nr))})()}linkWithRedirect(f){var p=this;return(0,c.Z)(function*(){return yield za(Vn(p.auth)),J(p._delegate,f,nr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,c.Z)(function*(){return Fr(p.auth,Iu(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return fl(this.auth,function Ig(_,f,p){return qo.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return Fr(this.auth,function un(_,f,p){return Lu.apply(this,arguments)}(this._delegate,f,nr))}reauthenticateWithRedirect(f){var p=this;return(0,c.Z)(function*(){return yield za(Vn(p.auth)),x(p._delegate,f,nr)})()}sendEmailVerification(f){return function pd(_,f){return Su.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,c.Z)(function*(){return yield function cd(_,f){return no.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Au(_,f){return md((0,P.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function gd(_,f){return md((0,P.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function tr(_,f){return Fu.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Sa(_,f){return vi.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function Gc(_,f,p){return Un.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zi.USER_MAP=new WeakMap;const Wa=U;let pl=(()=>{class _{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Wa(S,"invalid-api-key",{appName:p.name}),Wa(S,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?nr:void 0;this._delegate=w.initialize({options:{persistence:jg(S,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function Pc(_,f,p){const w=Vn(_);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const S=!!p?.disableWarnings,R=Yt(f),{host:z,port:oe}=function Jn(_){const f=Yt(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const R=S[1];return{host:R,port:lr(w.substr(R.length+1))}}{const[R,z]=w.split(":");return{host:R,port:lr(z)}}}(f);w.config.emulator={url:`${R}//${z}${null===oe?"":`:${oe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:oe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Es(){function _(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,w)}applyActionCode(p){return function dd(_,f){return bu.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return hd(this._delegate,p)}confirmPasswordReset(p,w){return function Hc(_,f,p){return St.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var S=this;return(0,c.Z)(function*(){return Fr(S._delegate,function af(_,f,p){return Sn.apply(this,arguments)}(S._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function fd(_,f){return No.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function uf(_,f){return"EMAIL_SIGNIN"===Rr.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,c.Z)(function*(){Wa(Wu(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function ut(_,f){return lt.apply(this,arguments)}(p._delegate,nr);return w?Fr(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function ny(_,f){Vn(_)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,w,S){const{next:R,error:z,complete:oe}=Yu(p,w,S);return this._delegate.onAuthStateChanged(R,z,oe)}onIdTokenChanged(p,w,S){const{next:R,error:z,complete:oe}=Yu(p,w,S);return this._delegate.onIdTokenChanged(R,z,oe)}sendSignInLinkToEmail(p,w){return function Qt(_,f,p){return Tu.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function is(_,f,p){return Po.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,c.Z)(function*(){let S;switch(function ea(_,f){hl(Object.values(Ir).includes(f),_,"invalid-persistence-type"),(0,P.b$)()?hl(f!==Ir.SESSION,_,"unsupported-persistence-type"):(0,P.UG)()?hl(f===Ir.NONE,_,"unsupported-persistence-type"):Zu()?hl(f===Ir.NONE||f===Ir.LOCAL&&(0,P.hl)(),_,"unsupported-persistence-type"):hl(f===Ir.NONE||Xo(),_,"unsupported-persistence-type")}(w._delegate,p),p){case Ir.SESSION:S=Ci;break;case Ir.LOCAL:S=(yield ht(ss)._isAvailable())?ss:Jc;break;case Ir.NONE:S=B;break;default:return ve("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Fr(this._delegate,function vu(_){return rf.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Fr(this._delegate,nn(this._delegate,p))}signInWithCustomToken(p){return Fr(this._delegate,function jc(_,f){return ji.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return Fr(this._delegate,function be(_,f,p){return nn((0,P.m9)(_),ud.credential(f,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return Fr(this._delegate,function or(_,f,p){return zc.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return fl(this._delegate,function mf(_,f,p){return _f.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,c.Z)(function*(){return Wa(Wu(),w._delegate,"operation-not-supported-in-this-environment"),Fr(w._delegate,function sl(_,f,p){return bg.apply(this,arguments)}(w._delegate,p,nr))})()}signInWithRedirect(p){var w=this;return(0,c.Z)(function*(){return Wa(Wu(),w._delegate,"operation-not-supported-in-this-environment"),yield za(w._delegate),Jt(w._delegate,p,nr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function sf(_,f){return Du.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Ir,_})();function Yu(_,f,p){let w=_;"function"!=typeof _&&({next:w,error:f,complete:p}=_);const S=w;return{next:z=>S(z&&zi.getOrCreate(z)),error:f,complete:p}}function jg(_,f){const p=function Ga(_,f){const p=Ku();if(!p)return[];const w=L(kf,_,f);switch(p.getItem(w)){case Ir.NONE:return[B];case Ir.LOCAL:return[ss,Ci];case Ir.SESSION:return[Ci];default:return[]}}(_,f);if(typeof self<"u"&&!p.includes(ss)&&p.push(ss),typeof window<"u")for(const w of[Jc,Ci])p.includes(w)||p.push(w);return p.includes(B)||p.push(B),p}class Lf{constructor(){this.providerId="phone",this._delegate=new xi(Nf(K.Z.auth()))}static credential(f,p){return xi.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}Lf.PHONE_SIGN_IN_METHOD=xi.PHONE_SIGN_IN_METHOD,Lf.PROVIDER_ID=xi.PROVIDER_ID;const Ls=U;class ra{constructor(f,p,w=K.Z.app()){var S;Ls(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new _n(f,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sy(_){_.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new pl(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q_EMAIL_SIGNIN,PASSWORD_RESET:q_PASSWORD_RESET,RECOVER_EMAIL:q_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q_VERIFY_EMAIL}},EmailAuthProvider:ud,FacebookAuthProvider:Fc,GithubAuthProvider:nf,GoogleAuthProvider:tf,OAuthProvider:va,SAMLAuthProvider:Ui,PhoneAuthProvider:Lf,PhoneMultiFactorGenerator:kd,RecaptchaVerifier:ra,TwitterAuthProvider:dg,Auth:pl,AuthCredential:sr,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.3.7")}(K.Z)},8766:(gt,Ie,k)=>{k.d(Ie,{Lj:()=>ve,X3:()=>Ne});var c=k(5861);const K=(U,pe)=>pe.some(Ve=>U instanceof Ve);let P,ee;const de=new WeakMap,ce=new WeakMap,ae=new WeakMap,j=new WeakMap,$=new WeakMap;let we={get(U,pe,Ve){if(U instanceof IDBTransaction){if("done"===pe)return ce.get(U);if("objectStoreNames"===pe)return U.objectStoreNames||ae.get(U);if("store"===pe)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return Ce(U[pe])},set:(U,pe,Ve)=>(U[pe]=Ve,!0),has:(U,pe)=>U instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in U};function he(U){return"function"==typeof U?function st(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...pe){return U.apply(Ee(this),pe),Ce(de.get(this))}:function(...pe){return Ce(U.apply(Ee(this),pe))}:function(pe,...Ve){const qe=U.call(Ee(this),pe,...Ve);return ae.set(qe,pe.sort?pe.sort():[pe]),Ce(qe)}}(U):(U instanceof IDBTransaction&&function Be(U){if(ce.has(U))return;const pe=new Promise((Ve,qe)=>{const ht=()=>{U.removeEventListener("complete",tt),U.removeEventListener("error",se),U.removeEventListener("abort",se)},tt=()=>{Ve(),ht()},se=()=>{qe(U.error||new DOMException("AbortError","AbortError")),ht()};U.addEventListener("complete",tt),U.addEventListener("error",se),U.addEventListener("abort",se)});ce.set(U,pe)}(U),K(U,function te(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,we):U)}function Ce(U){if(U instanceof IDBRequest)return function q(U){const pe=new Promise((Ve,qe)=>{const ht=()=>{U.removeEventListener("success",tt),U.removeEventListener("error",se)},tt=()=>{Ve(Ce(U.result)),ht()},se=()=>{qe(U.error),ht()};U.addEventListener("success",tt),U.addEventListener("error",se)});return pe.then(Ve=>{Ve instanceof IDBCursor&&de.set(Ve,U)}).catch(()=>{}),$.set(pe,U),pe}(U);if(j.has(U))return j.get(U);const pe=he(U);return pe!==U&&(j.set(U,pe),$.set(pe,U)),pe}const Ee=U=>$.get(U);function Ne(U,pe,{blocked:Ve,upgrade:qe,blocking:ht,terminated:tt}={}){const se=indexedDB.open(U,pe),le=Ce(se);return qe&&se.addEventListener("upgradeneeded",ge=>{qe(Ce(se.result),ge.oldVersion,ge.newVersion,Ce(se.transaction))}),Ve&&se.addEventListener("blocked",()=>Ve()),le.then(ge=>{tt&&ge.addEventListener("close",()=>tt()),ht&&ge.addEventListener("versionchange",()=>ht())}).catch(()=>{}),le}function ve(U,{blocked:pe}={}){const Ve=indexedDB.deleteDatabase(U);return pe&&Ve.addEventListener("blocked",()=>pe()),Ce(Ve).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Fe=new Map;function Pe(U,pe){if(!(U instanceof IDBDatabase)||pe in U||"string"!=typeof pe)return;if(Fe.get(pe))return Fe.get(pe);const Ve=pe.replace(/FromIndex$/,""),qe=pe!==Ve,ht=Te.includes(Ve);if(!(Ve in(qe?IDBIndex:IDBObjectStore).prototype)||!ht&&!_e.includes(Ve))return;const tt=function(){var se=(0,c.Z)(function*(le,...ge){const Me=this.transaction(le,ht?"readwrite":"readonly");let ke=Me.store;return qe&&(ke=ke.index(ge.shift())),(yield Promise.all([ke[Ve](...ge),ht&&Me.done]))[0]});return function(ge){return se.apply(this,arguments)}}();return Fe.set(pe,tt),tt}!function ze(U){we=U(we)}(U=>({...U,get:(pe,Ve,qe)=>Pe(pe,Ve)||U.get(pe,Ve,qe),has:(pe,Ve)=>!!Pe(pe,Ve)||U.has(pe,Ve)}))},5861:(gt,Ie,k)=>{function c(P,ee,te,ne,de,ce,ae){try{var j=P[ce](ae),$=j.value}catch(q){return void te(q)}j.done?ee($):Promise.resolve($).then(ne,de)}function K(P){return function(){var ee=this,te=arguments;return new Promise(function(ne,de){var ce=P.apply(ee,te);function ae($){c(ce,ne,de,ae,j,"next",$)}function j($){c(ce,ne,de,ae,j,"throw",$)}ae(void 0)})}}k.d(Ie,{Z:()=>K})}},gt=>{gt(gt.s=5468)}]);